{"version":3,"sources":["webpack:///src/components/item/item-tags.vue","webpack:///./src/components/item/item-tags.vue?2c90","webpack:///./src/components/item/item-tags.vue","webpack:///./node_modules/babel-runtime/core-js/get-iterator.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///src/components/sku/spec-tag.vue","webpack:///./src/components/sku/spec-tag.vue?8fe8","webpack:///./src/components/sku/spec-tag.vue","webpack:///src/components/sku/spec-add.vue","webpack:///./src/components/sku/spec-add.vue?2800","webpack:///./src/components/sku/spec-add.vue","webpack:///src/components/sku/sku-add.vue","webpack:///./src/components/sku/sku-add.vue?ff2c","webpack:///./src/components/sku/sku-add.vue","webpack:///src/components/item/newItemForm.vue","webpack:///./src/components/item/newItemForm.vue?196b","webpack:///./src/components/item/newItemForm.vue","webpack:///src/components/item/AddItem.vue","webpack:///./src/components/item/AddItem.vue?468e","webpack:///./src/components/item/AddItem.vue"],"names":["item_tags","initHeader","getTagList","_this","this","data","it","_this2","name","id","_this3","actionPromise","msg","err","item_item_tags","render","_vm","_h","$createElement","_c","_self","staticStyle","width","on","click","$event","showModal","_v","attrs","title","model","value","callback","$$v","expression","max-height","type","handleAdd","margin","no-data-text","columns","tagList","slot","modal","on-visible-change","handleHidden","$set","trim","margin-top","size","handleSubmit","margin-left","show","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__","module","exports","default","__esModule","anObject","get","getIterator","iterFn","TypeError","call","spec_tag","attrid","text","spec","sku_spec_tag","staticClass","handleChose","_t","on-popper-hide","newAttrvalue","popVisible","class","errorinput","isError","min-width","on-focus","handleEditSpec","handleCancel","color","nativeOn","handleDel","spec_add","newval","_this4","ssrContext","sku_spec_add","_l","item","key","chosedspec","isActive","on-change","on-del","chosed","_s","attrvalue","directives","rawName","isAdd","icon","handleFocus","handleAddSpec","components_sku_spec_add","spec_add_normalizeComponent","sku_add","specArr","commonPrice","commonQuantity","attrList","attrname","res","speclist","chosedAttr","self","price","priceError","h","quantity","quantityError","attrmap","temp","_this5","getAttrList","getItemSwiperList","_this6","list","_this7","_this8","erro","_this9","_this10","e","src","length","_iteratorNormalCompletion","_step","_iteratorNormalCompletion2","val","_step2","dc","_dc","activeAttr","_this11","itemid","_this12","skuData","sku","_this13","pop","MultiImgUploader","sku_sku_add","ref","label-position","label-width","formData","label","images","swiperList","handleDelPic","on-add","handleAddPic","handleChangePic","prop","error","maxSelect","span","multiple","filterable","placement","handleSelectChange","newAttrname","cursor","handleAddAttr","justify","align","handleDelChosed","active-change","handleActive","placeholder","transfer","tags","tag","_e","text-align","display","list-change","handleTaglist","errorTips","border","tableColumns","handleReset","components_sku_sku_add","sku_add_normalizeComponent","newItemForm","SingleImgUploader","getCategoryList","content","file","url","item_newItemForm","rules","ruleValidate","cate","catename","min","step","before-upload","handleUpload","action","true-value","false-value","description","change","contentChange","components_item_newItemForm","newItemForm_normalizeComponent","AddItem","cateid","item_AddItem","margin-bottom","current","on-create","handleCreate","AddItem_Component","AddItem_normalizeComponent"],"mappings":"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","file":"static/js/1.d76874ec8a6f79e2be4f.js","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<Button style=\"width:120px\" @click='showModal=true'>管理商品标签</Button>\r\n\t\t<Modal v-model='showModal' title='商品标签管理' width='600'>\r\n\t\t\t<div style=\"max-height:600px;\">\r\n\t\t\t\t<Button type='primary' @click='handleAdd'>新建标签</Button>\r\n\t\t\t\t<Table no-data-text='暂无标签' :columns=\"columns\" :data=\"tagList\" style='margin:20px 0'></Table>\r\n\t\t\t</div>\r\n\t\t\t<div slot='footer'></div>\r\n\t\t</Modal>\r\n\t\t<Modal v-model='modal.show' :title='modal.title' @on-visible-change='handleHidden'>\r\n\t\t\t<Input v-model.trim='modal.name'></Input>\r\n\t\t\t<div style='margin-top:10px;'>\r\n\t\t\t\t<Button type='primary' size='small' @click='handleSubmit'>确定</Button>\r\n\t\t\t\t<Button size='small' style='margin-left:10px' @click='modal.show=false'>取消</Button>\r\n\t\t\t</div>\r\n\t\t\t<div slot='footer'></div>\r\n\t\t</Modal>\r\n\t</div>\r\n</template>\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tshowModal:false,\r\n\t\t\t\ttableLoading:false,\r\n\t\t\t\tcolumns:[],\r\n\t\t\t\ttagList:[],\r\n\t\t\t\tmodal:{\r\n\t\t\t\t\tid:'',\r\n\t\t\t\t\tisAdd:false,\r\n\t\t\t\t\tshow:false,\r\n\t\t\t\t\ttitle:'',\r\n\t\t\t\t\tname:''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted(){\r\n\t\t\tthis.initHeader();\r\n\t\t\t this.getTagList();\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tgetTagList() {\r\n\t\t\t\tthis.$http.post(this.$api.tag_listall,{}).then(res=>{\r\n\t\t\t        if(res.data.result=='1') {\r\n\t\t\t        \tthis.tagList = res.data.data\r\n\t\t\t        \tthis.$emit('list-change',res.data.data.map(it=>it))\r\n\t\t\t        }\r\n\t\t\t    }).catch(err=>{\r\n\t\t\t        console.log(err)\r\n\t\t\t    })\r\n\t\t\t},\r\n\t\t\thandleAdd() {\r\n\t\t\t\tthis.modal.isAdd = true;\r\n\t\t\t\tthis.modal.show = true;\r\n\t\t\t\tthis.modal.title = '新建标签';\r\n\t\t\t\tthis.modal.id='';\r\n\t\t\t},\r\n\t\t\tinitHeader() {\r\n\t\t\t\tthis.columns = [{\r\n\t\t\t\t\ttitle:'标签名',\r\n\t\t\t\t\tkey:'name',\r\n\t\t\t\t},{\r\n\t\t\t\t\ttitle:'操作',\r\n\t\t\t\t\tkey:'operate',\r\n\t\t\t\t\trender:(h,params)=> {\r\n\t\t\t\t\t\tlet delBtn = h('Button',{\r\n\t\t\t\t\t\t\tprops:{\r\n\t\t\t\t\t\t\t\ttype:'error',\r\n\t\t\t\t\t\t\t\tsize:'small'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ton:{\r\n\t\t\t\t\t\t\t\tclick:()=>{\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},'删除');\r\n\t\t\t\t\t\tlet editBtn = h('Button',{\r\n\t\t\t\t\t\t\tprops:{\r\n\t\t\t\t\t\t\t\ttype:'primary',\r\n\t\t\t\t\t\t\t\tsize:'small'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\ton:{\r\n\t\t\t\t\t\t\t\tclick:()=>{\r\n\t\t\t\t\t\t\t\t\tthis.modal.isAdd = false;\r\n\t\t\t\t\t\t\t\t\tthis.modal.show = true;\r\n\t\t\t\t\t\t\t\t\tthis.modal.title = '标签编辑：'+params.row.name;\r\n\t\t\t\t\t\t\t\t\tthis.modal.id = params.row.id;\r\n\t\t\t\t\t\t\t\t\tthis.modal.name = params.row.name;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},'编辑')\r\n\t\t\t\t\t\treturn h('div',[delBtn,editBtn])\r\n\t\t\t\t\t}\r\n\t\t\t\t}]\r\n\t\t\t},\r\n\t\t\thandleHidden(show) {\r\n\t\t\t\tif(!show) {\r\n\t\t\t\t\tthis.modal.isAdd = false;\r\n\t\t\t\t\tthis.modal.title = '';\r\n\t\t\t\t\tthis.modal.name = '';\r\n\t\t\t\t\tthis.modal.id = '';\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleSubmit() {\r\n\t\t\t\tlet name = this.modal.name\r\n\t\t\t\tif(!name.length) {\r\n\t\t\t\t\tthis.$Message.error('标签名不能为空')\r\n\t\t\t\t\treturn ;\r\n\t\t\t\t}\r\n\t\t\t\tlet actionPromise;\r\n\t\t\t\tif(this.modal.isAdd) {\r\n\t\t\t\t\tactionPromise = this.$http.post(this.$api.tag_add,{name}).then(res=>{\r\n\t\t\t\t\t\tif(res.data.result=='1') {\r\n\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\treturn Promise.reject(res.data.msg)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},err=>{\r\n\t\t\t\t\t\treturn Promise.reject('网络请求错误')\r\n\t\t\t\t\t})\r\n\t\t\t\t}else if(!this.modal.isAdd&&this.modal.id) {\r\n\t\t\t\t\tactionPromise = this.$http.post(this.$api.tag_edit,{id:this.modal.id,name}).then(res=>{\r\n\t\t\t\t\t\tif(res.data.result=='1') {\r\n\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t}else {\r\n\t\t\t\t\t\t\treturn Promise.reject(res.data.msg)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},err=>{\r\n\t\t\t\t\t\treturn Promise.reject('网络请求错误')\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tif(actionPromise) {\r\n\t\t\t\t\tactionPromise.then(res=>{\r\n\t\t\t\t\t\tthis.$Message.success('保存成功')\r\n\t\t\t\t\t\tthis.modal.show = false;\r\n\t\t\t\t\t\tthis.getTagList()\r\n\t\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\t\tthis.$Message.error(err)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/item/item-tags.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Button',{staticStyle:{\"width\":\"120px\"},on:{\"click\":function($event){_vm.showModal=true}}},[_vm._v(\"管理商品标签\")]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"商品标签管理\",\"width\":\"600\"},model:{value:(_vm.showModal),callback:function ($$v) {_vm.showModal=$$v},expression:\"showModal\"}},[_c('div',{staticStyle:{\"max-height\":\"600px\"}},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleAdd}},[_vm._v(\"新建标签\")]),_vm._v(\" \"),_c('Table',{staticStyle:{\"margin\":\"20px 0\"},attrs:{\"no-data-text\":\"暂无标签\",\"columns\":_vm.columns,\"data\":_vm.tagList}})],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"})]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":_vm.modal.title},on:{\"on-visible-change\":_vm.handleHidden},model:{value:(_vm.modal.show),callback:function ($$v) {_vm.$set(_vm.modal, \"show\", $$v)},expression:\"modal.show\"}},[_c('Input',{model:{value:(_vm.modal.name),callback:function ($$v) {_vm.$set(_vm.modal, \"name\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"modal.name\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"10px\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.handleSubmit}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"size\":\"small\"},on:{\"click\":function($event){_vm.modal.show=false}}},[_vm._v(\"取消\")])],1),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-aafdd27a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/item/item-tags.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./item-tags.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./item-tags.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-aafdd27a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./item-tags.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/item/item-tags.vue\n// module id = null\n// module chunks = ","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/babel-runtime/core-js/get-iterator.js\n// module id = BO1k\n// module chunks = 1 2","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/get-iterator.js\n// module id = fxRn\n// module chunks = 1 2","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator.js\n// module id = g8Ux\n// module chunks = 1 2","<template>\r\n  <div class=\"tag-wrapper\">\r\n    \t<span class=\"tag-main-content\" @click='handleChose'>\r\n\t\t\t<slot></slot>\r\n\t\t</span>\r\n    \t<span class=\"tag-append\">\r\n\t\t\t<Poptip v-model=\"popVisible\" @on-popper-hide='newAttrvalue=\"\"'>\r\n\t\t\t\t<Icon type=\"edit\" class='tag-opr' @click='popVisible=true' title='修改名称'></Icon>\r\n\t\t\t\t<div slot='content' :class='{errorinput:isError}'>\r\n\t\t\t\t\t<Input v-model.trim='newAttrvalue' @on-focus='isError=false' style='min-width:240px;'>\r\n\t\t\t\t\t\t<span slot='append' class=\"tag-append-oprate\">\r\n\t\t\t\t        \t<span @click='handleEditSpec'>确定</span>\r\n\t\t\t\t\t\t    <span @click='handleCancel'>取消</span>\r\n\t\t\t\t\t\t</span>\r\n\t\t\t\t    </Input>\r\n\t\t\t\t    <div style=\"color:#ccc\">\r\n\t\t\t\t    \t<Icon type=\"ios-information-outline\"></Icon>请输入修改名称\r\n\t\t\t\t    </div>\r\n\t\t\t\t</div>\r\n\t\t\t</Poptip>\r\n\t\t\t<Icon type=\"close\" class='tag-close tag-opr' @click.native='handleDel' title='删除标签'></Icon>\r\n\t\t</span>\t\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  props:['spec'],\r\n  data() {\r\n    return {\r\n      popVisible: false,\r\n      newAttrvalue:'',\r\n      isError:false,\r\n    }\r\n  },\r\n  computed: {\r\n  \t\r\n  },\r\n  methods:{\r\n  \thandleEditSpec() {\r\n  \t\tif(!this.newAttrvalue.length) {\r\n  \t\t\tthis.setError('名称不能为空')\r\n  \t\t\treturn;\r\n  \t\t}\r\n  \t\r\n  \t\tthis.$emit('on-change',{id:this.spec.id,attrvalue:this.newAttrvalue,attrid:this.spec.attrid});\r\n  \t\tthis.popVisible = false;\r\n  \t},\r\n  \thandleCancel() {\r\n  \t\tthis.popVisible = false;\r\n  \t},\r\n  \tsetError(text) {\r\n    \tthis.isError = true;\r\n    \tthis.$Message.error(text);\r\n    },\r\n\r\n    handleChose() {\r\n      this.$emit('chosed')\r\n    },\r\n  \r\n    handleDel() {\r\n    \tlet self = this\r\n    \tthis.confirm('操作将会永久删除这个选项，请确认删除','删除').then(res=>{\r\n\r\n    \t\tself.$emit('on-del',this.spec)\r\n    \t}).catch(error=>{})\r\n    },\r\n    confirm(text,title) {\r\n      let that = this\r\n      return new Promise((resolve, reject) => {\r\n        that.$Modal.confirm({\r\n          title: title ? title : '确认',\r\n          content: text,\r\n          onOk: () => {\r\n            return resolve(true)\r\n          },\r\n          onCancel: () => {\r\n            return reject(false)\r\n          }\r\n        })\r\n      })\r\n    },\r\n  },\r\n}\r\n\r\n</script>\r\n<style>\r\n.ivu-poptip-body-content {\r\n\toverflow: none;\r\n}\r\n.tag-wrapper {\r\n  display: inline-block;\r\n  padding: 0 5px;\r\n  font-size: 12px;\r\n  box-sizing: border-box;\r\n  border: 1px dashed #ccc;\r\n  border-radius: 5px;\r\n  position: relative;\r\n  min-height: 30px;\r\n  line-height: 30px;\r\n  vertical-align: middle;\r\n}\r\n.tag-wrapper.chosedspec {\r\n\tbackground-color: #3bc0c3;\r\n\tcolor:#fff;\r\n\tborder:0;\r\n}\r\n\r\n.tag-wrapper:hover {\r\n  border-color: #3bc0c3;\r\n}\r\n\r\n.tag-main-content {\r\n  /*background-color: pink;*/\r\n  display: inline-block;\r\n  height: 100%;\r\n  padding: 0 5px;\r\n  min-width: 40px;\r\n  text-align: center;\r\n  cursor: pointer;\r\n}\r\n.tag-main-content:hover {\r\n\tcolor:#ccc;\r\n}\r\n.stag-close {\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  width: 12px;\r\n  font-size: 15px;\r\n  height: 12px;\r\n  vertical-align: middle;\r\n  text-align: center;\r\n  line-height: 15px;\r\n  color: #3bc0c3;\r\n  border-radius: 50%;\r\n}\r\n\r\n.tag-opr {\r\n  display: inline-block;\r\n  /*background-color: teal;*/\r\n  font-size: 12px;\r\n  color: #ccc;\r\n  cursor: pointer;\r\n}\r\n\r\n.tag-opr:hover {\r\n  color: #000;\r\n}\r\n\r\n.tag-append-oprate span:first-child{\r\n\tmargin-right: 5px;\r\n\tcolor: #3bc0c3;\r\n}\r\n.tag-append-oprate span {\r\n\tcursor: pointer;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/sku/spec-tag.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tag-wrapper\"},[_c('span',{staticClass:\"tag-main-content\",on:{\"click\":_vm.handleChose}},[_vm._t(\"default\")],2),_vm._v(\" \"),_c('span',{staticClass:\"tag-append\"},[_c('Poptip',{on:{\"on-popper-hide\":function($event){_vm.newAttrvalue=\"\"}},model:{value:(_vm.popVisible),callback:function ($$v) {_vm.popVisible=$$v},expression:\"popVisible\"}},[_c('Icon',{staticClass:\"tag-opr\",attrs:{\"type\":\"edit\",\"title\":\"修改名称\"},on:{\"click\":function($event){_vm.popVisible=true}}}),_vm._v(\" \"),_c('div',{class:{errorinput:_vm.isError},attrs:{\"slot\":\"content\"},slot:\"content\"},[_c('Input',{staticStyle:{\"min-width\":\"240px\"},on:{\"on-focus\":function($event){_vm.isError=false}},model:{value:(_vm.newAttrvalue),callback:function ($$v) {_vm.newAttrvalue=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"newAttrvalue\"}},[_c('span',{staticClass:\"tag-append-oprate\",attrs:{\"slot\":\"append\"},slot:\"append\"},[_c('span',{on:{\"click\":_vm.handleEditSpec}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('span',{on:{\"click\":_vm.handleCancel}},[_vm._v(\"取消\")])])]),_vm._v(\" \"),_c('div',{staticStyle:{\"color\":\"#ccc\"}},[_c('Icon',{attrs:{\"type\":\"ios-information-outline\"}}),_vm._v(\"请输入修改名称\\n\\t\\t\\t\\t    \")],1)],1)],1),_vm._v(\" \"),_c('Icon',{staticClass:\"tag-close tag-opr\",attrs:{\"type\":\"close\",\"title\":\"删除标签\"},nativeOn:{\"click\":function($event){_vm.handleDel($event)}}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-14294156\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/sku/spec-tag.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-14294156\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./spec-tag.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./spec-tag.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./spec-tag.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-14294156\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./spec-tag.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/sku/spec-tag.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <spec-tag v-for=\"item in specList\" :key=\"item.id\" :spec='item' @on-change='handleEditSpec' @on-del='handleDel' class='tags' :class='{chosedspec:isActive(item.id)}' @chosed='handleChose(item)'>{{item.attrvalue}}</spec-tag>\r\n    <Button icon=\"plus\" type=\"dashed\" @click=\"isAdd=true\" v-show='!isAdd' class='mr'>新建标签</Button>\r\n    <span class=\"new-value mr\" v-show='isAdd' :class='{errorinput:isError}'>\r\n    \t<Input v-model.trim=\"newAttrvalue\" @on-focus='handleFocus'>\r\n\t        <span slot='append' class=\"append-oprate\">\r\n\t        \t<span @click='handleAddSpec'>确定</span>\r\n    <span @click='handleCancel'>取消</span>\r\n    </span>\r\n    </Input>\r\n    </span>\r\n  </div>\r\n</template>\r\n<script>\r\nimport myTag from './spec-tag.vue'\r\nexport default {\r\n  props: ['speclist', 'attrid'],\r\n  data() {\r\n    return {\r\n      isAdd: false,\r\n      newAttrvalue: '',\r\n      isError: false,\r\n      specList: [],\r\n      activeList:[],\r\n    }\r\n  },\r\n  watch: {\r\n  \tactiveList:{\r\n  \t\thandler(newval) {\r\n  \t\t\tthis.$emit('active-change',newval)\r\n  \t\t},\r\n  \t\tdeep:true,\r\n  \t}\r\n  },\r\n  mounted() {\r\n    //当页面加载后，请求speclist\r\n    this.getSpecList(this.attrid)\r\n  },\r\n  methods: {\r\n  \t//判断一个specid是否是active\r\n  \tisActive(id) {\r\n  \t\treturn this.activeList.findIndex(it=>it.id==id) > -1;\r\n  \t},\r\n\r\n  \thandleChose(item) {\r\n  \t\tlet index = this.activeList.findIndex(it=>it.id==item.id)\r\n  \t\tif(index==-1) {\r\n  \t\t\tthis.activeList.push({id:item.id,attrvalue:item.attrvalue,attrid:item.attrid})\r\n  \t\t}else {\r\n  \t\t\tthis.activeList.splice(index,1)\r\n  \t\t}\r\n  \t},\r\n    handleAddSpec() {\r\n      if (!this.newAttrvalue.length) {\r\n        this.setError('规格不能为空！');\r\n        return;\r\n      }\r\n      this.postAddSpec({ attrid: this.attrid, attrvalue: this.newAttrvalue }).then(res => {\r\n        return this.getSpecList(this.attrid)\r\n      }).then(() => {\r\n        this.handleCancel()\r\n      })\r\n    },\r\n\r\n    handleCancel() {\r\n      this.isAdd = false;\r\n      this.newAttrvalue = '';\r\n    },\r\n\r\n    setError(text) {\r\n      this.isError = true;\r\n      this.$Message.error(text);\r\n    },\r\n\r\n    handleFocus() {\r\n      this.isError = false\r\n    },\r\n\r\n    handleEditSpec(data) {\r\n      \r\n      this.postEditSpec({ specid: data.id, attrvalue: data.attrvalue }).then(res => {\r\n        return this.getSpecList(this.attrid)\r\n      })\r\n    },\r\n\r\n    handleDel(data) {\r\n    \r\n      let id = data.id;\r\n      this.postDelSpec(id).then(res => {\r\n        return this.getSpecList(this.attrid)\r\n      })\r\n    },\r\n\r\n    //新增spec的请求\r\n    postAddSpec(params) {\r\n      return this.$http.post(this.$api.itemspec_add, params).then(res => {\r\n        return res.data.data\r\n      }).catch(error => {\r\n\r\n      })\r\n    },\r\n\r\n    //删除spec的请求\r\n    postDelSpec(specid) {\r\n      return this.$http.post(this.$api.itemspec_del, { specid }).then(res => {\r\n        return res.data.data\r\n      })\r\n    },\r\n\r\n    //获取speclist 的请求\r\n    getSpecList(attrid) {\r\n      return this.$http.post(this.$api.itemspec_list, { attrid }).then(res => {\r\n        \r\n        this.specList = res.data.data\r\n      })\r\n    },\r\n\r\n    //修改spec的请求\r\n    postEditSpec(params) {\r\n      return this.$http.post(this.$api.itemspec_edit, params).then(res => {\r\n        return res.data.data\r\n      })\r\n    },\r\n\r\n  },\r\n  components: {\r\n    'spec-tag': myTag\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped>\r\n.new-value {\r\n  display: inline-block;\r\n  width: 200px;\r\n  vertical-align: top;\r\n  box-sizing: border-box;\r\n  padding: 1px;\r\n  border: 0;\r\n  border-radius: 5px;\r\n}\r\n\r\n.append-oprate span:first-child {\r\n  margin-right: 5px;\r\n  color: #3bc0c3;\r\n}\r\n\r\n.append-oprate span {\r\n  cursor: pointer;\r\n}\r\n\r\n.tags,\r\n.mr {\r\n  margin: 5px 10px;\r\n}\r\n\r\n</style>\r\n<style>\r\n.errorinput .ivu-input {\r\n  border: 1px solid red;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/sku/spec-add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._l((_vm.specList),function(item){return _c('spec-tag',{key:item.id,staticClass:\"tags\",class:{chosedspec:_vm.isActive(item.id)},attrs:{\"spec\":item},on:{\"on-change\":_vm.handleEditSpec,\"on-del\":_vm.handleDel,\"chosed\":function($event){_vm.handleChose(item)}}},[_vm._v(_vm._s(item.attrvalue))])}),_vm._v(\" \"),_c('Button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isAdd),expression:\"!isAdd\"}],staticClass:\"mr\",attrs:{\"icon\":\"plus\",\"type\":\"dashed\"},on:{\"click\":function($event){_vm.isAdd=true}}},[_vm._v(\"新建标签\")]),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isAdd),expression:\"isAdd\"}],staticClass:\"new-value mr\",class:{errorinput:_vm.isError}},[_c('Input',{on:{\"on-focus\":_vm.handleFocus},model:{value:(_vm.newAttrvalue),callback:function ($$v) {_vm.newAttrvalue=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"newAttrvalue\"}},[_c('span',{staticClass:\"append-oprate\",attrs:{\"slot\":\"append\"},slot:\"append\"},[_c('span',{on:{\"click\":_vm.handleAddSpec}},[_vm._v(\"确定\")]),_vm._v(\" \"),_c('span',{on:{\"click\":_vm.handleCancel}},[_vm._v(\"取消\")])])])],1)],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c424ab4a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/sku/spec-add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c424ab4a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./spec-add.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c424ab4a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./spec-add.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./spec-add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./spec-add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c424ab4a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./spec-add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c424ab4a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/sku/spec-add.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <Form label-position=\"left\" :label-width=\"100\" ref='skuForm' :model='formData'>\r\n      <FormItem label='商品轮播图'>\r\n        <div>\r\n          <swiper-uploader :images='swiperList' @on-del='handleDelPic' @on-add='handleAddPic' @on-change='handleChangePic'></swiper-uploader>\r\n        </div>\r\n      </FormItem>\r\n      <FormItem label='商品规格' prop='activeAttr' :error='maxSelect'>\r\n        <Row>\r\n          <Col :span='15'>\r\n          <Select v-model=\"formData.activeAttr\" multiple size='large' filterable placement='top' @on-change='handleSelectChange'>\r\n            <Option v-for=\"item in attrList\" :value=\"item.attrid\" :key=\"item.attrid\">{{ item.attrname }}</Option>\r\n            <Input v-model.trim=\"newAttrname\" style='width:50%;margin:10px auto;'>\r\n            <span slot='append'>\r\n                <span @click='handleAddAttr' style=\"cursor:pointer\">新增</span>\r\n            </span>\r\n            </Input>\r\n          </Select>\r\n          </Col>\r\n        </Row>\r\n      </FormItem>\r\n      <FormItem v-for='item in chosedAttr' :key='item.attrid'>\r\n        <div class=\"attrs-item\">\r\n          <Row type='flex' justify=\"center\" align=\"middle\">\r\n            <Col :span='4'>\r\n            <span class=\"chosed-attr\">{{item.attrname}} <Icon type=\"close\" class=\"close-attr\" @click.native='handleDelChosed(item.attrid)'></Icon></span>\r\n            </Col>\r\n            <Col :span='20'>\r\n            <spec-add class='spec-add' :attrid='item.attrid' @active-change='handleActive($event,item.attrid)'></spec-add>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n      </FormItem>\r\n      <FormItem label='商品标签'>\r\n        <Select v-model=\"tags\" placeholder=\"请选择商品标签\" size=\"large\" transfer style=\"width: 400px\" multiple>\r\n          <Option v-for=\"tag in tagList\" :value=\"tag.id\" :key=\"tag.id\">{{tag.name}}</Option>\r\n          <div v-if='!tagList.length' style=\"text-align:center;color:#999\">暂无商品标签</div>\r\n        </Select>\r\n        <item-tags style='display:inline-block' @list-change='handleTaglist'></item-tags>\r\n      </FormItem>\r\n      <FormItem label='规格价格' :error='errorTips'>\r\n        <Table border :columns='tableColumns' :data='skuData'></Table>\r\n      </FormItem>\r\n      <FormItem>\r\n        <Button type=\"primary\" @click=\"handleSubmit('skuForm')\" size=\"large\" style=\"width:120px\">下一步</Button>\r\n        <Button type=\"ghost\" @click=\"handleReset('skuForm')\" size=\"large\" style=\"margin-left: 8px;width:80px\">取消</Button>\r\n      </FormItem>\r\n    </Form>\r\n  </div>\r\n</template>\r\n<script>\r\n  import specAdd from './spec-add.vue'\r\n  import swiperUploader from '../common/MultiImgUploader.vue'\r\n  import itemTags from '../item/item-tags.vue'\r\n  export default {\r\n    props: ['itemid', 'cateid'],\r\n    data() {\r\n      return {\r\n        newAttrname: '',\r\n        attrList: [], //attr列表，请求获取\r\n        speclist: {}, //用来存储各个attr下面的spec数据\r\n        activeAttr: [], //选中的attr\r\n        commonPrice: '',\r\n        commonQuantity: '',\r\n        formData: {\r\n          activeAttr: []\r\n        },\r\n        tags:[],\r\n        maxSelect: '',\r\n        errorTips: '',\r\n        swiperList: [],\r\n        tagList:[],\r\n      }\r\n    },\r\n    computed: {\r\n      //把select选中的attr（值为attrid的数组）转化为含attrid和attrname信息的数组\r\n      chosedAttr() {\r\n        return this.formData.activeAttr.map(id => this.attrList.find(it => it.attrid == id))\r\n      },\r\n      skuData() {\r\n        let arr = this.skuFormat(this.specArr);\r\n        return arr.map(it => {\r\n          it.price = this.commonPrice;\r\n          it.quantity = this.commonQuantity;\r\n          it.priceError = false;\r\n          it.quantityError = false;\r\n          return it\r\n        })\r\n      },\r\n\r\n      //attrid 和attrname 对应的map表\r\n      attrmap() {\r\n        let origin = this.attrList\r\n        let res = {}\r\n        origin.forEach(it => {\r\n          res[it.attrid] = it.attrname\r\n        })\r\n        return res\r\n      },\r\n\r\n\r\n      specArr() {\r\n        let res = {};\r\n        let origin = this.speclist;\r\n        Object.keys(origin).forEach(attrid => {\r\n          if (origin[attrid].length > 0) {\r\n            res[this.attrmap[attrid]] = origin[attrid].map(spec => spec.attrvalue)\r\n          }\r\n        })\r\n        return res\r\n      },\r\n\r\n\r\n      tableColumns() {\r\n        let attrs = this.chosedAttr;\r\n        let temp = [{\r\n          key: 'price',\r\n          title: '价格',\r\n          align: 'center',\r\n          iserror: true,\r\n          render: (h, params) => {\r\n            let self = this\r\n            return h('Input', {\r\n              attrs: {\r\n                value: params.row.price,\r\n              },\r\n              class: {\r\n                iserror: params.row.priceError\r\n              },\r\n              on: {\r\n                'on-change': (e) => {\r\n                  params.row.price = e.target.value.trim()\r\n                  this.skuData[params.index].price = e.target.value.trim()\r\n                },\r\n                'on-blur': (e) => {\r\n                  params.row.priceError = !params.row.price || isNaN(params.row.price)\r\n                  if (params.row.priceError) {\r\n                    self.$Message.error('价格不能为空且必须是数字')\r\n                  }\r\n                }\r\n              }\r\n            })\r\n\r\n          },\r\n          renderHeader: (h, params) => {\r\n            let self = this\r\n            return h('div', {\r\n              attrs: {\r\n                class: 'sku-table-header'\r\n              }\r\n            }, [\r\n              h('span', {\r\n                attrs: {\r\n                  class: 'sku-header-title'\r\n                }\r\n              }, '价格'),\r\n              h('Input', {\r\n                class: {\r\n                  iserror: isNaN(self.commonPrice)\r\n                },\r\n                attrs: {\r\n                  class: 'sku-header-input',\r\n                  value: self.commonPrice,\r\n                  placeholder: '批量输入价格',\r\n                },\r\n                on: {\r\n                  'on-change': (e) => {\r\n                    self.commonPrice = e.target.value.trim()\r\n                  },\r\n                  'on-blur': (e) => {\r\n                    if (isNaN(self.commonPrice)) {\r\n                      self.$Message.error('价格不能为空且必须是数字')\r\n                    }\r\n                  }\r\n                }\r\n              })\r\n            ])\r\n          }\r\n        }, {\r\n          key: 'quantity',\r\n          title: '数量',\r\n          align: 'center',\r\n          render: (h, params) => {\r\n            let self = this;\r\n            return h('Input', {\r\n              attrs: {\r\n                value: params.row.quantity,\r\n              },\r\n              class: {\r\n                iserror: params.row.quantityError\r\n              },\r\n              on: {\r\n                'on-change': (e) => {\r\n                  params.row.quantity = e.target.value.trim()\r\n                  this.skuData[params.index].quantity = e.target.value.trim()\r\n                },\r\n                'on-blur': (e) => {\r\n                  params.row.quantityError = !params.row.quantity || isNaN(params.row.quantity)\r\n                  if (params.row.quantityError) {\r\n                    self.$Message.error('数量不能为空且必须是数字')\r\n                  }\r\n                }\r\n              }\r\n            })\r\n          },\r\n          renderHeader: (h, params) => {\r\n            let self = this\r\n            return h('div', {\r\n              attrs: {\r\n                class: 'sku-table-header'\r\n              }\r\n            }, [\r\n              h('span', {\r\n                attrs: {\r\n                  class: 'sku-header-title'\r\n                }\r\n              }, '数量'),\r\n              h('Input', {\r\n                class: {\r\n                  iserror: isNaN(self.commonQuantity)\r\n                },\r\n                attrs: {\r\n                  class: 'sku-header-input',\r\n                  value: self.commonQuantity,\r\n                  placeholder: '批量输入数量'\r\n                },\r\n                on: {\r\n                  'on-change': (e) => {\r\n                    self.commonQuantity = e.target.value.trim()\r\n                  },\r\n                  'on-blur': (e) => {\r\n                    if (isNaN(self.commonQuantity)) {\r\n                      self.$Message.error('数量不能为空且必须是数字')\r\n                    }\r\n                  }\r\n                }\r\n              })\r\n            ])\r\n          }\r\n        }];\r\n        let specs = this.speclist;\r\n        let ary = [];\r\n        let map = this.attrmap;\r\n        Object.keys(specs).forEach(attrid => {\r\n          if (specs[attrid].length) {\r\n            ary.push({\r\n              key: map[attrid],\r\n              title: map[attrid],\r\n              align: 'center'\r\n            })\r\n          }\r\n        })\r\n        return ary.concat(temp);\r\n      },\r\n    },\r\n    watch: {\r\n      'formData.activeAttr': {\r\n        handler(newval) {\r\n          newval.forEach(attrid => {\r\n            if (!(attrid in this.speclist)) {\r\n              this.$set(this.speclist, attrid, [])\r\n            }\r\n          })\r\n          Object.keys(this.speclist).forEach(attrid => {\r\n            if (newval.indexOf(Number(attrid)) == -1 && newval.indexOf(attrid) == -1) {\r\n              this.speclist[attrid] = []\r\n            }\r\n          })\r\n\r\n        },\r\n        deep: true,\r\n      }\r\n    },\r\n    mounted() {\r\n      //获取attrlist,根据attrlist获取speclist。\r\n      this.getAttrList()\r\n      this.getItemSwiperList()\r\n    },\r\n    methods: {\r\n      //添加商品属性\r\n      handleAddAttr() {\r\n        this.$http.post(this.$api.itemattr_add, { cateid: this.cateid, attrname: this.newAttrname }).then(res => {\r\n          return this.getAttrList()\r\n        }).then(() => {\r\n          this.newAttrname = ''\r\n        })\r\n      },\r\n      handleTaglist(list) {\r\n        this.tagList = list;\r\n      },\r\n      getItemSwiperList() {\r\n        this.$http.post(this.$api.itempicture_list, { itemid: this.itemid }).then(res => {\r\n          if (res.data.result === '1') {\r\n            this.swiperList = res.data.data\r\n          } else {\r\n            Promise.reject(res.data.msg)\r\n          }\r\n        }).catch(error => { this.$Message.error(error) })\r\n      },\r\n\r\n\r\n      //处理删除图片\r\n      handleDelPic(picid) {\r\n        this.$http.post(this.$api.itempicture_del, { itemid: this.itemid, picid }).then(res => {\r\n          return this.getItemSwiperList()\r\n        }).then(() => {\r\n          this.$Message.success('删除成功')\r\n        }).catch(erro => {\r\n          this.$Message.error(erro)\r\n        })\r\n      },\r\n\r\n      //处理增加图片\r\n      handleAddPic(picurl) {\r\n        this.$http.post(this.$api.itempicture_add, { itemid: this.itemid, picurl }).then(res => {\r\n          return this.getItemSwiperList()\r\n        }).then(() => {\r\n          this.$Message.success('添加成功')\r\n        }).catch(erro => {\r\n          this.$Message.error(erro)\r\n        })\r\n      },\r\n\r\n      //更换图片\r\n      handleChangePic(data) {\r\n        this.$http.post(this.$api.itempicture_edit, { itemid: this.itemid, picid: data.id, picurl: data.picurl }).then(res => {\r\n          return this.getItemSwiperList()\r\n        }).then(() => {\r\n          this.$Message.success('更换成功')\r\n        }).catch(erro => {\r\n          this.$Message.error(erro)\r\n        })\r\n      },\r\n\r\n      //点击单个spec的事件handler\r\n      handleActive(e, attrid) {\r\n        if (attrid in this.speclist) {\r\n          this.speclist[attrid] = e\r\n        }\r\n\r\n      },\r\n      //sku组合算法\r\n      skuFormat(src) {\r\n        let ary = Object.keys(src)\r\n        let len = ary.length\r\n        let res = []\r\n\r\n        function dg(attr, arr, origin) {\r\n          let res = [];\r\n          for (let spec of arr) {\r\n            if (origin.length) {\r\n              for (let val of origin) {\r\n                let dc = JSON.parse(JSON.stringify(val));\r\n                dc[attr] = spec;\r\n                res.push(dc);\r\n              }\r\n            } else {\r\n              let dc = {};\r\n              dc[attr] = spec;\r\n              res.push(dc);\r\n            }\r\n          }\r\n\r\n          return res;\r\n        }\r\n        ary.forEach(attr => {\r\n          res = dg(attr, src[attr], res)\r\n        })\r\n        return res\r\n      },\r\n\r\n      handleDelChosed(attrid) {\r\n        let data = this.formData.activeAttr\r\n        data.splice(data.indexOf(attrid), 1)\r\n      },\r\n\r\n      handleImgChange() {\r\n\r\n      },\r\n\r\n      validateSku(data) {\r\n        let isValidate = data.every(it => {\r\n          return (it.price !== '' && !isNaN(it.price)) && (it.quantity !== '' && !isNaN(it.quantity))\r\n        })\r\n        return isValidate ? Promise.resolve(true) : Promise.reject(false)\r\n      },\r\n\r\n      transferSku(data) {\r\n        let res = [];\r\n        let esc = ['price', 'quantity', 'priceError', 'quantityError']\r\n        if (!data) {\r\n          return []\r\n        } else {\r\n          data.forEach(it => {\r\n            let temp = {};\r\n            let value = {};\r\n            temp.price = it.price;\r\n            temp.quantity = it.quantity;\r\n            Object.keys(it).forEach(key => {\r\n              if (esc.indexOf(key) == -1) {\r\n                value[key] = it[key]\r\n              }\r\n            })\r\n            temp.attrvalue = JSON.stringify(value);\r\n            temp.itemid = this.itemid;\r\n            res.push(temp)\r\n          })\r\n\r\n          return res\r\n        }\r\n      },\r\n\r\n      postSkuAdd(params) {\r\n        this.$http.post(this.$api.itemsku_add, params).then(res => {\r\n\r\n        })\r\n      },\r\n\r\n      handleSubmit() {\r\n        let data = this.skuData\r\n        let thePromise = Promise.resolve(true)\r\n        if(this.tags.length) {\r\n          let tagids = this.tags.join(',')\r\n          let itemid = this.itemid\r\n          thePromise = this.$http.post(this.$api.itemtag_add,{itemid,tagids}).then(res=>{\r\n            console.log(res.data)\r\n          })\r\n        }\r\n        if (!data.length) {\r\n          return this.confirm('您还没有选择商品的规格和创建sku库存价格，确定要忽略商品规格吗？', '提醒').then(() => {\r\n            this.$router.push('/item/edit?id=' + this.itemid)\r\n          }).catch(error => {})\r\n        } else {\r\n          return this.validateSku(data).then(res => {\r\n            return Promise.all(this.transferSku(data).map(sku => {\r\n              return this.postSkuAdd(sku)\r\n            })).then(result => {\r\n              this.$Message.success('保存成功！')\r\n              thePromise.then(()=>{\r\n                this.$router.push('/item/edit?id=' + this.itemid)\r\n              })\r\n            }).catch(error => {\r\n\r\n            })\r\n          }).catch(erro => {\r\n            this.$Message.error('价格或数量格式错误！')\r\n            this.errorTips = '价格或数量格式错误！'\r\n            setTimeout(() => {\r\n              this.errorTips = ''\r\n            }, 1000)\r\n          })\r\n        }\r\n      },\r\n\r\n      handleReset() {\r\n\r\n      },\r\n\r\n      getAttrList() {\r\n        return this.$http.post(this.$api.itemattr_list, { cateid: this.cateid }).then(res => {\r\n          let data = this.renderAttr(res.data.data);\r\n          this.attrList = data;\r\n        })\r\n      },\r\n\r\n      handleSelectChange(val) {\r\n        let self = this\r\n        if (val.length > 3) {\r\n          this.maxSelect = '选择的规格不能超过3个'\r\n          setTimeout(() => {\r\n            self.maxSelect = ''\r\n          }, 2000)\r\n          val.pop()\r\n        }\r\n      },\r\n\r\n      confirm(text, title) {\r\n        let that = this\r\n        return new Promise((resolve, reject) => {\r\n          that.$Modal.confirm({\r\n            title: title ? title : '确认',\r\n            content: text,\r\n            onOk: () => {\r\n              return resolve(true)\r\n            },\r\n            onCancel: () => {\r\n              return reject(false)\r\n            }\r\n          })\r\n        })\r\n      },\r\n\r\n      renderAttr(data) {\r\n        return data.map(attr => {\r\n          return { attrid: attr.id, attrname: attr.attrname };\r\n        })\r\n      }\r\n\r\n    },\r\n    components: {\r\n      'spec-add': specAdd,\r\n      'swiper-uploader': swiperUploader,\r\n      'item-tags':itemTags,\r\n    }\r\n  }\r\n\r\n</script>\r\n<style scoped>\r\n  .spec-add {\r\n    width: 100%;\r\n    border: 1px solid #999;\r\n    border-radius: 5px;\r\n    padding: 16px 10px;\r\n    box-sizing: border-box;\r\n    min-height: 70px;\r\n  }\r\n\r\n  .chosed-attr {\r\n    cursor: pointer;\r\n    display: inline-block;\r\n    min-width: 60px;\r\n    font-size: 12px;\r\n    height: 36px;\r\n    line-height: 36px;\r\n    text-align: center;\r\n    box-sizing: border-box;\r\n    border: 1px solid #f0f1f4;\r\n    padding: 0 5px;\r\n    border-radius: 5px;\r\n    position: relative;\r\n  }\r\n\r\n  .chosed-attr:hover {\r\n    color: #ccc;\r\n  }\r\n\r\n  .chosed-attr::after {\r\n    content: ' ';\r\n    position: absolute;\r\n    right: -16px;\r\n    top: 10px;\r\n    width: 0;\r\n    height: 0;\r\n    border: 6px solid transparent;\r\n    border-left: 6px solid #333;\r\n  }\r\n\r\n  .close-attr {\r\n    display: none;\r\n  }\r\n\r\n  .chosed-attr:hover .close-attr {\r\n    display: block;\r\n    position: absolute;\r\n    right: -5px;\r\n    top: -5px;\r\n    width: 15px;\r\n    height: 15px;\r\n    border: 1px solid;\r\n    border-radius: 50%;\r\n    color: #3bc0c3;\r\n    cursor: pointer;\r\n    background-color: #fff;\r\n  }\r\n\r\n  .attrs-item {\r\n    margin: 10px 0;\r\n  }\r\n\r\n</style>\r\n<style>\r\n  .sku-table-header {\r\n    width: 100%;\r\n    display: flex;\r\n  }\r\n\r\n  .sku-header-title {\r\n    width: 50px;\r\n    text-align: center;\r\n    /*background-color: pink;*/\r\n  }\r\n\r\n  .error-hint {\r\n    color: red;\r\n  }\r\n\r\n  .iserror .ivu-input {\r\n    border: 1px solid red;\r\n  }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/sku/sku-add.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Form',{ref:\"skuForm\",attrs:{\"label-position\":\"left\",\"label-width\":100,\"model\":_vm.formData}},[_c('FormItem',{attrs:{\"label\":\"商品轮播图\"}},[_c('div',[_c('swiper-uploader',{attrs:{\"images\":_vm.swiperList},on:{\"on-del\":_vm.handleDelPic,\"on-add\":_vm.handleAddPic,\"on-change\":_vm.handleChangePic}})],1)]),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"商品规格\",\"prop\":\"activeAttr\",\"error\":_vm.maxSelect}},[_c('Row',[_c('Col',{attrs:{\"span\":15}},[_c('Select',{attrs:{\"multiple\":\"\",\"size\":\"large\",\"filterable\":\"\",\"placement\":\"top\"},on:{\"on-change\":_vm.handleSelectChange},model:{value:(_vm.formData.activeAttr),callback:function ($$v) {_vm.$set(_vm.formData, \"activeAttr\", $$v)},expression:\"formData.activeAttr\"}},[_vm._l((_vm.attrList),function(item){return _c('Option',{key:item.attrid,attrs:{\"value\":item.attrid}},[_vm._v(_vm._s(item.attrname))])}),_vm._v(\" \"),_c('Input',{staticStyle:{\"width\":\"50%\",\"margin\":\"10px auto\"},model:{value:(_vm.newAttrname),callback:function ($$v) {_vm.newAttrname=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"newAttrname\"}},[_c('span',{attrs:{\"slot\":\"append\"},slot:\"append\"},[_c('span',{staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":_vm.handleAddAttr}},[_vm._v(\"新增\")])])])],2)],1)],1)],1),_vm._v(\" \"),_vm._l((_vm.chosedAttr),function(item){return _c('FormItem',{key:item.attrid},[_c('div',{staticClass:\"attrs-item\"},[_c('Row',{attrs:{\"type\":\"flex\",\"justify\":\"center\",\"align\":\"middle\"}},[_c('Col',{attrs:{\"span\":4}},[_c('span',{staticClass:\"chosed-attr\"},[_vm._v(_vm._s(item.attrname)+\" \"),_c('Icon',{staticClass:\"close-attr\",attrs:{\"type\":\"close\"},nativeOn:{\"click\":function($event){_vm.handleDelChosed(item.attrid)}}})],1)]),_vm._v(\" \"),_c('Col',{attrs:{\"span\":20}},[_c('spec-add',{staticClass:\"spec-add\",attrs:{\"attrid\":item.attrid},on:{\"active-change\":function($event){_vm.handleActive($event,item.attrid)}}})],1)],1)],1)])}),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"商品标签\"}},[_c('Select',{staticStyle:{\"width\":\"400px\"},attrs:{\"placeholder\":\"请选择商品标签\",\"size\":\"large\",\"transfer\":\"\",\"multiple\":\"\"},model:{value:(_vm.tags),callback:function ($$v) {_vm.tags=$$v},expression:\"tags\"}},[_vm._l((_vm.tagList),function(tag){return _c('Option',{key:tag.id,attrs:{\"value\":tag.id}},[_vm._v(_vm._s(tag.name))])}),_vm._v(\" \"),(!_vm.tagList.length)?_c('div',{staticStyle:{\"text-align\":\"center\",\"color\":\"#999\"}},[_vm._v(\"暂无商品标签\")]):_vm._e()],2),_vm._v(\" \"),_c('item-tags',{staticStyle:{\"display\":\"inline-block\"},on:{\"list-change\":_vm.handleTaglist}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"规格价格\",\"error\":_vm.errorTips}},[_c('Table',{attrs:{\"border\":\"\",\"columns\":_vm.tableColumns,\"data\":_vm.skuData}})],1),_vm._v(\" \"),_c('FormItem',[_c('Button',{staticStyle:{\"width\":\"120px\"},attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":function($event){_vm.handleSubmit('skuForm')}}},[_vm._v(\"下一步\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"8px\",\"width\":\"80px\"},attrs:{\"type\":\"ghost\",\"size\":\"large\"},on:{\"click\":function($event){_vm.handleReset('skuForm')}}},[_vm._v(\"取消\")])],1)],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-56afe6b8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/sku/sku-add.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-56afe6b8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./sku-add.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-56afe6b8\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./sku-add.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./sku-add.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./sku-add.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-56afe6b8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./sku-add.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-56afe6b8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/sku/sku-add.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <Form ref=\"formValidate\" :model=\"item\" :rules=\"ruleValidate\" label-position=\"left\" :label-width=\"130\">\r\n      <FormItem label=\"商品名称\" prop=\"title\">\r\n        <Input v-model=\"item.title\" placeholder=\"请输入商品名称\" size=\"large\"></Input>\r\n      </FormItem>\r\n      <FormItem label=\"商品类型\" prop=\"itemtype\">\r\n        <RadioGroup v-model=\"item.itemtype\">\r\n          <Radio :label=\"1\">产品</Radio>\r\n          <!--<Radio :label=\"2\" style='margin-left:20px;'>服务</Radio>-->\r\n        </RadioGroup>\r\n      </FormItem>\r\n      <FormItem label=\"商品分类\" prop=\"cateid\">\r\n        <Row>\r\n          <Col :span='18'>\r\n          <Select v-model=\"item.cateid\" size=\"large\" placeholder=\"请选择商品分类\">\r\n            <Option v-for=\"cate in categoryList\" :value=\"cate.id\" :key=\"cate.id\">{{ cate.catename }}</Option>\r\n          </Select>\r\n          </Col>\r\n          <Col :span='6' style='text-align:center'>\r\n         <!--  <span class=\"go-edit\" title=\"添加/修改商品的分类\">编辑分类</span> -->\r\n        </Col>\r\n        </Row>\r\n      </FormItem>\r\n      <FormItem label=\"市场价格\" prop=\"marketprice\">\r\n        <InputNumber v-model=\"item.marketprice\"  size=\"large\" :min=\"0\"></InputNumber>\r\n      </FormItem>\r\n      <FormItem label=\"出售价格\" prop=\"price\">\r\n        <InputNumber v-model=\"item.price\"  size=\"large\" :min=\"0\"></InputNumber>\r\n        <span style='color:#ccc;margin-left:20px;'>此价格为普通商品价格，活动价请移步营销活动设置</span>\r\n      </FormItem>\r\n      <!--<FormItem label=\"VIP价格\" prop=\"vipprice\">\r\n        <InputNumber v-model=\"item.vipprice\"  size=\"large\" :min=\"0\"></InputNumber>\r\n      </FormItem>-->\r\n      <FormItem label=\"库存数量\" prop=\"num\">\r\n        <InputNumber v-model=\"item.num\"  size=\"large\" :min=\"0\" :step=\"1\"></InputNumber>\r\n      </FormItem>\r\n      <FormItem label=\"商品主图\" prop=\"picurl\">\r\n        <!-- <single-uploader :image='item.picurl' @change='handleImgChange'></single-uploader> -->\r\n        <Upload :before-upload=\"handleUpload\"  action=\"//jsonplaceholder.typicode.com/posts/\" >\r\n        <Button icon=\"ios-cloud-upload-outline\" >点击上传</Button>\r\n        </Upload>\r\n      </FormItem>\r\n      <FormItem label=\"上架商品\" prop=\"ishidden\">\r\n        <i-Switch size=\"large\" v-model=\"item.ishidden\" :true-value='0' :false-value='1'>\r\n          <span slot=\"open\">上架</span>\r\n          <span slot=\"close\">下架</span>\r\n        </i-Switch>\r\n      </FormItem>\r\n      <FormItem label=\"首页推荐\" prop=\"isrecommend\">\r\n        <i-Switch size=\"large\" v-model=\"item.isrecommend\" :true-value='1' :false-value='0'>\r\n          <span slot=\"open\">是</span>\r\n          <span slot=\"close\">否</span>\r\n        </i-Switch>\r\n      </FormItem>\r\n      <FormItem label=\"商品详情\" prop=\"description\">\r\n        <vue-editor :content='item.description' @change=\"contentChange\"></vue-editor>\r\n      </FormItem>\r\n      <FormItem>\r\n        <Button type=\"primary\" @click=\"handleSubmit('formValidate')\" size=\"large\" style=\"width:120px\">下一步</Button>\r\n        <Button type=\"ghost\" @click=\"handleReset('formValidate')\" size=\"large\" style=\"margin-left: 8px;width:80px\">取消</Button>\r\n      </FormItem>\r\n    </Form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport singleImgUploader from '../common/SingleImgUploader.vue'\r\nexport default {\r\n  data() {\r\n    return {\r\n      item: {\r\n        title: '',\r\n        cateid: '',\r\n        itemtype: 1,\r\n        itemmodel:1,\r\n        marketprice: 0,\r\n        price: 0,\r\n        /*vipprice:0,*/\r\n        num: 0,\r\n        picurl: '',\r\n        description: '',\r\n        isrecommend: 0,\r\n        ishidden: 0,\r\n      },\r\n      ruleValidate: {\r\n        title: [{ required: true, message: '标题名称不能为空！', trigger: 'blur' }],\r\n        // cateid: [{ type: 'number',required: true, message: '请选择商品分类', trigger: 'change' }],\r\n        itemtype: [{ type: 'number', required: true, message: '请选择商品类型', trigger: 'blur' }],\r\n        description: [{ required: true, message: '请输入商品介绍', trigger: 'blur' }],\r\n        // picurl: [{ required: true, message: '请上传一张商品图片', trigger: 'blur' }],\r\n      },\r\n      categoryList: [],\r\n    }\r\n  },\r\n  components: {\r\n    'single-uploader': singleImgUploader,\r\n  },\r\n  mounted() {\r\n    this.getCategoryList();\r\n  },\r\n  methods: {\r\n    handleSubmit(name) {\r\n      this.$refs[name].validate((valid) => {\r\n        if (valid) {\r\n          return this.addBaseInfo(this.item)\r\n        } else {\r\n          this.$Message.error('请输入完整再提交！');\r\n        }\r\n      })\r\n    },\r\n    addBaseInfo(params) {\r\n      return this.$http.post(this.$api.item_add, Object.assign({},params,{signescape:['description']})).then(res1 => {\r\n        if(res1.data.result=='1') {\r\n          this.$Message.success('添加成功')\r\n          this.$router.push('/item/list')\r\n        }\r\n      })\r\n    },\r\n    getItemDetail(id) {\r\n      return this.$http.post(this.$api.item_detail, { itemid: id })\r\n    },\r\n    handleReset(name) {\r\n      this.$router.push('/item/list')\r\n    },\r\n    contentChange(content) {\r\n      this.item.description = content\r\n    },\r\n    getCategoryList() {\r\n      let that = this;\r\n      let params = { parentid: 0,pageindex: 0,pagesize: 10, };\r\n      this.$http.post(this.$api.category_list, params).then((res) => {\r\n        that.categoryList = res.data.data?res.data.data:[];\r\n      }).catch(error=>{\r\n        this.$Message.error('error')\r\n      });\r\n    },\r\n     handleUpload (file) {\r\n       console.log(\"file\",file)\r\n                this.file = file;\r\n                this.item.picurl = file.url\r\n            console.log(\"this.item.picurl\",this.item.picurl)\r\n                \r\n      },\r\n    handleImgChange(img) {\r\n      console.log(\"11111111\",img)\r\n      this.item.picurl = img.url\r\n      console.log(\"this.item.picurl\",this.item.picurl)\r\n    },\r\n  }\r\n}\r\n\r\n</script>\r\n<style>\r\n\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/item/newItemForm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.item,\"rules\":_vm.ruleValidate,\"label-position\":\"left\",\"label-width\":130}},[_c('FormItem',{attrs:{\"label\":\"商品名称\",\"prop\":\"title\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入商品名称\",\"size\":\"large\"},model:{value:(_vm.item.title),callback:function ($$v) {_vm.$set(_vm.item, \"title\", $$v)},expression:\"item.title\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"商品类型\",\"prop\":\"itemtype\"}},[_c('RadioGroup',{model:{value:(_vm.item.itemtype),callback:function ($$v) {_vm.$set(_vm.item, \"itemtype\", $$v)},expression:\"item.itemtype\"}},[_c('Radio',{attrs:{\"label\":1}},[_vm._v(\"产品\")])],1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"商品分类\",\"prop\":\"cateid\"}},[_c('Row',[_c('Col',{attrs:{\"span\":18}},[_c('Select',{attrs:{\"size\":\"large\",\"placeholder\":\"请选择商品分类\"},model:{value:(_vm.item.cateid),callback:function ($$v) {_vm.$set(_vm.item, \"cateid\", $$v)},expression:\"item.cateid\"}},_vm._l((_vm.categoryList),function(cate){return _c('Option',{key:cate.id,attrs:{\"value\":cate.id}},[_vm._v(_vm._s(cate.catename))])}))],1),_vm._v(\" \"),_c('Col',{staticStyle:{\"text-align\":\"center\"},attrs:{\"span\":6}})],1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"市场价格\",\"prop\":\"marketprice\"}},[_c('InputNumber',{attrs:{\"size\":\"large\",\"min\":0},model:{value:(_vm.item.marketprice),callback:function ($$v) {_vm.$set(_vm.item, \"marketprice\", $$v)},expression:\"item.marketprice\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"出售价格\",\"prop\":\"price\"}},[_c('InputNumber',{attrs:{\"size\":\"large\",\"min\":0},model:{value:(_vm.item.price),callback:function ($$v) {_vm.$set(_vm.item, \"price\", $$v)},expression:\"item.price\"}}),_vm._v(\" \"),_c('span',{staticStyle:{\"color\":\"#ccc\",\"margin-left\":\"20px\"}},[_vm._v(\"此价格为普通商品价格，活动价请移步营销活动设置\")])],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"库存数量\",\"prop\":\"num\"}},[_c('InputNumber',{attrs:{\"size\":\"large\",\"min\":0,\"step\":1},model:{value:(_vm.item.num),callback:function ($$v) {_vm.$set(_vm.item, \"num\", $$v)},expression:\"item.num\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"商品主图\",\"prop\":\"picurl\"}},[_c('Upload',{attrs:{\"before-upload\":_vm.handleUpload,\"action\":\"//jsonplaceholder.typicode.com/posts/\"}},[_c('Button',{attrs:{\"icon\":\"ios-cloud-upload-outline\"}},[_vm._v(\"点击上传\")])],1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"上架商品\",\"prop\":\"ishidden\"}},[_c('i-Switch',{attrs:{\"size\":\"large\",\"true-value\":0,\"false-value\":1},model:{value:(_vm.item.ishidden),callback:function ($$v) {_vm.$set(_vm.item, \"ishidden\", $$v)},expression:\"item.ishidden\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"上架\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"下架\")])])],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"首页推荐\",\"prop\":\"isrecommend\"}},[_c('i-Switch',{attrs:{\"size\":\"large\",\"true-value\":1,\"false-value\":0},model:{value:(_vm.item.isrecommend),callback:function ($$v) {_vm.$set(_vm.item, \"isrecommend\", $$v)},expression:\"item.isrecommend\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"是\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"否\")])])],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"商品详情\",\"prop\":\"description\"}},[_c('vue-editor',{attrs:{\"content\":_vm.item.description},on:{\"change\":_vm.contentChange}})],1),_vm._v(\" \"),_c('FormItem',[_c('Button',{staticStyle:{\"width\":\"120px\"},attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":function($event){_vm.handleSubmit('formValidate')}}},[_vm._v(\"下一步\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"8px\",\"width\":\"80px\"},attrs:{\"type\":\"ghost\",\"size\":\"large\"},on:{\"click\":function($event){_vm.handleReset('formValidate')}}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-63aa2251\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/item/newItemForm.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-63aa2251\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./newItemForm.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./newItemForm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./newItemForm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-63aa2251\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./newItemForm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/item/newItemForm.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div style=\"margin:20px\">\r\n    <Steps :current=\"step\" style='margin-bottom:50px;'>\r\n      <Step title=\"基本信息\" content=\"编辑商品的基本信息\"></Step>\r\n      <Step title=\"更多商品信息\" content=\"添加商品的轮播，标签，规格属性等内容\"></Step>\r\n    </Steps>\r\n    <base-form v-if='step==0' @on-create='handleCreate'></base-form>\r\n    <sku-add :itemid='itemid' v-if='step==1&&itemid&&cateid' :cateid='cateid'></sku-add>\r\n  </div>\r\n</template>\r\n<script>\r\n  import singleImgUploader from '../common/SingleImgUploader.vue'\r\n  import skuAdd from '../sku/sku-add.vue'\r\n  import baseForm from './newItemForm.vue'\r\n  export default {\r\n    data() {\r\n      return {\r\n        showAddSku:true,\r\n        itemid: '',\r\n        cateid:'',\r\n        step: 0,\r\n        itemSku:'',\r\n      }\r\n    },\r\n\r\n    components: {\r\n      'single-uploader': singleImgUploader,\r\n      'sku-add':skuAdd,\r\n      'base-form':baseForm\r\n    },\r\n    mounted() {\r\n      this.$sitemap.prvname = \"商品管理\";\r\n      this.$sitemap.currname = '添加商品';\r\n      this.$menuactive.open = ['ItemBlock'];\r\n      this.$menuactive.active = 'ItemAdd';\r\n    },\r\n    methods: {\r\n      handleCreate(data) {\r\n        this.step = 1;\r\n        this.itemid = data.itemid;\r\n        this.cateid = data.cateid;\r\n      },\r\n    }\r\n  }\r\n\r\n</script>\r\n<style>\r\n  .demo-upload-list {\r\n    display: inline-block;\r\n    width: 60px;\r\n    height: 60px;\r\n    text-align: center;\r\n    line-height: 60px;\r\n    border: 1px solid transparent;\r\n    border-radius: 4px;\r\n    overflow: hidden;\r\n    background: #fff;\r\n    position: relative;\r\n    box-shadow: 0 1px 1px rgba(0, 0, 0, .2);\r\n    margin-right: 4px;\r\n  }\r\n\r\n  .go-edit {\r\n    color: #ccc;\r\n    cursor: pointer;\r\n    border-bottom: 1px solid;\r\n  }\r\n\r\n  .go-edit:hover {\r\n    color: #3bc0c3;\r\n  }\r\n\r\n  .demo-upload-list img {\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n\r\n  .demo-upload-list-cover {\r\n    display: none;\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background: rgba(0, 0, 0, .6);\r\n  }\r\n\r\n  .demo-upload-list:hover .demo-upload-list-cover {\r\n    display: block;\r\n  }\r\n\r\n  .demo-upload-list-cover i {\r\n    color: #fff;\r\n    font-size: 20px;\r\n    cursor: pointer;\r\n    margin: 0 2px;\r\n  }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/item/AddItem.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"margin\":\"20px\"}},[_c('Steps',{staticStyle:{\"margin-bottom\":\"50px\"},attrs:{\"current\":_vm.step}},[_c('Step',{attrs:{\"title\":\"基本信息\",\"content\":\"编辑商品的基本信息\"}}),_vm._v(\" \"),_c('Step',{attrs:{\"title\":\"更多商品信息\",\"content\":\"添加商品的轮播，标签，规格属性等内容\"}})],1),_vm._v(\" \"),(_vm.step==0)?_c('base-form',{on:{\"on-create\":_vm.handleCreate}}):_vm._e(),_vm._v(\" \"),(_vm.step==1&&_vm.itemid&&_vm.cateid)?_c('sku-add',{attrs:{\"itemid\":_vm.itemid,\"cateid\":_vm.cateid}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2d56a714\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/item/AddItem.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2d56a714\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AddItem.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddItem.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AddItem.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2d56a714\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./AddItem.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/item/AddItem.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}