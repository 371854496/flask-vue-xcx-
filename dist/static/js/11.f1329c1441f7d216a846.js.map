{"version":3,"sources":["webpack:///src/components/category/CategoryEdit.vue","webpack:///./src/components/category/CategoryEdit.vue?36cc","webpack:///./src/components/category/CategoryEdit.vue"],"names":["CategoryEdit","url","_this","this","msg","_this2","key","parentid","data","then","cateid","category_CategoryEdit","render","_vm","_h","$createElement","_c","_self","staticStyle","position","padding","directives","name","rawName","value","expression","attrs","fix","staticClass","type","size","_v","ref","model","formData","rules","label-position","label-width","label","prop","disabled","parentData","callback","$$v","$set","placeholder","span","min","color","image","catepic","on","change","handleImgChange","true-value","false-value","slot","width","click","$event","handleEdit","margin-left","handleReset","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.f1329c1441f7d216a846.js","sourcesContent":["<template>\r\n  <div style=\"position:relative;padding:20px;\">\r\n    <Spin fix v-show='loading'>\r\n      <Icon type=\"load-c\" size=18 class=\"demo-spin-icon-load\"></Icon>\r\n      <div>正在获取数据...</div>\r\n    </Spin>\r\n    <Form ref=\"cateDetial\" :model=\"formData\" :rules=\"rules\" label-position=\"left\" :label-width=\"120\">\r\n      <FormItem label=\"父级分类：\" prop='parentid'>\r\n        <Input v-model='parentData.catename' :disabled='true'></Input>\r\n      </FormItem>\r\n      <FormItem label=\"分类名称：\" prop='catename'>\r\n        <Input v-model='formData.catename' placeholder='请输入分类名称'></Input>\r\n      </FormItem>\r\n      <FormItem label=\"显示顺序：\" prop='sortvalue'>\r\n        <Row>\r\n          <Col span='4'>\r\n          <InputNumber v-model='formData.sortvalue' :min='0'></InputNumber>\r\n          </Col>\r\n          <Col span='10'>\r\n          <span style=\"color:silver\">数值越大，在父级分类中的顺序越靠前</span></Col>\r\n        </Row>\r\n      </FormItem>\r\n      <FormItem label=\"分类图片：\" prop='catepic'>\r\n        <single-uploader :image='formData.catepic' @change='handleImgChange'></single-uploader>\r\n      </FormItem>\r\n      <FormItem label=\"首页推荐\" prop=\"isrecommend\">\r\n        <i-Switch size=\"large\" v-model=\"formData.isrecommend\" :true-value='1' :false-value='0'>\r\n          <span slot=\"open\">是</span> <span slot=\"close\">否</span>\r\n        </i-Switch>\r\n      </FormItem>\r\n      <FormItem label=\"是否显示\" prop=\"ishidden\">\r\n        <Row>\r\n          <Col :span='6'>\r\n          <i-Switch size=\"large\" v-model=\"formData.ishidden\" :true-value='0' :false-value='1'>\r\n            <span slot=\"open\">是</span> <span slot=\"close\">否</span>\r\n          </i-Switch>\r\n          </Col>\r\n          <Col :span='18'>\r\n          <span style=\"color:#ccc\">用于控制这个分类在小程序端的显示与否，请慎重选择</span></Col>\r\n        </Row>\r\n      </FormItem>\r\n      <FormItem>\r\n        <Button type=\"primary\" @click=\"handleEdit('cateDetial')\" size=\"large\" style=\"width:100px\">保存</Button>\r\n        <Button type=\"ghost\" @click=\"handleReset\" size=\"large\" style=\"margin-left: 8px;width:80px\">取消</Button>\r\n      </FormItem>\r\n    </Form>\r\n  </div>\r\n</template>\r\n<script>\r\n  import singleImgUploader from '../common/SingleImgUploader.vue'\r\n  export default {\r\n    data() {\r\n      return {\r\n        formData: {\r\n          catename: '',\r\n          catepic: '',\r\n          sortvalue: 0,\r\n          isrecommend: 0,\r\n          parentid: '',\r\n          ishidden: 0,\r\n          id: ''\r\n        },\r\n        rules: {\r\n          catename: {required: true, message: '分类名称不能为空！', trigger: 'blur'},\r\n          catepic: {required: true, message: '分类图片不能为空！', trigger: 'blur'},\r\n        },\r\n        loading: false,\r\n        parentData: {},\r\n      }\r\n    },\r\n    methods: {\r\n      handleImgChange(file) {\r\n        this.formData.catepic = file.url\r\n      },\r\n      handleEdit(name) {\r\n        let that=this;\r\n        this.$refs[name].validate(valid => {\r\n          if (valid) {\r\n            return this.$http.post(this.$api.category_edit, this.formData).then(res => {\r\n              if(res.data.result==1){\r\n                that.$Message.success(\"修改成功\");\r\n                this.$router.push('/category/list')\r\n              }else{\r\n                that.$Message.error(res.data.msg);\r\n              }\r\n            }).catch(erro => {\r\n                that.$Message.error('服务器异常');\r\n            })\r\n          } else {\r\n            this.$Message.error('请检查数据是否填充完整！')\r\n          }\r\n        })\r\n      },\r\n      handleReset() {\r\n        this.$router.push('/category/list')\r\n      },\r\n      getCategoryDetail(id) {\r\n        this.loading = true;\r\n        return this.$http.post(this.$api.category_detail, {cateid: id}).then(res => {\r\n          Object.keys(this.formData).forEach(key => {\r\n            this.formData[key] = res.data.data[key];\r\n          });\r\n          let pid = res.data.data.parentid;\r\n          if (pid == 0) {\r\n            this.parentData = {\r\n              id: 0,\r\n              catename: '根级分类'\r\n            };\r\n          } else {\r\n            this.$http.post(this.$api.category_detail, {cateid: pid}).then(res => {\r\n              this.parentData = res.data.data;\r\n            }).catch(err => {\r\n            });\r\n          }\r\n        }).catch(erro => {\r\n        }).then(() => {\r\n          this.loading = false;\r\n        });\r\n      },\r\n    },\r\n    components: {\r\n      'single-uploader': singleImgUploader\r\n    },\r\n    mounted() {\r\n      this.$sitemap.prvname = \"商品分类\";\r\n      this.$sitemap.currname = '编辑分类';\r\n      this.getCategoryDetail(this.$route.query.cateid)\r\n    },\r\n  }\r\n</script>\r\n<style>\r\n  .edit-parentcate {\r\n    color: #3bc0c3;\r\n    cursor: pointer;\r\n  }\r\n  .edit-parentcate:hover {\r\n    color: #666\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/category/CategoryEdit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"position\":\"relative\",\"padding\":\"20px\"}},[_c('Spin',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],attrs:{\"fix\":\"\"}},[_c('Icon',{staticClass:\"demo-spin-icon-load\",attrs:{\"type\":\"load-c\",\"size\":\"18\"}}),_vm._v(\" \"),_c('div',[_vm._v(\"正在获取数据...\")])],1),_vm._v(\" \"),_c('Form',{ref:\"cateDetial\",attrs:{\"model\":_vm.formData,\"rules\":_vm.rules,\"label-position\":\"left\",\"label-width\":120}},[_c('FormItem',{attrs:{\"label\":\"父级分类：\",\"prop\":\"parentid\"}},[_c('Input',{attrs:{\"disabled\":true},model:{value:(_vm.parentData.catename),callback:function ($$v) {_vm.$set(_vm.parentData, \"catename\", $$v)},expression:\"parentData.catename\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"分类名称：\",\"prop\":\"catename\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入分类名称\"},model:{value:(_vm.formData.catename),callback:function ($$v) {_vm.$set(_vm.formData, \"catename\", $$v)},expression:\"formData.catename\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"显示顺序：\",\"prop\":\"sortvalue\"}},[_c('Row',[_c('Col',{attrs:{\"span\":\"4\"}},[_c('InputNumber',{attrs:{\"min\":0},model:{value:(_vm.formData.sortvalue),callback:function ($$v) {_vm.$set(_vm.formData, \"sortvalue\", $$v)},expression:\"formData.sortvalue\"}})],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":\"10\"}},[_c('span',{staticStyle:{\"color\":\"silver\"}},[_vm._v(\"数值越大，在父级分类中的顺序越靠前\")])])],1)],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"分类图片：\",\"prop\":\"catepic\"}},[_c('single-uploader',{attrs:{\"image\":_vm.formData.catepic},on:{\"change\":_vm.handleImgChange}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"首页推荐\",\"prop\":\"isrecommend\"}},[_c('i-Switch',{attrs:{\"size\":\"large\",\"true-value\":1,\"false-value\":0},model:{value:(_vm.formData.isrecommend),callback:function ($$v) {_vm.$set(_vm.formData, \"isrecommend\", $$v)},expression:\"formData.isrecommend\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"是\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"否\")])])],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"是否显示\",\"prop\":\"ishidden\"}},[_c('Row',[_c('Col',{attrs:{\"span\":6}},[_c('i-Switch',{attrs:{\"size\":\"large\",\"true-value\":0,\"false-value\":1},model:{value:(_vm.formData.ishidden),callback:function ($$v) {_vm.$set(_vm.formData, \"ishidden\", $$v)},expression:\"formData.ishidden\"}},[_c('span',{attrs:{\"slot\":\"open\"},slot:\"open\"},[_vm._v(\"是\")]),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"close\"},slot:\"close\"},[_vm._v(\"否\")])])],1),_vm._v(\" \"),_c('Col',{attrs:{\"span\":18}},[_c('span',{staticStyle:{\"color\":\"#ccc\"}},[_vm._v(\"用于控制这个分类在小程序端的显示与否，请慎重选择\")])])],1)],1),_vm._v(\" \"),_c('FormItem',[_c('Button',{staticStyle:{\"width\":\"100px\"},attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":function($event){_vm.handleEdit('cateDetial')}}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('Button',{staticStyle:{\"margin-left\":\"8px\",\"width\":\"80px\"},attrs:{\"type\":\"ghost\",\"size\":\"large\"},on:{\"click\":_vm.handleReset}},[_vm._v(\"取消\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e7a74cb0\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/category/CategoryEdit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e7a74cb0\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./CategoryEdit.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CategoryEdit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./CategoryEdit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e7a74cb0\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./CategoryEdit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/category/CategoryEdit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}