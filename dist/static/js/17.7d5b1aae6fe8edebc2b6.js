webpackJsonp([17],{"NN+i":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Dd8w"),r=a.n(n),i=a("fZjL"),o=a.n(i),s=function(t){if(t){var e=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();return Date.parse(e)/1e3}return""},l={data:function(){var t=this;return{loading:!1,stateObj:{"-1":"全部",0:"未审核",1:"审核通过",2:"审核不通过"},banktypeObj:{1:"工商",2:"农业",3:"中国",4:"建设"},dateOption:{shortcuts:[{text:"一周",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-6048e5),[e,t]}},{text:"1个月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-2592e6),[e,t]}},{text:"3个月",value:function(){var t=new Date,e=new Date;return e.setTime(e.getTime()-7776e6),[e,t]}}],disabledDate:function(t){return t&&t.valueOf()>Date.now()}},applyForm:{date:[],invitecode:"",keyword:"",state:"-1"},page:{pagesize:10,pageindex:0},tableColumns:[{type:"expand",width:50,render:function(e,a){return e("div",[e("span",{style:{marginRight:"50px"}},"收款人姓名:"+a.row.realname),e("span",{style:{marginRight:"50px"}},"收款人银行:"+t.banktypeObj[a.row.banktype]),e("span",{style:{marginRight:"50px"}},"收款人卡号:"+a.row.bankcard),e("span",{style:{marginRight:"50px"}},a.row.servicecharge?"手续费:"+a.row.servicecharge:"")])}},{title:"#",width:60,align:"center",render:function(e,a){return a.index+t.page.pageindex*t.page.pagesize+1}},{title:"申请编号",key:"turnover",minWidth:180,align:"center"},{title:"申请人",minWidth:140,key:"realname",align:"center"},{title:"申请金额",key:"money",minWidth:100,align:"center"},{title:"申请状态",minWidth:100,align:"center",render:function(e,a){return t.stateObj[a.row.state]}},{title:"申请时间",key:"createtime",minWidth:180,align:"center"},{title:"操作",key:"action",minWidth:220,align:"center",render:function(e,a){var n="";return 0==a.row.state&&(n=e("Button",{props:{type:"primary"},on:{click:function(){t.updateForm={id:a.row.id,state:1},t.showConfirm=!0,t.isConfirm=!1}}},"审核")),e("div",[n,e("Button",{style:{marginLeft:"5px"},on:{click:function(){t.$router.push({path:"/member/detail",query:{id:a.row.memid}})}}},"申请人详情")])}}],tableData:[],totalcount:0,showConfirm:!1,isConfirm:!1,updateForm:{id:"",state:1}}},watch:{page:{handler:function(t){this.getData()},deep:!0}},mounted:function(){this.$sitemap.prvname="资金管理",this.$sitemap.currname="申请提现列表",this.$menuactive.open=["AssetsBlock"],this.$menuactive.active="ApplyReimburse",this.getData()},methods:{handleReset:function(t){this.$refs[t].resetFields()},formatForm:function(){var t={},e=this;return o()(e.applyForm).forEach(function(a){switch(a){case"date":""!==e.applyForm[a][1]&&""!==e.applyForm[a][1]&&(t.starttime=s(e.applyForm[a][0]),t.endtime=s(e.applyForm[a][1])+86400);break;default:t[a]=e.applyForm[a]}}),r()({},e.page,t)},getData:function(){var t=this;return this.$Loading.start(),this.loading=!0,this.$http.post(this.$api.movedeposit_list,this.formatForm()).then(function(e){t.$Loading.finish(),"1"==e.data.result&&e.data.data?(t.tableData=e.data.data,t.totalcount=+e.data.totalcount):t.$Message.error(e.data.msg)}).catch(function(e){t.$Message.error("服务器异常")}).then(function(){t.loading=!1})},indexChange:function(t){this.page.pageindex=t-1},sizeChange:function(t){this.page.pagesize=t},updateRow:function(){var t=this;if(1==t.updateForm.state&&0==t.isConfirm)t.isConfirm=!0;else{var e={};e=1==t.updateForm.state?{id:t.updateForm.id,state:t.updateForm.state}:t.updateForm,t.$http.post(t.$api.movedeposit_audit,e).then(function(e){"1"==e.data.result?(t.$Message.success("更新成功!"),t.getData()):t.$Message.error(e.data.msg)}).catch(function(e){t.$Message.error("服务器异常")}).then(function(){t.showConfirm=!1})}}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"20px"}},[a("div",{staticStyle:{width:"900px"}},[a("Form",{ref:"applyForm",attrs:{"label-width":80,"label-position":"left",model:t.applyForm}},[a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:"申请时间",prop:"date"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",options:t.dateOption,"split-panels":"",placeholder:"选择时间"},model:{value:t.applyForm.date,callback:function(e){t.$set(t.applyForm,"date",e)},expression:"applyForm.date"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"邀请码",prop:"invitecode"}},[a("Input",{attrs:{placeholder:"请输入申请人邀请码"},model:{value:t.applyForm.invitecode,callback:function(e){t.$set(t.applyForm,"invitecode","string"==typeof e?e.trim():e)},expression:"applyForm.invitecode"}})],1)],1)],1),t._v(" "),a("Row",{attrs:{gutter:20}},[a("Col",{attrs:{span:"16"}},[a("FormItem",{attrs:{label:"申请编号",prop:"keyword"}},[a("Input",{attrs:{placeholder:"请输入申请编号"},model:{value:t.applyForm.keyword,callback:function(e){t.$set(t.applyForm,"keyword","string"==typeof e?e.trim():e)},expression:"applyForm.keyword"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"申请状态",prop:"state"}},[a("Select",{attrs:{placeholder:"请选择状态"},model:{value:t.applyForm.state,callback:function(e){t.$set(t.applyForm,"state",e)},expression:"applyForm.state"}},t._l(t.stateObj,function(e,n){return a("Option",{key:n,attrs:{value:n}},[t._v(t._s(e))])}))],1)],1)],1),t._v(" "),a("FormItem",[a("Button",{staticStyle:{width:"100px","margin-right":"20px"},attrs:{type:"primary"},on:{click:t.getData}},[t._v("查询")]),t._v(" "),a("Button",{staticStyle:{width:"100px"},attrs:{type:"ghost"},on:{click:function(e){t.handleReset("applyForm")}}},[t._v("重置")])],1)],1)],1),t._v(" "),a("Table",{staticClass:"main-table",attrs:{loading:t.loading,columns:t.tableColumns,data:t.tableData,border:""}}),t._v(" "),a("div",{staticStyle:{"margin-top":"15px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.totalcount,"page-size":t.applyForm.pagesize,"page-size-opts":[10,20,30,40],"show-elevator":"","show-sizer":"",placement:"top","show-total":""},on:{"on-change":t.indexChange,"on-page-size-change":t.sizeChange}})],1)]),t._v(" "),a("Modal",{attrs:{title:"确认提示",width:"500"},model:{value:t.showConfirm,callback:function(e){t.showConfirm=e},expression:"showConfirm"}},[t.isConfirm?a("div",[t._v("\n        请确认已经将款项打入对方账号成功，再点击确定！\n    ")]):a("div",[a("Form",{attrs:{"label-position":"left","label-width":80}},[a("FormItem",{attrs:{label:"审核结果",prop:"date"}},[a("Select",{attrs:{placeholder:"请选择状态"},model:{value:t.updateForm.state,callback:function(e){t.$set(t.updateForm,"state",e)},expression:"updateForm.state"}},[a("Option",{attrs:{value:1}},[t._v("通过")]),t._v(" "),a("Option",{attrs:{value:2}},[t._v("不通过")])],1)],1)],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(e){t.showConfirm=!1}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.updateRow}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var d=a("VU/8")(l,p,!1,function(t){a("pRdz")},"data-v-7c6242e2",null);e.default=d.exports},pRdz:function(t,e){}});
//# sourceMappingURL=17.7d5b1aae6fe8edebc2b6.js.map