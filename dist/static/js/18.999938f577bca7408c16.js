webpackJsonp([18],{VZtu:function(e,t){},kbZC:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("Dd8w"),n=i.n(a),r=i("fZjL"),s=i.n(r),o={data:function(){var e=this;return{loading:!1,pageindex:0,pagesize:10,page:{isvip:-1,date:["",""],nickname:""},totalcount:0,columns4:[{title:"#",width:60,align:"center",render:function(t,i){return i.index+e.pageindex*e.pagesize+1}},{title:"头像",width:100,align:"center",render:function(e,t){return t.row.avatarurl?e("img",{attrs:{src:t.row.avatarurl,style:"width: 70px;height: 70px;border-radius: 5px;vertical-align: middle;margin:5px 0;"}}):e("div",{attrs:{style:"width: 70px;height: 70px;border:1px solid #666;margin:5px 0;vertical-align: middle;display:inline-block"}})}},{title:"昵称",key:"nickname",align:"center",minWidth:100},{title:"性别",key:"gender",align:"center",width:80,render:function(e,t){var i="未知";switch(t.row.gender){case"1":i="男";break;case"2":i="女"}return e("span",i)}},{title:"购物钱包",align:"center",key:"storecode",minWidth:100},{title:"奖金钱包",align:"center",key:"storename",minWidth:100},{title:"积分",align:"center",key:"storecode",minWidth:100},{title:"是否是VIP",key:"isvip",align:"center",minWidth:120,render:function(e,t){return 1==t.row.isvip?"是":"否"}},{title:"登录日期",key:"updatetime",width:180,align:"center"},{title:"操作",key:"action",width:100,align:"center",render:function(t,i){var a=t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.$router.push({path:"/member/detail",query:{id:i.row.id}})}}},"查看详情"),n="";return null===i.row.parentid&&(n=t("Button",{props:{size:"small"},style:{marginTop:"5px"},on:{click:function(){e.showBol=!0,e.memid=i.row.id,e.telnumber="",e.memberInfo={id:null,nickname:"",realname:""}}}},"绑定上级")),t("div",[a,n])}}],memberdata:[],showBol:!1,telnumber:"",memberInfo:{id:null,nickname:"",realname:""},spinShow:!1}},mounted:function(){this.$sitemap.prvname="用户管理",this.$sitemap.currname="用户列表",this.$menuactive.open=["MemberBlock"],this.$menuactive.active="MemberList",this.getMembers()},activated:function(){},methods:{formatGetForm:function(){var e=this,t={};return s()(this.page).forEach(function(i){switch(i){case"date":e.page.date[0]&&e.page.date[1]&&(t.begin=Date.parse(e.page.date[0])/1e3,t.end=Date.parse(e.page.date[1])/1e3);break;default:(e.page[i]||""+e.page[i]=="0")&&(t[i]=e.page[i])}}),n()({},t,{pageindex:this.pageindex,pagesize:this.pagesize})},getMembers:function(){var e=this;this.loading=!0,this.$http.post(this.$api.member_list,this.formatGetForm()).then(function(t){"1"==t.data.result&&t.data.data?(e.memberdata=t.data.data,e.totalcount=+t.data.totalcount):e.$Message.error(t.data.msg)}).catch(function(t){e.$Message.error("服务器异常")}).then(function(){e.loading=!1})},indexChange:function(e){this.pageindex=e-1,this.getMembers()},sizeChange:function(e){this.pagesize=e,this.getMembers()},lookMember:function(){var e=this;this.spinShow=!0,this.$http.post(this.$api.member_tempget,{telnumber:this.telnumber}).then(function(t){t.data.result?e.memberInfo=t.data.data||{id:""}:e.$Message.error(t.data.msg)}).catch(function(t){e.$Message.error("服务器异常")}).then(function(t){e.spinShow=!1})},submitConfirm:function(){var e=this;if(this.memberInfo.id){var t={memid:this.memid,parentid:this.memberInfo.id};this.$http.post(this.$api.member_setparentid,t).then(function(t){"100000"==t.data.code?(e.$Message.success("绑定成功！"),e.getMembers()):e.$Message.error(t.data.msg)}).catch(function(t){e.$Message.error("服务器异常")}).then(function(t){e.showBol=!1})}else this.$Message.warning("请先查询手机号")}}},l={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clear-fix",staticStyle:{overflow:"auto",padding:"20px"}},[i("div",{staticStyle:{"margin-bottom":"15px",display:"flex","justify-content":"flex-end"}},[i("div",{staticClass:"select-wrapper"},[i("DatePicker",{staticStyle:{width:"350px"},attrs:{type:"datetimerange",placement:"bottom-end","split-panels":"",placeholder:"请选择用户登录时间范围"},model:{value:e.page.date,callback:function(t){e.$set(e.page,"date",t)},expression:"page.date"}})],1),e._v(" "),i("div",{staticClass:"select-wrapper"},[i("Select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择用户类型"},model:{value:e.page.isvip,callback:function(t){e.$set(e.page,"isvip",t)},expression:"page.isvip"}},[i("Option",{attrs:{value:-1}},[e._v("全部")]),e._v(" "),i("Option",{attrs:{value:0}},[e._v("非会员")]),e._v(" "),i("Option",{attrs:{value:1}},[e._v("会员")])],1)],1),e._v(" "),i("div",{staticClass:"select-wrapper"},[i("Button",{attrs:{type:"ghost"},on:{click:e.getMembers}},[e._v("查询")])],1)]),e._v(" "),i("Table",{attrs:{loading:e.loading,border:"",columns:e.columns4,data:e.memberdata}}),e._v(" "),i("div",{staticStyle:{"margin-top":"15px",overflow:"hidden"}},[i("div",{staticStyle:{float:"left"}}),e._v(" "),i("div",{staticStyle:{float:"right"}},[i("Page",{attrs:{total:e.totalcount,"page-size":e.pagesize,"page-size-opts":[10,20,30,40],"show-elevator":"","show-sizer":"",placement:"top","show-total":""},on:{"on-change":e.indexChange,"on-page-size-change":e.sizeChange}})],1)]),e._v(" "),i("Modal",{attrs:{title:"绑定关系"},model:{value:e.showBol,callback:function(t){e.showBol=t},expression:"showBol"}},[i("div",[i("div",[i("Input",{attrs:{placeholder:"输入上级的手机号",icon:"ios-search"},on:{"on-click":e.lookMember},model:{value:e.telnumber,callback:function(t){e.telnumber="string"==typeof t?t.trim():t},expression:"telnumber"}})],1),e._v(" "),i("div",{staticStyle:{"font-size":"16px",margin:"20px 0 0 10px",position:"relative"}},[e.spinShow?i("Spin",{attrs:{size:"large",fix:""}}):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!!e.memberInfo.id,expression:"!!memberInfo.id"}]},[i("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.memberInfo.avatarurl}}),e._v(" "),i("div",[i("div",[i("span",[e._v("姓名：")]),e._v(" "),i("span",[e._v(e._s(e.memberInfo.realname))])]),e._v(" "),i("div",[i("span",[e._v("昵称：")]),e._v(" "),i("span",[e._v(e._s(e.memberInfo.nickname))])])])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:""===e.memberInfo.id,expression:"memberInfo.id===''"}]},[e._v("暂无此用户")])],1)]),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{on:{click:function(t){e.showBol=!1}}},[e._v("取消")]),e._v(" "),i("Button",{attrs:{type:"primary"},on:{click:e.submitConfirm}},[e._v("提交")])],1)])],1)},staticRenderFns:[]};var d=i("VU/8")(o,l,!1,function(e){i("VZtu")},"data-v-78fdbd48",null);t.default=d.exports}});
//# sourceMappingURL=18.999938f577bca7408c16.js.map