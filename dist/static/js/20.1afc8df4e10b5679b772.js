webpackJsonp([20],{qXUD:function(e,t){},ryfP:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("fZjL"),l=a.n(s),i={data:function(){return{sales:{itemmodel:"2",itemid:"",price:0,ishidden:0,date:[new Date,new Date]},originalNum:0,rules:{itemid:[{validator:function(e,t,a){""===t&&a(new Error("请选择商品")),a()},trigger:"blur"}],price:[{validator:function(e,t,a){""!==t&&null!==t||a(new Error("请输入金额")),a()},trigger:"blur"}],date:[{validator:function(e,t,a){""===t[0]||""===t[1]?a(new Error("请选择日期")):a()},trigger:"blur"}]}}},mounted:function(){this.$sitemap.prvname="营销活动",this.$sitemap.currname="新建秒杀商品"},methods:{handleSelect:function(e){this.sales.price=e.price,this.originalNum=e.num},formatData:function(){var e={},t=this;return l()(t.sales).forEach(function(a){switch(a){case"date":e.seckillbegin=Date.parse(t.sales[a][0])/1e3,e.seckillend=Date.parse(t.sales[a][1])/1e3;break;default:e[a]=t.sales[a]}}),e},handleSave:function(e){var t=this,a=this;a.$refs[e].validate(function(e){e?t.$http.post(t.$api.item_editmodel,a.formatData()).then(function(e){1==e.data.result?(a.$Message.success("添加成功"),a.$router.push("/seckilling/list")):a.$Message.error(e.data.msg)}).catch(function(e){a.$Message.error("服务器异常")}):a.$Message.error("请核对信息")})},cancel:function(){this.$router.push("/seckilling/list")}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{padding:"20px"}},[a("Form",{ref:"sales",attrs:{model:e.sales,rules:e.rules,"label-position":"left","label-width":120}},[a("FormItem",{attrs:{label:"活动类型"}},[a("Select",{staticClass:"formItem",attrs:{disabled:""},model:{value:e.sales.itemmodel,callback:function(t){e.$set(e.sales,"itemmodel",t)},expression:"sales.itemmodel"}},[a("Option",{attrs:{value:"2"}},[e._v("秒杀商品")])],1)],1),e._v(" "),a("FormItem",{attrs:{label:"活动商品",prop:"itemid"}},[a("item-select",{on:{"on-selected":e.handleSelect},model:{value:e.sales.itemid,callback:function(t){e.$set(e.sales,"itemid",t)},expression:"sales.itemid"}})],1),e._v(" "),a("FormItem",{attrs:{label:"活动价格",prop:"price"}},[a("InputNumber",{staticClass:"formItem",attrs:{placeholder:"请输入活动价格",min:0},model:{value:e.sales.price,callback:function(t){e.$set(e.sales,"price",t)},expression:"sales.price"}}),e._v(" "),a("span",{staticStyle:{color:"#ccc","margin-left":"20px"}},[e._v("此价格为活动价，如果恢复成普通商品,价格也将恢复成出售价格。")])],1),e._v(" "),a("FormItem",{attrs:{label:"活动时间",prop:"date"}},[a("DatePicker",{staticClass:"formItem",attrs:{type:"datetimerange",placement:"bottom-end","split-panels":""},model:{value:e.sales.date,callback:function(t){e.$set(e.sales,"date",t)},expression:"sales.date"}}),e._v(" "),a("span",{staticStyle:{color:"#ccc","margin-left":"20px"}},[e._v("如果时间过期，该商品将直接变成普通商品,请谨慎设置!")])],1),e._v(" "),a("FormItem",{attrs:{label:"原始库存"}},[a("Input",{staticClass:"formItem",attrs:{disabled:""},model:{value:e.originalNum,callback:function(t){e.originalNum=t},expression:"originalNum"}})],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSave("sales")}}},[e._v("\n        保存创建\n      ")]),e._v(" "),a("Button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var n=a("VU/8")(i,r,!1,function(e){a("qXUD")},null,null);t.default=n.exports}});
//# sourceMappingURL=20.1afc8df4e10b5679b772.js.map