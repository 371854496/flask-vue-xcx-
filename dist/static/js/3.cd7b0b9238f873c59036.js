webpackJsonp([3],{"YB/Q":function(t,e,a){"use strict";var i=a("mvHQ"),s=a.n(i),o={data:function(){return{cates:[],cateid:0,keyword:"",totalcount:0,pagesize:6,pageindex:0,items:[],chosedItem:{},timoutBol:!1,spinShow:!1}},created:function(){this.getCategoryList(),this.getItemList()},methods:{handleInput:function(){var t=this;t.timoutBol&&clearTimeout(t.timoutBol),t.timoutBol=setTimeout(function(){t.getItemList()},1e3)},handleCateChange:function(t){this.getItemList()},handleChoseItem:function(t){this.chosedItem=t},getCategoryList:function(){var t=this;this.$http.post(this.$api.category_list,{}).then(function(e){e.data.data&&(t.cates=e.data.data)}).catch(function(t){})},getItemList:function(){var t=this;return this.spinShow=!0,this.$http.post(this.$api.item_list,this.conditions).then(function(e){"1"==e.data.result&&(t.items=e.data.data,t.totalcount=+e.data.totalcount)}).catch(function(){}).then(function(){t.spinShow=!1})},indexChange:function(t){this.pageindex=t-1,this.getItemList()}},watch:{chosedItem:function(t){this.$emit("chosedid-change",t)}},computed:{conditions:function(){return{pageindex:this.pageindex||0,pagesize:this.pagesize,keywords:this.keyword,cateid:this.cateid,ishidden:0}}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"border-bottom":"1px solid silver","padding-bottom":"20px"}},[a("Row",[a("Col",{attrs:{span:12}},[a("span",[t._v("选择分类：")]),t._v(" "),a("Select",{staticStyle:{width:"200px","margin-left":"20px"},attrs:{placeholder:"商品分类",clearable:""},on:{"on-change":t.handleCateChange},model:{value:t.cateid,callback:function(e){t.cateid=e},expression:"cateid"}},[a("Option",{attrs:{value:0}},[t._v("全部")]),t._v(" "),t._l(t.cates,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.catename))])})],2)],1),t._v(" "),a("Col",{attrs:{span:8}},[a("Input",{attrs:{placeholder:"搜索商品名称"},on:{input:t.handleInput},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{position:"relative"}},[a("Spin",{directives:[{name:"show",rawName:"v-show",value:t.spinShow,expression:"spinShow"}],attrs:{size:"large",fix:""}}),t._v(" "),a("div",{staticClass:"swiper-item-list"},[t._l(t.items,function(e){return a("div",{key:e.id,staticClass:"swiper-item-detail",class:{chosed:t.chosedItem.id==e.id},on:{click:function(a){t.handleChoseItem(e)}}},[a("img",{staticClass:"pic",attrs:{src:e.picurl}}),t._v(" "),a("div",{staticClass:"texts"},[a("div",{staticClass:"texts-title"},[t._v(t._s(e.title))]),t._v(" "),a("div",[t._v("价格:￥ "+t._s(e.price))]),t._v(" "),a("div",[t._v("库存："+t._s(e.num))])])])}),t._v(" "),a("div",{staticStyle:{clear:"both"}})],2),t._v(" "),a("div",{staticClass:"swiper-item-page"},[a("Page",{attrs:{total:t.totalcount,"page-size":t.pagesize,"show-total":""},on:{"on-change":t.indexChange}})],1)],1)])},staticRenderFns:[]};var l=a("VU/8")(o,n,!1,function(t){a("m/zG")},null,null).exports,d=a("fZjL"),r=a.n(d),c={data:function(){return{cates:[],timoutBol:!1,total:0,queryForm:{pageindex:0,pagesize:4,cateid:1,keyword:""},articleList:[],chosedItem:{},spinShow:!1}},created:function(){this.getArticleList(),this.getArticleTypes()},watch:{chosedItem:function(t){this.$emit("chosedid-change",t)}},methods:{handleInput:function(){var t=this;t.timoutBol&&clearTimeout(t.timoutBol),t.timoutBol=setTimeout(function(){t.getArticleList()},1e3)},getArticleTypes:function(){var t=this;this.$http.post(this.$api.articletype_list,{pageindex:0,pagesize:100}).then(function(e){e.data.result?t.cates=e.data.data:t.$Message.error(e.data.msg)})},indexChange:function(t){this.queryForm.pageindex=t-1,this.getArticleList()},formatParams:function(){var t=this,e={};return r()(this.queryForm).forEach(function(a){switch(a){case"keyword":""!==t.queryForm[a]&&(e[a]=t.queryForm[a]);break;default:e[a]=t.queryForm[a]}}),e},getArticleList:function(){var t=this,e=this.formatParams();this.spinShow=!0,this.$http.post(this.$api.article_list,e).then(function(e){e.data.result?(t.articleList=e.data.data,t.total=+e.data.totalcount):t.$Message.error(e.data.msg)}).then(function(){t.spinShow=!1})},handleChoseItem:function(t){this.chosedItem=t}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"border-bottom":"1px solid silver","padding-bottom":"20px"}},[a("Row",[a("Col",{attrs:{span:12}},[a("Input",{attrs:{placeholder:"搜索活动标题"},on:{input:t.handleInput},model:{value:t.queryForm.keyword,callback:function(e){t.$set(t.queryForm,"keyword","string"==typeof e?e.trim():e)},expression:"queryForm.keyword"}})],1)],1)],1),t._v(" "),a("div",{staticStyle:{position:"relative"}},[a("Spin",{directives:[{name:"show",rawName:"v-show",value:t.spinShow,expression:"spinShow"}],attrs:{size:"large",fix:""}}),t._v(" "),a("div",{staticClass:"article"},t._l(t.articleList,function(e){return a("div",{key:e.id,staticClass:"article-item",class:{chosed:e.id==t.chosedItem.id},on:{click:function(a){t.handleChoseItem(e)}}},[a("img",{attrs:{src:e.picture}}),t._v(" "),a("div",{domProps:{textContent:t._s(e.title)}})])})),t._v(" "),a("div",{staticClass:"clear-fix"},[a("div",{staticClass:"footer-page"},[a("Page",{attrs:{total:t.total,"show-total":"","page-size":t.queryForm.pagesize},on:{"on-change":t.indexChange}})],1)])],1)])},staticRenderFns:[]};var u=a("VU/8")(c,h,!1,function(t){a("pAE6")},"data-v-a1a87c00",null).exports,p={props:{value:{type:String,default:""}},data:function(){return{showModal:!1,model:{chosedType:"",chosedId:"",chosedName:""},detail:"",hasDetail:{item:!0,category:!0,article:!0,aboutus:!1,sales:!0},typeArr:[{value:"item",label:"商品详情",disabled:!1},{value:"category",label:"商品分类",disabled:!1},{value:"article",label:"活动详情",disabled:!1},{value:"aboutus",label:"公司介绍",disabled:!1},{value:"sales",label:"促销活动",disabled:!0}],cates:[],articletypes:[],temp:""}},computed:{showDetail:function(){return"item"==this.model.chosedType||"article"==this.model.chosedType},showWhich:function(){return"item"==this.model.chosedType?l:u}},created:function(){this.getCategoryList()},watch:{value:function(t){var e=this.value?JSON.parse(this.value):{type:"",id:"",name:""};this.detail=e,this.model.chosedType=e.type,this.model.chosedId=e.id,this.model.chosedName=e.name}},methods:{hanlderType:function(t){t&&!this.hasDetail[t]&&this.$emit("input",s()({type:this.model.chosedType,id:this.model.chosedId,name:this.model.chosedName}))},handleCateChange:function(t){this.model.chosedName=this.cates.find(function(e){return e.id==t}).catename,this.$emit("input",s()({type:this.model.chosedType,id:this.model.chosedId,name:this.model.chosedName}))},handleOk:function(){this.model.chosedId=this.temp.chosedId,this.model.chosedName=this.temp.chosedName,this.$emit("input",s()({type:this.model.chosedType,id:this.model.chosedId,name:this.model.chosedName}))},handleChoseDetail:function(){this.showModal=!0},getCategoryList:function(){var t=this;this.$http.post(this.$api.category_list,{}).then(function(e){e.data.data&&(t.cates=e.data.data)}).catch(function(t){})},getArticleType:function(){},handleChosedId:function(t){this.temp={chosedId:t.id||"",chosedName:t.title||""}}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"swiper-show-value"},[a("Select",{staticStyle:{width:"200px"},attrs:{placeholder:"选择跳转",clearable:""},on:{"on-change":t.hanlderType},model:{value:t.model.chosedType,callback:function(e){t.$set(t.model,"chosedType",e)},expression:"model.chosedType"}},[a("Option",{attrs:{value:""}},[t._v("无")]),t._v(" "),t._l(t.typeArr,function(e){return a("Option",{key:e.value,attrs:{value:e.value,disabled:e.disabled}},[t._v(t._s(e.label))])})],2),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.model.chosedType&&t.hasDetail[t.model.chosedType],expression:"model.chosedType&&hasDetail[model.chosedType]"}]},["category"==t.model.chosedType?a("div",{staticClass:"swiper-detail-items"},[a("span",[t._v("已选择:")]),t._v(" "),a("Select",{staticStyle:{width:"200px","margin-left":"20px"},attrs:{placeholder:"选择具体商品分类"},on:{"on-change":t.handleCateChange},model:{value:t.model.chosedId,callback:function(e){t.$set(t.model,"chosedId",e)},expression:"model.chosedId"}},t._l(t.cates,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.catename))])}))],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showDetail,expression:"showDetail"}],staticClass:"swiper-detail-items"},[a("div",[t._v("已选择："+t._s(t.model.chosedName))]),t._v(" "),a("Button",{staticStyle:{"margin-top":"10px"},attrs:{type:"ghost"},on:{click:t.handleChoseDetail}},[t._v("选择"+t._s("item"==t.model.chosedType?"商品":"活动"))])],1)])],1),t._v(" "),a("Modal",{attrs:{width:"800"},on:{"on-ok":t.handleOk},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{attrs:{slot:"header"},slot:"header"},[t._v("\n      我的"+t._s("item"==t.model.chosedType?"商品":"活动")+"\n    ")]),t._v(" "),t.showDetail&&t.showModal?a("div",[a(t.showWhich,{tag:"component",staticClass:"tab",on:{"chosedid-change":t.handleChosedId}})],1):t._e()])],1)},staticRenderFns:[]};var v=a("VU/8")(p,m,!1,function(t){a("pl5B")},null,null);e.a=v.exports},atCN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("dc86"),s=a("YB/Q"),o={data:function(){return{addData:{title:"",sortvalue:0,linkurl:"",picurl:"",pagesize:10,pageindex:0},rules:{title:[{required:!0,message:"标题名称不能为空！",trigger:"blur"}]},swiperAddress:""}},mounted:function(){this.$sitemap.prvname="轮播管理",this.$sitemap.currname="添加图片"},components:{"single-uploader":i.a,"swiper-address":s.a},methods:{handleInput:function(t){},handleImgChange:function(t){this.addData.picurl=t.url},handleCancel:function(){this.$router.push("/swiper/list")},handleSubmit:function(){var t=this;this.$refs.addForm.validate(function(e){e&&t.$http.post(t.$api.swiper_add,t.addData).then(function(e){t.$router.push("/swiper/list")}).catch(function(t){})})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{padding:"20px"}},[a("div",{staticClass:"main-container"},[a("Form",{ref:"addForm",attrs:{model:t.addData,"label-width":120,"label-position":"left",rules:t.rules}},[a("FormItem",{attrs:{label:"轮播名称："}},[a("span",[t._v("首页")])]),t._v(" "),a("FormItem",{attrs:{label:"图片标题：",prop:"title"}},[a("Input",{attrs:{placeholder:"请输入图片标题"},model:{value:t.addData.title,callback:function(e){t.$set(t.addData,"title",e)},expression:"addData.title"}})],1),t._v(" "),a("FormItem",{attrs:{label:"显示顺序：",prop:"sortvalue"}},[a("Row",[a("Col",{attrs:{span:"6"}},[a("InputNumber",{attrs:{min:0},model:{value:t.addData.sortvalue,callback:function(e){t.$set(t.addData,"sortvalue",e)},expression:"addData.sortvalue"}})],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("span",{staticStyle:{color:"silver"}},[t._v("数值越大，在轮播图的顺序越靠前")])])],1)],1),t._v(" "),a("FormItem",{attrs:{label:"跳转地址：",prop:"linkurl"}},[a("swiper-address",{model:{value:t.addData.linkurl,callback:function(e){t.$set(t.addData,"linkurl",e)},expression:"addData.linkurl"}})],1),t._v(" "),a("FormItem",{attrs:{label:"图片：",prop:"picurl"}},[a("single-uploader",{attrs:{image:t.addData.picurl},on:{change:t.handleImgChange}})],1),t._v(" "),a("FormItem",[a("Button",{staticStyle:{width:"120px",height:"36px","margin-right":"30px"},attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("提交")]),t._v(" "),a("Button",{staticStyle:{width:"80px",height:"36px"},attrs:{type:"ghost"},on:{click:t.handleCancel}},[t._v("取消")])],1)],1)],1)])},staticRenderFns:[]};var l=a("VU/8")(o,n,!1,function(t){a("kJF6")},"data-v-803168b6",null);e.default=l.exports},kJF6:function(t,e){},"m/zG":function(t,e){},pAE6:function(t,e){},pl5B:function(t,e){}});
//# sourceMappingURL=3.cd7b0b9238f873c59036.js.map