webpackJsonp([32],{"1Yqy":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("fZjL"),a=s.n(i),l={data:function(){return{type:!!this.$route.query.type,sales:{itemmodel:4,itemid:"",price:0,ishidden:0},originalNum:0,itemName:"",rules:{itemid:[{validator:function(e,t,s){""===t&&s(new Error("请选择商品")),s()},trigger:"blur"}]}}},mounted:function(){this.$sitemap.prvname="促销商品",this.$sitemap.currname=this.type?"编辑":"新建",this.type&&this.getItem()},methods:{getItem:function(){var e=this,t={itemid:this.$route.query.id};e.$http.post(this.$api.item_detail,t).then(function(t){var s=t.data.data;"1"==t.data.result&&s?e.setItem(s.item):e.$Message.error(t.data.msg)}).catch(function(t){e.$Message.error("服务器异常")})},setItem:function(e){this.sales.itemmodel=e.itemmodel,this.sales.price=e.price,this.sales.itemid=e.id,this.originalNum=e.num,this.itemName=e.title},handleSelect:function(e){this.sales.price=e.price,this.originalNum=e.num},formatData:function(){var e={},t=this;return a()(t.sales).forEach(function(s){e[s]=t.sales[s]}),e},handleSave:function(e){var t=this,s=this;s.$refs[e].validate(function(e){e?t.$http.post(t.$api.item_editmodel,s.formatData()).then(function(e){1==e.data.result?(s.$Message.success("提交成功"),s.$router.push("/salesitem/list")):s.$Message.error(e.data.msg)}).catch(function(e){s.$Message.error("服务器异常")}):s.$Message.error("请核对信息")})},cancel:function(){this.$router.push("/salesitem/list")}}},r={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticStyle:{padding:"20px"}},[s("Form",{ref:"sales",attrs:{model:e.sales,rules:e.rules,"label-position":"left","label-width":120}},[s("FormItem",{attrs:{label:"活动类型",prop:"itemmodel"}},[s("Select",{staticClass:"formItem",attrs:{disabled:e.type},model:{value:e.sales.itemmodel,callback:function(t){e.$set(e.sales,"itemmodel",t)},expression:"sales.itemmodel"}},[s("Option",{attrs:{value:4}},[e._v("套餐商品")]),e._v(" "),s("Option",{attrs:{value:5}},[e._v("精选推荐")])],1)],1),e._v(" "),e.type?s("FormItem",{attrs:{label:"活动商品"}},[s("Input",{staticClass:"formItem",attrs:{disabled:""},model:{value:e.itemName,callback:function(t){e.itemName=t},expression:"itemName"}})],1):s("FormItem",{attrs:{label:"活动商品",prop:"itemid"}},[s("item-select",{attrs:{disabled:""},on:{"on-selected":e.handleSelect},model:{value:e.sales.itemid,callback:function(t){e.$set(e.sales,"itemid",t)},expression:"sales.itemid"}})],1),e._v(" "),s("FormItem",{attrs:{label:"原始库存"}},[s("Input",{staticClass:"formItem",attrs:{disabled:""},model:{value:e.originalNum,callback:function(t){e.originalNum=t},expression:"originalNum"}})],1),e._v(" "),s("FormItem",[e.type?e._e():s("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSave("sales")}}},[e._v("\n        保存创建\n      ")]),e._v(" "),s("Button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var n=s("VU/8")(l,r,!1,function(e){s("ohNe")},null,null);t.default=n.exports},ohNe:function(e,t){}});
//# sourceMappingURL=32.a409d092fcc3ee683284.js.map