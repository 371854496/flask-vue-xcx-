webpackJsonp([33],{"1wti":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("//Fk"),a=i.n(n),s={data:function(){var t=this;return{totalcount:0,page:{pagesize:10,pageindex:0},loading:!1,cateColumns:[{type:"index",width:60,align:"center"},{title:"分类名称",key:"catename",align:"center"},{title:"图片",key:"catepic",width:150,align:"center",render:function(t,e){return t("div",{attrs:{style:"width: 80px;height: 80px;display:inline-block;vertical-align:middle;"}},[t("img",{props:{type:"primary",size:"small"},attrs:{src:e.row.catepic,style:"width: 60px;height: 60px;border-radius: 2px;margin-top:10px;"},style:{}})])}},{title:"首页推荐",key:"isrecommend",width:120,align:"center",render:function(t,e){return t("span",1==e.row.isrecommend?"是":"否")}},{title:"排序",key:"sortvalue",width:100,align:"center"},{title:"操作",key:"action",width:130,align:"center",render:function(e,i){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$router.push("/category/edit?cateid="+i.row.id)}}},"查看"),e("Button",{props:{type:"warning",size:"small"},on:{click:function(){t.confirm("此操作将会永久删除该分类，请确认删除","提醒").then(function(){t.handleDelCate(i.row.id).then(function(){t.getCategoryList()}).catch(function(e){t.$Message.error(e)})}).catch(function(t){})}}},"删除")])}}],cateData:[]}},mounted:function(){this.$sitemap.prvname="商品分类",this.$sitemap.currname="分类列表",this.$menuactive.open=["ItemBlock"],this.$menuactive.active="CategoryList",this.getCategoryList()},methods:{indexChange:function(t){this.page.pageindex=t-1},sizeChange:function(t){this.page.pagesize=t},getCategoryList:function(){var t=this;this.$http.post(this.$api.category_list,this.page).then(function(e){e.data.data&&(t.cateData=e.data.data,t.totalcount=+e.data.totalcount)}).catch(function(t){})},handleCateAdd:function(){this.$router.push("/category/add?parentid=0&&parentname=根级分类")},handleDelCate:function(t){var e=this;return this.$http.post(this.$api.category_del,{cateid:t,pagesize:10,pageindex:0}).then(function(t){if("1"!=t.data.result)return a.a.reject(t.data.msg);e.$Message.success("删除成功")})},confirm:function(t,e){var i=this;return new a.a(function(n,a){i.$Modal.confirm({title:e||"确认",content:t,onOk:function(){return n(!0)},onCancel:function(){return a(!1)}})})}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"clear-fix",staticStyle:{padding:"20px"}},[e("Button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",icon:"ios-plus-empty"},on:{click:this.handleCateAdd}},[this._v("\n    添加分类\n  ")]),this._v(" "),e("Table",{ref:"catelist",staticClass:"main-table",attrs:{loading:this.loading,border:"",columns:this.cateColumns,data:this.cateData}}),this._v(" "),e("div",{staticStyle:{"margin-top":"15px",overflow:"hidden"}},[e("div",{staticStyle:{float:"right"}},[e("Page",{attrs:{total:this.totalcount,"page-size":this.page.pagesize,"page-size-opts":[10,20,30,40],"show-elevator":"","show-sizer":"",placement:"top","show-total":"",current:this.page.pageindex+1},on:{"on-change":this.indexChange,"on-page-size-change":this.sizeChange}})],1)])],1)},staticRenderFns:[]};var o=i("VU/8")(s,r,!1,function(t){i("BkUJ")},null,null);e.default=o.exports},BkUJ:function(t,e){}});
//# sourceMappingURL=33.082e05accb71e8b609a2.js.map