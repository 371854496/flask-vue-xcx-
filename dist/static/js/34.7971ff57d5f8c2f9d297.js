webpackJsonp([34],{"2CKj":function(t,e){},"2UyK":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("//Fk"),a=i.n(n),s={data:function(){var t=this;return{showMulti:!1,loading:!1,totalcount:0,multiSelected:[],multis:{chosed:0,map:["删除订单"]},page:{pagesize:10,pageindex:0,selectCategory:0,selectStatus:0},selectName:"",categoryList:[],itemCategory:[],modelMap:[{key:1,value:"普通"},{key:2,value:"秒杀"},{key:3,value:"积分"},{key:4,value:"套餐"},{key:5,value:"新品"}],showstatus:[{value:-1,label:"全部状态"},{value:0,label:"显示上架"},{value:1,label:"显示下架"}],itemcolumns:[{title:"#",width:60,align:"center",render:function(e,i){return i.index+t.page.pageindex*t.page.pagesize+1}},{title:"图片",key:"picurl",width:90,align:"center",render:function(t,e){return t("div",{attrs:{style:"width: 60px;height: 60px;margin-top:8px;margin-bottom:8px;"}},[t("img",{props:{type:"primary",size:"small"},attrs:{src:e.row.picurl,style:"width: 60px;height: 60px;border-radius: 2px;"},style:{}})])}},{title:"标题",key:"title",width:180,align:"center"},{title:"价格（元）",key:"price",width:120,align:"center"},{title:"库存",key:"num",width:100,align:"center"},{title:"推荐",key:"isrecommend",minwidth:80,align:"center",render:function(t,e){var i=e.row.isrecommend,n=e.row.istop,a=[];return i&&a.push("首页推荐"),0!=n&&a.push("分类置顶"),t("div",a.map(function(e){return t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"}},e)}))}},{title:"活动",key:"itemmodel",width:100,align:"center",render:function(e,i){var n="";return t.modelMap.find(function(t){return t.key==i.row.itemmodel})&&(n=t.modelMap.find(function(t){return t.key==i.row.itemmodel}).value),e("span",{style:{color:"#3bc0c3"}},n)}},{title:"是否上架",key:"ishidden",width:100,align:"center",render:function(t,e){return 0==e.row.ishidden?"已上架":"已下架"}},{title:"操作",key:"action",width:100,align:"center",render:function(e,i){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$router.push("/item/edit?id="+i.row.id)}}},"查看")])}}],itemdata:[]}},mounted:function(){this.$sitemap.prvname="商品管理",this.$sitemap.currname="商品列表",this.$menuactive.open=["ItemBlock"],this.$menuactive.active="ItemList",this.$Loading.start(),this.getItemList()},methods:{handlePushTop:function(t,e,i){var n=this,a=i?"此操作将会把这个商品的分类置顶取消，请确认取消":"一个分类下只有一个置顶商品，此操作将会把这个分类下已设置的置顶商品覆盖，请确认置顶";this.$Confirm(a,"提醒").then(function(){n.$http.post(n.$api.item_top,{itemid:t,cateid:e,istop:i?0:1}).then(function(t){n.$Message.success("设置分类成功！"),n.getItemList()}).catch(function(t){n.$Message.error("设置分类失败！")})}).catch(function(t){})},getItemList:function(){var t=this,e=this;this.loading=!0,this.$http.post("/item/list",this.conditions).then(function(t){"1"==t.data.result&&t.data.data&&(e.itemdata=t.data.data,e.totalcount=+t.data.totalcount),e.loading=!1,e.$Loading.finish()}).catch(function(i){t.loading=!1,e.$Loading.finish()})},handleItemAdd:function(){this.$router.push("/item/add")},getCategoryList:function(){var t=this;this.$http.post("category/list",{}).then(function(e){t.categoryList=e.data.data})},handleDelItem:function(t){var e=this;this.confirm("此操作下架这件商品，请确认删除！","提示").then(function(){return e.$http.post(e.$api.item_edithidden,{itemid:""+t,ishidden:1}).then(function(t){e.$Message.success("更新成功！")}).catch(function(t){e.$Message.error(""+error)})}).then(function(t){e.getItemList()}).catch(function(t){})},confirm:function(t,e){var i=this;return new a.a(function(n,a){i.$Modal.confirm({title:e||"确认",content:t,onOk:function(){return n(!0)},onCancel:function(){return a(!1)}})})},indexChange:function(t){this.page.pageindex=t-1},sizeChange:function(t){this.page.pagesize=t},handlerTableSelect:function(t){this.multiSelected=t}},computed:{conditions:function(){return{keywords:this.selectName||"",cateid:this.page.selectCategory,ishidden:this.page.selectStatus,pageindex:this.page.pageindex,pagesize:this.page.pagesize,itemtype:1}}},watch:{page:{handler:function(t){this.getItemList()},deep:!0}}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"clear-fix",staticStyle:{padding:"20px"}},[i("div",{staticStyle:{float:"left"}},[i("Button",{attrs:{type:"primary",icon:"ios-plus-empty"},on:{click:t.handleItemAdd}},[t._v("\n      添加商品\n    ")])],1),t._v(" "),i("div",{staticClass:"select-wrapper clear-fix",staticStyle:{"margin-bottom":"15px"}},[i("div",{staticClass:"fl-btn"},[i("Select",{attrs:{placeholder:"请选择上架状态"},model:{value:t.page.selectStatus,callback:function(e){t.$set(t.page,"selectStatus",e)},expression:"page.selectStatus"}},t._l(t.showstatus,function(e){return i("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),i("div",{staticClass:"fl-btn"},[i("Input",{attrs:{placeholder:"请输入商品名称"},model:{value:t.selectName,callback:function(e){t.selectName=e},expression:"selectName"}})],1),t._v(" "),i("Button",{staticClass:"fl-btn",attrs:{type:"ghost"},on:{click:t.getItemList}},[t._v("查询")])],1),t._v(" "),i("Table",{ref:"selection",staticClass:"main-table",attrs:{loading:t.loading,border:"",columns:t.itemcolumns,data:t.itemdata}}),t._v(" "),i("div",{staticStyle:{"margin-top":"15px",overflow:"hidden"}},[i("div",{staticStyle:{float:"right"}},[i("Page",{attrs:{total:t.totalcount,"page-size":t.page.pagesize,"page-size-opts":[10,20,30,40],"show-elevator":"","show-sizer":"",placement:"top","show-total":"",current:t.page.pageindex+1},on:{"on-change":t.indexChange,"on-page-size-change":t.sizeChange}})],1)])],1)},staticRenderFns:[]};var r=i("VU/8")(s,o,!1,function(t){i("2CKj")},"data-v-04df8e05",null);e.default=r.exports}});
//# sourceMappingURL=34.7971ff57d5f8c2f9d297.js.map