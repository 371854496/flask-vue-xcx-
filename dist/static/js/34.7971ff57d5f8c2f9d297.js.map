{"version":3,"sources":["webpack:///src/components/item/ItemList.vue","webpack:///./src/components/item/ItemList.vue?9bb5","webpack:///./src/components/item/ItemList.vue"],"names":["ItemList","_this","this","h","picurl","isrecommend","istop","it","value","text","id","start","getItemList","_this2","_this3","data","totalcount","finish","_this4","_this5","error","catch","erro","size","selection","selectCategory","selectStatus","pageindex","pagesize","item_ItemList","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","padding","float","attrs","type","icon","on","click","handleItemAdd","_v","margin-bottom","placeholder","model","page","callback","$$v","$set","expression","_l","item","key","_s","label","selectName","ref","loading","border","columns","itemcolumns","itemdata","margin-top","overflow","total","page-size","page-size-opts","show-elevator","show-sizer","placement","show-total","current","on-change","indexChange","on-page-size-change","sizeChange","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/34.7971ff57d5f8c2f9d297.js","sourcesContent":["<template>\r\n  <div class='clear-fix' style=\"padding:20px;\">\r\n    <div style=\"float:left;\">\r\n      <Button type=\"primary\" icon=\"ios-plus-empty\" @click=\"handleItemAdd\">\r\n        添加商品\r\n      </Button>\r\n    </div>\r\n    <div class=\"select-wrapper clear-fix\" style=\"margin-bottom:15px;\">\r\n      <!-- <div class='fl-btn'>\r\n        <Select v-model=\"page.selectCategory\" style='width:150px;' placeholder='请选择所属分类'>\r\n          <Option :value='0' :key='0'>所有分类</Option>\r\n          <Option v-for=\"item in categoryList\" :value=\"item.id\" :key=\"item.id\">{{ item.catename}}</Option>\r\n        </Select>\r\n      </div> -->\r\n      <div class='fl-btn'>\r\n        <Select v-model=\"page.selectStatus\" placeholder='请选择上架状态'>\r\n          <Option v-for=\"item in showstatus\" :value=\"item.value\" :key=\"item.value\">{{ item.label }}</Option>\r\n        </Select>\r\n      </div>\r\n      <div class='fl-btn'>\r\n        <Input v-model=\"selectName\" placeholder=\"请输入商品名称\"></Input>\r\n      </div>\r\n      <Button type=\"ghost\" class='fl-btn' @click='getItemList'>查询</Button>\r\n    </div>\r\n    <Table :loading=\"loading\" border ref=\"selection\" :columns=\"itemcolumns\" :data=\"itemdata\" class='main-table'></Table>\r\n    <div style=\"margin-top: 15px;overflow: hidden\">\r\n      <div style=\"float: right;\">\r\n        <Page :total=\"totalcount\" :page-size=\"page.pagesize\" :page-size-opts=\"[10,20,30,40]\" show-elevator show-sizer\r\n          placement=\"top\" show-total @on-change='indexChange' @on-page-size-change='sizeChange'\r\n          :current=\"page.pageindex+1\"></Page>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        showMulti: false,\r\n        loading: false,\r\n        totalcount: 0,\r\n        multiSelected: [],\r\n        multis: {\r\n          chosed: 0,\r\n          map: ['删除订单']\r\n        },\r\n        page: {\r\n          pagesize: 10,\r\n          pageindex: 0,\r\n          selectCategory: 0,\r\n          selectStatus: 0,\r\n        },\r\n        selectName: '',\r\n        categoryList: [],\r\n        itemCategory: [],\r\n        modelMap: [\r\n          {\r\n            key: 1,\r\n            value: '普通'\r\n          }, {\r\n            key: 2,\r\n            value: '秒杀'\r\n          }, {\r\n            key: 3,\r\n            value: '积分'\r\n          },{\r\n            key: 4,\r\n            value: '套餐'\r\n          },{\r\n            key: 5,\r\n            value: '新品'\r\n          }],\r\n        showstatus: [\r\n          {\r\n            value: -1,\r\n            label: '全部状态'\r\n          },\r\n          {\r\n            value: 0,\r\n            label: '显示上架'\r\n          },\r\n          {\r\n            value: 1,\r\n            label: '显示下架'\r\n          }\r\n        ],\r\n        itemcolumns: [\r\n          {\r\n            title: '#',\r\n            width: 60,\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              return params.index + this.page.pageindex * this.page.pagesize + 1;\r\n            }\r\n          },\r\n          {\r\n            title: '图片',\r\n            key: 'picurl',\r\n            width: 90,\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              return h('div', {\r\n                attrs: {\r\n                  style: 'width: 60px;height: 60px;margin-top:8px;margin-bottom:8px;'\r\n                },\r\n              }, [\r\n                h('img', {\r\n                  props: {\r\n                    type: 'primary',\r\n                    size: 'small'\r\n                  },\r\n                  attrs: {\r\n                    src: params.row.picurl,\r\n                    style: 'width: 60px;height: 60px;border-radius: 2px;'\r\n                  },\r\n                  style: {},\r\n                }),\r\n              ]);\r\n            }\r\n          },\r\n          {\r\n            title: '标题',\r\n            key: 'title',\r\n            width: 180,\r\n            align: 'center',\r\n          },\r\n          {\r\n            title: '价格（元）',\r\n            key: 'price',\r\n            width: 120,\r\n            align: 'center',\r\n          },\r\n          // {\r\n          //   title: '会员价（元）',\r\n          //   key: 'vipprice',\r\n          //   width: 150,\r\n          //   align: 'center',\r\n          // },\r\n          {\r\n            title: '库存',\r\n            key: 'num',\r\n            width: 100,\r\n            align: 'center',\r\n          },\r\n          {\r\n            title: '推荐',\r\n            key: 'isrecommend',\r\n            minwidth: 80,\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              let indexrec = params.row.isrecommend;\r\n              let caterec = params.row.istop;\r\n              let tags = [];\r\n              if (indexrec) {\r\n                tags.push('首页推荐')\r\n              }\r\n              ;\r\n              if (caterec !=0) {\r\n                tags.push('分类置顶')\r\n              }\r\n              return h('div', tags.map(it => {\r\n                return h('Button', {\r\n                  props: {\r\n                    type: 'primary',\r\n                    size: 'small'\r\n                  },\r\n                  style: {\r\n                    marginRight: '5px'\r\n                  },\r\n                }, it)\r\n              }))\r\n            }\r\n\r\n          },\r\n          {\r\n            title: '活动',\r\n            key: 'itemmodel',\r\n            width: 100,\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              let text='';\r\n              if(this.modelMap.find(it => it.key == params.row.itemmodel)){\r\n                text=this.modelMap.find(it => it.key == params.row.itemmodel).value\r\n              }\r\n              return h('span', {\r\n                style: {\r\n                  color: '#3bc0c3'\r\n                }\r\n              }, text)\r\n            }\r\n\r\n          },\r\n          {\r\n            title: '是否上架',\r\n            key: 'ishidden',\r\n            width: 100,\r\n            align: 'center',\r\n            render: (h, params) => {\r\n                return params.row.ishidden==0?'已上架':'已下架';\r\n            }\r\n          },\r\n          {\r\n            title: '操作',\r\n            key: 'action',\r\n            width: 100,\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              return h('div', [\r\n                h('Button', {\r\n                  props: {\r\n                    type: 'primary',\r\n                    size: 'small'\r\n                  },\r\n                  style: {\r\n                    marginRight: '5px'\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.$router.push('/item/edit?id=' + params.row.id)\r\n                    }\r\n                  }\r\n                }, '查看'),\r\n                // h('Button', {\r\n                //   props: {\r\n                //     type: 'warning',\r\n                //     size: 'small'\r\n                //   },\r\n                //   style: {\r\n                //     marginRight: '5px'\r\n                //   },\r\n                //   on: {\r\n                //     click: () => {\r\n                //       this.handleDelItem(params.row.id)\r\n                //     }\r\n                //   }\r\n                // }, '删除'),\r\n                // this.page.selectCategory ? h('Button', {\r\n                //   props: {\r\n                //     type: 'primary',\r\n                //     size: 'small',\r\n\r\n                //   },\r\n                //   domProps: {\r\n                //     title: '一个分类只可选择一个,用于该分类下的重点推荐'\r\n                //   },\r\n                //   on: {\r\n                //     click: () => {\r\n                //       this.handlePushTop(params.row.id, params.row.cateid, params.row.istop)\r\n                //     }\r\n                //   }\r\n                // }, params.row.istop ? '取消置顶' : '置顶') : '',\r\n              ]);\r\n            }\r\n          }\r\n        ],\r\n        itemdata: []\r\n      }\r\n    },\r\n    mounted: function () {\r\n      this.$sitemap.prvname = \"商品管理\";\r\n      this.$sitemap.currname = '商品列表';\r\n      this.$menuactive.open = ['ItemBlock'];\r\n      this.$menuactive.active = 'ItemList';\r\n      this.$Loading.start();\r\n      this.getItemList();\r\n      // this.getCategoryList()\r\n    },\r\n    methods: {\r\n      handlePushTop(itemid, cateid, istop) {\r\n        let text = istop ? '此操作将会把这个商品的分类置顶取消，请确认取消' : '一个分类下只有一个置顶商品，此操作将会把这个分类下已设置的置顶商品覆盖，请确认置顶'\r\n        this.$Confirm(text, '提醒').then(() => {\r\n          this.$http.post(this.$api.item_top, {itemid, cateid, istop: istop ? 0 : 1}).then(res => {\r\n            this.$Message.success('设置分类成功！');\r\n            this.getItemList()\r\n          }).catch(error => {\r\n            this.$Message.error('设置分类失败！');\r\n            console.log(error)\r\n          })\r\n        }).catch(error => {\r\n        })\r\n      },\r\n      getItemList() {\r\n        let that = this;\r\n        this.loading = true\r\n        this.$http.post(\"/item/list\", this.conditions).then(res => {\r\n          if (res.data.result == '1' && res.data.data) {\r\n            that.itemdata = res.data.data;\r\n            that.totalcount = +res.data.totalcount\r\n          }\r\n          that.loading = false;\r\n          that.$Loading.finish();\r\n        }).catch(error => {\r\n          this.loading = false;\r\n          that.$Loading.finish();\r\n        })\r\n      },\r\n      handleItemAdd() {\r\n        this.$router.push('/item/add')\r\n      },\r\n      getCategoryList() {\r\n        this.$http.post(\"category/list\", {}).then(res => {\r\n          this.categoryList = res.data.data\r\n        })\r\n      },\r\n      //删除商品的handler\r\n      handleDelItem(itemid) {\r\n        this.confirm('此操作下架这件商品，请确认删除！', '提示').then(() => {\r\n          return this.$http.post(this.$api.item_edithidden, {itemid: '' + itemid,ishidden:1}).then(res => {\r\n            this.$Message.success('更新成功！')\r\n          }).catch(erro => {\r\n            this.$Message.error('' + error)\r\n          })\r\n        }).then(res => {\r\n          this.getItemList()\r\n        })\r\n          .catch(erro => {\r\n          })\r\n      },\r\n      //删除的确认框封装\r\n      confirm(text, title) {\r\n        let that = this\r\n        return new Promise((resolve, reject) => {\r\n          that.$Modal.confirm({\r\n            title: title ? title : '确认',\r\n            content: text,\r\n            onOk: () => {\r\n              return resolve(true)\r\n            },\r\n            onCancel: () => {\r\n              return reject(false)\r\n            }\r\n          })\r\n        })\r\n      },\r\n      //分页组件size和index变化的handler\r\n      indexChange(index) {\r\n        this.page.pageindex = index - 1;\r\n      },\r\n      sizeChange(size) {\r\n        this.page.pagesize = size\r\n      },\r\n      handlerTableSelect(selection) {\r\n        console.log('选择变化', selection);\r\n        this.multiSelected = selection;\r\n      },\r\n    },\r\n    computed: {\r\n      conditions() {\r\n        return {\r\n          keywords: this.selectName || '',\r\n          cateid: this.page.selectCategory,\r\n          ishidden: this.page.selectStatus,\r\n          pageindex: this.page.pageindex,\r\n          pagesize: this.page.pagesize,\r\n          itemtype:1,\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      page: {\r\n        handler(newval) {\r\n          this.getItemList()\r\n        },\r\n        deep: true,\r\n      }\r\n    },\r\n  }\r\n\r\n</script>\r\n<style scoped>\r\n  .clear-fix::before {\r\n    content: '';\r\n    display: block;\r\n    clear: both;\r\n  }\r\n  .select-wrapper {\r\n    float: right;\r\n    height: 40px;\r\n  }\r\n  .fl-btn {\r\n    float: left;\r\n    margin-left: 10px;\r\n  }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/item/ItemList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"clear-fix\",staticStyle:{\"padding\":\"20px\"}},[_c('div',{staticStyle:{\"float\":\"left\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"ios-plus-empty\"},on:{\"click\":_vm.handleItemAdd}},[_vm._v(\"\\n      添加商品\\n    \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"select-wrapper clear-fix\",staticStyle:{\"margin-bottom\":\"15px\"}},[_c('div',{staticClass:\"fl-btn\"},[_c('Select',{attrs:{\"placeholder\":\"请选择上架状态\"},model:{value:(_vm.page.selectStatus),callback:function ($$v) {_vm.$set(_vm.page, \"selectStatus\", $$v)},expression:\"page.selectStatus\"}},_vm._l((_vm.showstatus),function(item){return _c('Option',{key:item.value,attrs:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"fl-btn\"},[_c('Input',{attrs:{\"placeholder\":\"请输入商品名称\"},model:{value:(_vm.selectName),callback:function ($$v) {_vm.selectName=$$v},expression:\"selectName\"}})],1),_vm._v(\" \"),_c('Button',{staticClass:\"fl-btn\",attrs:{\"type\":\"ghost\"},on:{\"click\":_vm.getItemList}},[_vm._v(\"查询\")])],1),_vm._v(\" \"),_c('Table',{ref:\"selection\",staticClass:\"main-table\",attrs:{\"loading\":_vm.loading,\"border\":\"\",\"columns\":_vm.itemcolumns,\"data\":_vm.itemdata}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"15px\",\"overflow\":\"hidden\"}},[_c('div',{staticStyle:{\"float\":\"right\"}},[_c('Page',{attrs:{\"total\":_vm.totalcount,\"page-size\":_vm.page.pagesize,\"page-size-opts\":[10,20,30,40],\"show-elevator\":\"\",\"show-sizer\":\"\",\"placement\":\"top\",\"show-total\":\"\",\"current\":_vm.page.pageindex+1},on:{\"on-change\":_vm.indexChange,\"on-page-size-change\":_vm.sizeChange}})],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-04df8e05\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/item/ItemList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-04df8e05\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ItemList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ItemList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-04df8e05\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ItemList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-04df8e05\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/item/ItemList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}