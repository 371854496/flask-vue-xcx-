webpackJsonp([38],{wlW4:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{step:1,loading:!1,wxaconfig:{appid:"",appsecret:""},ruleValidate:{appid:[{required:!0,message:"请输入小程序appid！",trigger:"blur"}],appsecret:[{required:!0,message:"请输入appid对应appsecret！",trigger:"blur"}]}}},mounted:function(){this.$sitemap.prvname="小程序管理",this.$sitemap.currname="小程序参数配置",this.$menuactive.open=["SystemBlock"],this.$menuactive.active="WxaConfig",this.getWxaAuthstate()},methods:{handleSubmit:function(t){var e=this,a=this.$refs[t];this.$refs[t].validate(function(t){t?(e.loading=!0,e.wxaConfigSetting(a)):e.$Message.error("还没有完整的信息输入！")})},handleReset:function(t){this.$refs[t].resetFields()},getWxaAuthstate:function(){var t=this;this.$http.post(this.$api.wxa_authstate,{}).then(function(e){e.data.data?(t.step=2,t.wxaconfig.appid=e.data.data.appid,t.wxaconfig.appsecret=e.data.data.appsecret):t.step=1}).catch(function(e){t.$Message.error(e)})},wxaConfigSetting:function(t){var e=this;this.$http.post(this.$api.wxa_save,e.wxaconfig).then(function(a){e.loading=!1,"1"==a.data.result?(t.resetFields(),e.step=2,e.$Message.success("小程序参数配置成功!")):e.$Message.error("操作失败，请检查原因！")})},handleAuth:function(){var t=this;this.$http.post(this.$api.wxa_auth,{}).then(function(t){window.location.href=t.data.data}).catch(function(e){t.$Message.error(e)})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"20px"}},[a("Steps",{attrs:{current:t.step}},[a("Step",{attrs:{title:"注册小程序",content:"通过微信公众平台注册认证小程序"}}),t._v(" "),a("Step",{attrs:{title:"授权小程序",content:"同意并授权小程序到管理后台"}}),t._v(" "),a("Step",{attrs:{title:"完成授权",content:"完成授权后代小程序实现业务"}})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"60px"}}),t._v(" "),a("Form",{ref:"formValidate",attrs:{model:t.wxaconfig,rules:t.ruleValidate,"label-position":"left","label-width":120}},[a("FormItem",{attrs:{label:"Appid",prop:"appid"}},[a("Input",{attrs:{placeholder:"请输入小程序appid！",size:"large"},model:{value:t.wxaconfig.appid,callback:function(e){t.$set(t.wxaconfig,"appid",e)},expression:"wxaconfig.appid"}})],1),t._v(" "),a("FormItem",{attrs:{label:"App Secret",prop:"appsecret"}},[a("Input",{attrs:{placeholder:"请输入对应appsecret！",size:"large",type:"password"},model:{value:t.wxaconfig.appsecret,callback:function(e){t.$set(t.wxaconfig,"appsecret",e)},expression:"wxaconfig.appsecret"}})],1),t._v(" "),a("FormItem",[a("Button",{staticStyle:{width:"100px"},attrs:{type:"primary",loading:t.loading},on:{click:function(e){t.handleSubmit("formValidate")}}},[t.loading?a("span",[t._v("正在保存..")]):a("span",[t._v("提交")])]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px",width:"80px"},attrs:{type:"ghost",size:"large"},on:{click:function(e){t.handleReset("formValidate")}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]},n=a("VU/8")(i,s,!1,null,null,null);e.default=n.exports}});
//# sourceMappingURL=38.a5fe0a717c3af5c5a25b.js.map