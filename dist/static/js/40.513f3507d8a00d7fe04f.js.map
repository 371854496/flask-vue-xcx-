{"version":3,"sources":["webpack:///src/components/system/AdminList.vue","webpack:///./src/components/system/AdminList.vue?3387","webpack:///./src/components/system/AdminList.vue"],"names":["AdminList","_this","this","params","index","adminForm","pageindex","pagesize","mobile","id","delBtn","getAdminList","mobileRule","addMobile","$http","post","$api","administrator_register","data","then","res","msg","size","that","administrator_list","finish","totalcount","catch","error","_this2","system_AdminList","render","_vm","_h","$createElement","_c","_self","staticStyle","padding","margin-bottom","attrs","type","icon","on","click","addAdmin","_v","staticClass","loading","columns","adminColumns","adminData","border","margin-top","overflow","float","total","page-size","page-size-opts","show-elevator","show-sizer","placement","show-total","on-change","indexChange","on-page-size-change","sizeChange","title","width","model","value","callback","$$v","showConfirm","expression","placeholder","maxlength","trim","directives","name","rawName","color","font-size","_s","mobileRuleText","slot","$event","addRow","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/40.513f3507d8a00d7fe04f.js","sourcesContent":["<template>\r\n  <div style=\"padding:20px;\">\r\n    <div style=\"margin-bottom: 20px;\">\r\n      <Button type=\"primary\" icon=\"ios-plus-empty\" @click=\"addAdmin\">\r\n        添加管理员\r\n      </Button>\r\n    </div>\r\n    <Table :loading=\"loading\"  :columns=\"adminColumns\" :data=\"adminData\" border class='main-table'>\r\n    </Table>\r\n    <div style=\"margin-top: 15px;overflow: hidden\">\r\n      <div style=\"float: right;\">\r\n        <Page :total=\"totalcount\" :page-size=\"adminForm.pagesize\"  :page-size-opts=\"[10,20,30,40]\" show-elevator show-sizer placement=\"top\" show-total @on-change='indexChange' @on-page-size-change='sizeChange'></Page>\r\n      </div>\r\n    </div>\r\n    <Modal title=\"添加管理员\" v-model=\"showConfirm\" width=\"300\" >\r\n        <Input v-model.trim=\"addMobile\" placeholder=\"请输入手机号！\" :maxlength=\"11\"></Input>\r\n        <div style=\"color: #ed3f14;font-size: 12px;padding: 4px 0 0 4px;\" v-show=\"mobileRuleBol\">{{mobileRuleText}}</div>\r\n        <div slot=\"footer\">\r\n          <Button  size=\"large\"  @click=\"showConfirm=false\">取消</Button>\r\n          <Button type=\"primary\" size=\"large\"  @click=\"addRow\">提交</Button>\r\n        </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      showConfirm: false,\r\n      totalcount: 0,\r\n      loading: false,\r\n      mobileRuleText: \"\",\r\n      addMobile: \"\",\r\n      mobileRuleBol: false,\r\n      adminForm: {\r\n        pagesize: 10,\r\n        pageindex: 0\r\n      },\r\n      adminColumns: [\r\n        {\r\n          title: \"#\",\r\n          width: 60,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            return (\r\n              params.index +\r\n              this.adminForm.pageindex * this.adminForm.pagesize +\r\n              1\r\n            );\r\n          }\r\n        },\r\n        {\r\n          title: \"手机号\",\r\n          key: \"mobile\",\r\n          align: \"center\"\r\n        },\r\n        {\r\n          title: \"状态\",\r\n          key: \"isauth\",\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            return params.row.isauth == 1 ? \"启用中\" : \"禁用中\";\r\n          }\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            let delBtn = \"\";\r\n            let mobile = localStorage.getItem(\"mobile\");\r\n            if (mobile != params.row.mobile) {\r\n              delBtn = h(\r\n                \"Button\",\r\n                {\r\n                  props: {\r\n                    type: \"primary\"\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.$Modal.confirm({\r\n                        title: \"删除操作\",\r\n                        content: \"确定要删除该账号吗?\",\r\n                        onOk: () => {\r\n                          this.delAccount({\r\n                              mobile:mobile,\r\n                              adminid:params.row.id,\r\n                              pagesize: 10,\r\n                              pageindex: 0\r\n                          });\r\n                        },\r\n                        onCancel: () => {}\r\n                      });\r\n                    }\r\n                  }\r\n                },\r\n                \"删除\"\r\n              );\r\n            };\r\n            return delBtn;\r\n          }\r\n        }\r\n      ],\r\n      adminData: []\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$sitemap.prvname = \"系统管理\";\r\n    this.$sitemap.currname = \"管理员列表\";\r\n    this.$menuactive.open = [\"SystemBlock\"];\r\n    this.$menuactive.active = \"AdminList\";\r\n    this.getAdminList();\r\n  },\r\n  watch: {\r\n    adminForm: {\r\n      handler(newval) {\r\n        this.getAdminList();\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  methods: {\r\n    addAdmin() {\r\n      this.showConfirm = true;\r\n      this.mobileRuleBol = false;\r\n      this.mobileRuleText = \"\";\r\n      this.addMobile = \"\";\r\n    },\r\n    addRow() {\r\n      let that = this;\r\n      that.mobileRule();\r\n      if (!that.mobileRuleBol) {\r\n        that.showConfirm = false;\r\n        let data = {\r\n          mobile: that.addMobile,\r\n          pagesize: 10,\r\n        pageindex: 0\r\n        };\r\n        that.$http\r\n          .post(this.$api.administrator_register, data)\r\n          .then(function(res) {\r\n            if (res.data.result == 1) {\r\n              that.$Message.success(\"添加管理员成功!\");\r\n              that.getAdminList();\r\n            } else that.$Message.error(res.data.msg);\r\n          });\r\n      }\r\n    },\r\n    //校验手机号格式\r\n    mobileRule() {\r\n      if (!/^\\d+$/.test(this.addMobile)) {\r\n        this.mobileRuleBol = true;\r\n        this.mobileRuleText = \"手机号格式不对\";\r\n      } else if (this.addMobile.length != 11) {\r\n        this.mobileRuleBol = true;\r\n        this.mobileRuleText = \"手机号长度不对\";\r\n      } else {\r\n        this.mobileRuleBol = false;\r\n      }\r\n    },\r\n    //切换页码\r\n    indexChange(index) {\r\n      this.adminForm.pageindex = index - 1;\r\n    },\r\n    //切换每页显示数量\r\n    sizeChange(size) {\r\n      this.adminForm.pagesize = size;\r\n    },\r\n    //得到管理员列表\r\n    getAdminList() {\r\n      let that = this;\r\n      that.loading = true;\r\n      that.$http\r\n        .post(that.$api.administrator_list, that.adminForm)\r\n        .then(function(res) {\r\n          that.$Loading.finish();\r\n          if (res.data.result == \"1\" && res.data.data) {\r\n            that.adminData = res.data.data;\r\n            that.totalcount = +res.data.totalcount;\r\n          } else {\r\n            that.$Message.error(res.data.msg);\r\n          }\r\n        })\r\n        .catch(function(res) {\r\n          that.$Message.error(\"服务器异常\");\r\n          that.$Loading.error();\r\n        })\r\n        .then(() => {\r\n          that.loading = false;\r\n        });\r\n    },\r\n    delAccount(params){\r\n        this.$http.post(this.$api.administrator_del,params).then(res=>{\r\n            if(`${res.data.result}`==='1'){\r\n                this.$Message.success('删除成功');\r\n                this.getAdminList();\r\n            }else{\r\n                this.$Message.error(res.data.msg);\r\n            }\r\n        }).catch(err=>{\r\n            console.log(err);\r\n            this.$Message.error('服务器异常');\r\n        })\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/system/AdminList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"padding\":\"20px\"}},[_c('div',{staticStyle:{\"margin-bottom\":\"20px\"}},[_c('Button',{attrs:{\"type\":\"primary\",\"icon\":\"ios-plus-empty\"},on:{\"click\":_vm.addAdmin}},[_vm._v(\"\\n      添加管理员\\n    \")])],1),_vm._v(\" \"),_c('Table',{staticClass:\"main-table\",attrs:{\"loading\":_vm.loading,\"columns\":_vm.adminColumns,\"data\":_vm.adminData,\"border\":\"\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"15px\",\"overflow\":\"hidden\"}},[_c('div',{staticStyle:{\"float\":\"right\"}},[_c('Page',{attrs:{\"total\":_vm.totalcount,\"page-size\":_vm.adminForm.pagesize,\"page-size-opts\":[10,20,30,40],\"show-elevator\":\"\",\"show-sizer\":\"\",\"placement\":\"top\",\"show-total\":\"\"},on:{\"on-change\":_vm.indexChange,\"on-page-size-change\":_vm.sizeChange}})],1)]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"添加管理员\",\"width\":\"300\"},model:{value:(_vm.showConfirm),callback:function ($$v) {_vm.showConfirm=$$v},expression:\"showConfirm\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入手机号！\",\"maxlength\":11},model:{value:(_vm.addMobile),callback:function ($$v) {_vm.addMobile=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"addMobile\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mobileRuleBol),expression:\"mobileRuleBol\"}],staticStyle:{\"color\":\"#ed3f14\",\"font-size\":\"12px\",\"padding\":\"4px 0 0 4px\"}},[_vm._v(_vm._s(_vm.mobileRuleText))]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"size\":\"large\"},on:{\"click\":function($event){_vm.showConfirm=false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.addRow}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-61902354\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/system/AdminList.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AdminList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./AdminList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-61902354\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./AdminList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/system/AdminList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}