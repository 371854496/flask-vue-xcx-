webpackJsonp([41],{uykr:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("fZjL"),n=t.n(a),o={data:function(){return{loading:!1,addForm:{name:"",address:"",picture:"",referrer:"",managername:"",telphone:""},addRule:{name:[{required:!0,message:"请输入店铺名称",trigger:"blur"}],address:[{required:!0,message:"请输入店铺地址",trigger:"change"}],picture:[{required:!0,message:"请选择店铺图片",trigger:"blur"}],managername:[{validator:function(e,r,t){0==r.length&&t(new Error("账号不能为空")),/^[0-9a-zA-Z]*$/.test(r)?t():t(new Error("账号格式不对,只能是数字和字母的组合"))},trigger:"blur"}],telphone:[{validator:function(e,r,t){/^[0-9]*$/.test(r)?11!=r.length?t(new Error("手机号位数不对")):t():t(new Error("手机号格式不对"))},trigger:"blur"}]}}},components:{"single-uploader":t("dc86").a},mounted:function(){this.$sitemap.prvname="店铺管理",this.$sitemap.currname="添加店铺"},methods:{handleImgChange:function(e){this.addForm.picture=e.url},formatData:function(){var e=this,r={};return n()(e.addForm).forEach(function(t){switch(t){case"referrer":""==e.addForm[t]||(r[t]=e.addForm[t]);break;default:r[t]=e.addForm[t]}}),r},handleSubmit:function(e){var r=this;this.$refs[e].validate(function(e){e?r.$http.post(r.$api.store_add,r.formatData()).then(function(e){1==e.data.result?(r.$Message.success("添加成功"),r.$router.push("/store/list")):r.$Message.error(e.data.msg)}).catch(function(e){r.$Message.error("服务器异常")}):r.$Message.error("请核对信息")})},handleReset:function(e){var r=this;this.$Confirm("所做的修改没有保存，请确认取消","提示").then(function(e){r.$router.push("/store/list")}).catch(function(e){})}}},s={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticStyle:{margin:"20px"}},[t("Form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRule,"label-position":"left","label-width":120}},[t("FormItem",{attrs:{label:"店铺名称",prop:"name"}},[t("Input",{attrs:{placeholder:"请输入店铺名称！",size:"large"},model:{value:e.addForm.name,callback:function(r){e.$set(e.addForm,"name","string"==typeof r?r.trim():r)},expression:"addForm.name"}})],1),e._v(" "),t("FormItem",{attrs:{label:"店铺地址",prop:"address"}},[t("Input",{attrs:{placeholder:"请输入店铺地址！",size:"large"},model:{value:e.addForm.address,callback:function(r){e.$set(e.addForm,"address","string"==typeof r?r.trim():r)},expression:"addForm.address"}})],1),e._v(" "),t("FormItem",{attrs:{label:"店铺图片",prop:"picture"}},[t("single-uploader",{attrs:{image:e.addForm.picture},on:{change:e.handleImgChange}})],1),e._v(" "),t("FormItem",{attrs:{label:"推荐人编码",prop:"referrer"}},[t("Input",{attrs:{placeholder:"请输入推荐人编码，一旦设置不可修改！",size:"large"},model:{value:e.addForm.referrer,callback:function(r){e.$set(e.addForm,"referrer","string"==typeof r?r.trim():r)},expression:"addForm.referrer"}})],1),e._v(" "),t("FormItem",{attrs:{label:"店铺账号",prop:"managername"}},[t("Input",{attrs:{placeholder:"请设置账号(用于登录)，一旦设置不可修改！",size:"large",maxlength:12},model:{value:e.addForm.managername,callback:function(r){e.$set(e.addForm,"managername","string"==typeof r?r.trim():r)},expression:"addForm.managername"}})],1),e._v(" "),t("FormItem",{attrs:{label:"店主手机号",prop:"telphone"}},[t("Input",{attrs:{placeholder:"请输入店主手机号！",size:"large",maxlength:11},model:{value:e.addForm.telphone,callback:function(r){e.$set(e.addForm,"telphone","string"==typeof r?r.trim():r)},expression:"addForm.telphone"}})],1),e._v(" "),t("FormItem",[t("Button",{staticStyle:{width:"120px"},attrs:{type:"primary",loading:e.loading,size:"large"},on:{click:function(r){e.handleSubmit("addForm")}}},[e.loading?t("span",[e._v("正在保存..")]):t("span",[e._v("提交")])]),e._v(" "),t("Button",{staticStyle:{width:"120px"},attrs:{type:"ghost",size:"large"},on:{click:function(r){e.handleReset("addForm")}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]},d=t("VU/8")(o,s,!1,null,null,null);r.default=d.exports}});
//# sourceMappingURL=41.18bb90a7e24814f3a760.js.map