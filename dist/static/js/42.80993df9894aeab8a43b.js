webpackJsonp([42],{Awn6:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("//Fk"),a=i.n(n),s={data:function(){return{page:{itemtype:1,itemmodel:2,pageindex:0,pagesize:10,ishidden:0,cateid:0},columns:[],listData:[],loading:!1,totalcount:0}},mounted:function(){this.$sitemap.prvname="营销活动",this.$sitemap.currname="秒杀商品列表",this.$menuactive.open=["SalesBlock"],this.$menuactive.active="SeckillingList",this.initHeader(),this.getItemList()},watch:{page:{handler:function(t){this.getItemList()},deep:!0}},methods:{handleGoAdd:function(){this.$router.push("/seckilling/add")},getItemList:function(){var t=this;this.loading=!0,this.$http.post(this.$api.item_list,this.page).then(function(e){"1"==e.data.result?(t.listData=e.data.data,t.totalcount=+e.data.totalcount):t.$Message.error(e.data.msg)}).catch(function(e){t.$Message.error("服务器异常")}).then(function(){t.loading=!1})},indexChange:function(t){this.page.pageindex=t-1},sizeChange:function(t){this.page.pagesize=t},initHeader:function(){var t=this;this.columns=[{title:"#",width:60,align:"center",render:function(e,i){return i.index+t.page.pageindex*t.page.pagesize+1}},{title:"图片",key:"picurl",width:90,align:"center",render:function(t,e){return t("div",{attrs:{style:"width: 60px;height: 60px;margin-top:8px;margin-bottom:8px;"}},[t("img",{props:{type:"primary",size:"small"},attrs:{src:e.row.picurl,style:"width: 60px;height: 60px;border-radius: 2px;"},style:{}})])}},{title:"标题",key:"title",align:"center"},{title:"活动价（元）",key:"price",width:150,align:"center"},{title:"活动数量",key:"num",width:100,align:"center"},{title:"操作",key:"action",width:200,align:"center",render:function(e,i){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$router.push("/seckilling/detail?id="+i.row.id)}}},"查看"),e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handleDelItem(i.row.id)}}},"撤销")])}}]},handleDelItem:function(t){var e=this;this.confirm("此操作将撤销这件活动商品，请确认撤销！","提示").then(function(){return e.$http.post(e.$api.item_repealmodel,{itemid:""+t}).then(function(t){e.$Message.success("撤销成功！")}).catch(function(t){e.$Message.error(""+error)})}).then(function(t){e.getItemList()}).catch(function(t){})},confirm:function(t,e){var i=this;return new a.a(function(n,a){i.$Modal.confirm({title:e||"确认",content:t,onOk:function(){return n(!0)},onCancel:function(){return a(!1)}})})}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{padding:"20px"}},[e("Button",{attrs:{type:"primary"},on:{click:this.handleGoAdd}},[this._v("\n    新建秒杀商品\n  ")]),this._v(" "),e("div",{staticStyle:{"margin-top":"20px"}},[e("Table",{ref:"appointment",attrs:{loading:this.loading,columns:this.columns,data:this.listData,"no-data-text":"暂无活动商品",border:""}}),this._v(" "),e("div",{staticStyle:{"margin-top":"15px",overflow:"hidden"}},[e("div",{staticStyle:{float:"right"}},[e("Page",{attrs:{total:this.totalcount,"page-size":this.page.pagesize,"page-size-opts":[10,20,30,40],"show-elevator":"","show-sizer":"",placement:"top","show-total":"",current:this.page.pageindex+1},on:{"on-change":this.indexChange,"on-page-size-change":this.sizeChange}})],1)])],1)],1)},staticRenderFns:[]},o=i("VU/8")(s,r,!1,null,null,null);e.default=o.exports}});
//# sourceMappingURL=42.80993df9894aeab8a43b.js.map