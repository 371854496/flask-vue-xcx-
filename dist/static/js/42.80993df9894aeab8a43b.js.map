{"version":3,"sources":["webpack:///src/components/sales/seckilling/SeckillingList.vue","webpack:///./src/components/sales/seckilling/SeckillingList.vue?2f46","webpack:///./src/components/sales/seckilling/SeckillingList.vue"],"names":["SeckillingList","initHeader","getItemList","_this","this","data","totalcount","msg","size","_this2","h","picurl","id","_this3","error","text","seckilling_SeckillingList","render","_h","$createElement","_c","_self","staticStyle","padding","attrs","type","on","click","handleGoAdd","_v","margin-top","ref","loading","columns","listData","no-data-text","border","overflow","float","total","page-size","page","pagesize","page-size-opts","show-elevator","show-sizer","placement","show-total","current","pageindex","on-change","indexChange","on-page-size-change","sizeChange","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"+HAkBAA,yCAKA,YACA,YACA,WACA,YACA,SAEA,mCAGA,aAEA,6CAGA,8BACA,gCACA,sCACA,sBACAC,kBACAC,qDAKAA,qBAIA,sDAGA,2CAEA,IAAAC,EAAAC,mBACA,wGAGAC,0BACAC,oCAEAC,0CAGA,sCAEA,mDAKA,6CAGAC,yBAEA,IAAAC,EAAAL,0BAGA,UACA,SACA,8EAEA,WAIA,SACA,eACA,SACA,2DAKA,gEAHAM,EAAA,mBAOA,eAEA,0BAEAC,aAEA,sEAOA,SACA,cAEA,iBAEA,aACA,cACA,UAEA,iBAEA,WACA,YACA,UAEA,iBAEA,SACA,eACA,UACA,sEAKA,eAEA,4BAGA,0EAGAC,OAGA,MAdAF,EAAA,sBAiBA,eAEA,4BAGA,kDAGAE,OAIA,sCAMA,IAAAC,EAAAT,6JAGA,iDAEAU,8BAGAZ,kEAMAE,6DAGA,aACAW,4BAEA,kCAGA,WC/LAC,GADiBC,OAFjB,WAA0B,IAAaC,EAAbd,KAAae,eAA0BC,EAAvChB,KAAuCiB,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,aAAaC,QAAA,UAAkBH,EAAA,UAAeI,OAAOC,KAAA,WAAiBC,IAAKC,MAA3JvB,KAA2JwB,eAA3JxB,KAAoLyB,GAAA,sBAApLzB,KAAoLyB,GAAA,KAAAT,EAAA,OAAqDE,aAAaQ,aAAA,UAAqBV,EAAA,SAAcW,IAAA,cAAAP,OAAyBQ,QAAlT5B,KAAkT4B,QAAAC,QAAlT7B,KAAkT6B,QAAA5B,KAAlTD,KAAkT8B,SAAAC,eAAA,SAAAC,OAAA,MAAlThC,KAAuZyB,GAAA,KAAAT,EAAA,OAAwBE,aAAaQ,aAAA,OAAAO,SAAA,YAAyCjB,EAAA,OAAYE,aAAagB,MAAA,WAAiBlB,EAAA,QAAaI,OAAOe,MAAniBnC,KAAmiBE,WAAAkC,YAAniBpC,KAAmiBqC,KAAAC,SAAAC,kBAAA,aAAAC,gBAAA,GAAAC,aAAA,GAAAC,UAAA,MAAAC,aAAA,GAAAC,QAAniB5C,KAAmiBqC,KAAAQ,UAAA,GAAwLvB,IAAKwB,YAAhuB9C,KAAguB+C,YAAAC,sBAAhuBhD,KAAguBiD,eAAkE,cAE3yBC,oBCYjBC,EAdAC,EAAA,OAcAC,CACAzD,EACAgB,GATA,EAEA,KAEA,KAEA,MAUA0C,EAAA,QAAAH,EAAA","file":"static/js/42.80993df9894aeab8a43b.js","sourcesContent":["<template>\r\n  <div style=\"padding:20px;\">\r\n    <Button @click='handleGoAdd' type='primary'>\r\n      新建秒杀商品\r\n    </Button>\r\n    <div style=\"margin-top:20px;\">\r\n      <Table :loading=\"loading\" ref=\"appointment\" :columns=\"columns\" :data=\"listData\" no-data-text='暂无活动商品'\r\n        border></Table>\r\n      <div style=\"margin-top: 15px;overflow: hidden\">\r\n        <div style=\"float: right;\">\r\n          <Page :total=\"totalcount\" :page-size=\"page.pagesize\" :page-size-opts=\"[10,20,30,40]\" show-elevator show-sizer\r\n            placement=\"top\" show-total @on-change='indexChange' @on-page-size-change='sizeChange'\r\n            :current=\"page.pageindex+1\"></Page>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        page: {\r\n          itemtype: 1,\r\n          itemmodel: 2,\r\n          pageindex: 0,\r\n          pagesize: 10,\r\n          ishidden: 0,\r\n          cateid: 0,\r\n        },\r\n        columns: [],\r\n        listData: [],\r\n        loading: false,\r\n        totalcount: 0,\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$sitemap.prvname = \"营销活动\";\r\n      this.$sitemap.currname = '秒杀商品列表';\r\n      this.$menuactive.open = ['SalesBlock'];\r\n      this.$menuactive.active = 'SeckillingList';\r\n      this.initHeader();\r\n      this.getItemList();\r\n    },\r\n    watch: {\r\n      page: {\r\n        handler(newval) {\r\n          this.getItemList();\r\n        },\r\n        deep: true,\r\n      }\r\n    },\r\n    methods: {\r\n      handleGoAdd() {\r\n        this.$router.push('/seckilling/add');\r\n      },\r\n      getItemList() {\r\n        this.loading = true;\r\n        this.$http.post(this.$api.item_list, this.page).then(res => {\r\n          if (res.data.result == '1') {\r\n            this.listData = res.data.data;\r\n            this.totalcount = +res.data.totalcount;\r\n          } else {\r\n            this.$Message.error(res.data.msg);\r\n          }\r\n        }).catch(err => {\r\n          this.$Message.error('服务器异常');\r\n        }).then(() => {\r\n          this.loading = false;\r\n        })\r\n      },\r\n      //分页组件size和index变化的handler\r\n      indexChange(index) {\r\n        this.page.pageindex = index - 1;\r\n      },\r\n      sizeChange(size) {\r\n        this.page.pagesize = size\r\n      },\r\n      initHeader() {\r\n        this.columns = [\r\n          {\r\n            title: '#',\r\n            width: 60,\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              return params.index + this.page.pageindex * this.page.pagesize + 1;\r\n            }\r\n          },\r\n          {\r\n            title: '图片',\r\n            key: 'picurl',\r\n            width: 90,\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              return h('div', {\r\n                attrs: {\r\n                  style: 'width: 60px;height: 60px;margin-top:8px;margin-bottom:8px;'\r\n                },\r\n              }, [\r\n                h('img', {\r\n                  props: {\r\n                    type: 'primary',\r\n                    size: 'small'\r\n                  },\r\n                  attrs: {\r\n                    src: params.row.picurl,\r\n                    style: 'width: 60px;height: 60px;border-radius: 2px;'\r\n                  },\r\n                  style: {},\r\n                }),\r\n              ]);\r\n            }\r\n          },\r\n          {\r\n            title: '标题',\r\n            key: 'title',\r\n            align: 'center',\r\n          },\r\n          {\r\n            title: '活动价（元）',\r\n            key: 'price',\r\n            width: 150,\r\n            align: 'center',\r\n          },\r\n          {\r\n            title: '活动数量',\r\n            key: 'num',\r\n            width: 100,\r\n            align: 'center',\r\n          },\r\n          {\r\n            title: '操作',\r\n            key: 'action',\r\n            width: 200,\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              return h('div', [\r\n                h('Button', {\r\n                  props: {\r\n                    type: 'primary',\r\n                    size: 'small'\r\n                  },\r\n                  style: {\r\n                    marginRight: '5px'\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.$router.push('/seckilling/detail?id=' + params.row.id)\r\n                    }\r\n                  }\r\n                }, '查看'),\r\n                h('Button', {\r\n                  props: {\r\n                    type: 'warning',\r\n                    size: 'small'\r\n                  },\r\n                  style: {\r\n                    marginRight: '5px'\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.handleDelItem(params.row.id)\r\n                    }\r\n                  }\r\n                }, '撤销')\r\n              ])\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      //删除商品的handler\r\n      handleDelItem(itemid) {\r\n        this.confirm('此操作将撤销这件活动商品，请确认撤销！', '提示').then(() => {\r\n          return this.$http.post(this.$api.item_repealmodel, {itemid: '' + itemid}).then(res => {\r\n            this.$Message.success('撤销成功！')\r\n          }).catch(erro => {\r\n            this.$Message.error('' + error)\r\n          })\r\n        }).then(res => {\r\n          this.getItemList()\r\n        }).catch(erro => {\r\n        })\r\n      },\r\n      //删除的确认框封装\r\n      confirm(text, title) {\r\n        let that = this\r\n        return new Promise((resolve, reject) => {\r\n          that.$Modal.confirm({\r\n            title: title ? title : '确认',\r\n            content: text,\r\n            onOk: () => {\r\n              return resolve(true)\r\n            },\r\n            onCancel: () => {\r\n              return reject(false)\r\n            }\r\n          })\r\n        })\r\n      },\r\n    },\r\n  }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/sales/seckilling/SeckillingList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"padding\":\"20px\"}},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleGoAdd}},[_vm._v(\"\\n    新建秒杀商品\\n  \")]),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('Table',{ref:\"appointment\",attrs:{\"loading\":_vm.loading,\"columns\":_vm.columns,\"data\":_vm.listData,\"no-data-text\":\"暂无活动商品\",\"border\":\"\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"15px\",\"overflow\":\"hidden\"}},[_c('div',{staticStyle:{\"float\":\"right\"}},[_c('Page',{attrs:{\"total\":_vm.totalcount,\"page-size\":_vm.page.pagesize,\"page-size-opts\":[10,20,30,40],\"show-elevator\":\"\",\"show-sizer\":\"\",\"placement\":\"top\",\"show-total\":\"\",\"current\":_vm.page.pageindex+1},on:{\"on-change\":_vm.indexChange,\"on-page-size-change\":_vm.sizeChange}})],1)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-32e02218\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/sales/seckilling/SeckillingList.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SeckillingList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SeckillingList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-32e02218\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SeckillingList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/sales/seckilling/SeckillingList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}