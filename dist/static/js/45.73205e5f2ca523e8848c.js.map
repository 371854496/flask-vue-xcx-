{"version":3,"sources":["webpack:///src/components/sales/SalesItemList.vue","webpack:///./src/components/sales/SalesItemList.vue?8348","webpack:///./src/components/sales/SalesItemList.vue"],"names":["SalesItemList","getItemList","initHeader","name","_this","this","data","totalcount","msg","size","_this2","h","picurl","id","_this3","error","text","sales_SalesItemList","render","_h","$createElement","_c","_self","staticStyle","padding","attrs","type","on","click","handleGoAdd","_v","margin-top","value","page","itemmodel","on-click","handleTabChange","label","ref","loading","columns","listData","no-data-text","border","overflow","float","total","page-size","pagesize","page-size-opts","show-elevator","show-sizer","placement","show-total","current","pageindex","on-change","indexChange","on-page-size-change","sizeChange","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"+HAsBAA,yCAKA,YACA,cACA,WACA,UACA,WAGA,mCAGA,aAEA,6CAGA,8BACA,8BACA,sCACA,qBACAC,mBACAC,oDAKAD,qBAIA,sDAGA,mEAIAE,sBACA,0BAGA,IAAAC,EAAAC,mBACA,wGAGAC,0BACAC,oCAEAC,0CAGA,sCAEA,mDAKA,6CAGAC,yBAEA,IAAAC,EAAAL,0BAGA,UACA,SACA,8EAEA,WAIA,SACA,eACA,SACA,2DAKA,gEAHAM,EAAA,mBAOA,eAEA,0BAEAC,aAEA,sEAOA,SACA,cAEA,iBAEA,aACA,cACA,UAEA,iBAEA,aACA,iBACA,UAEA,iBAEA,WACA,YACA,UAEA,iBAEA,SACA,eACA,UACA,sEAmBA,eAEA,4BAGA,kDAGAC,OAIA,sCAMA,IAAAC,EAAAT,yKAGA,iDAEAU,8BAGAd,kEAMAI,6DAGA,aACAW,4BAEA,kCAGA,WChNAC,GADiBC,OAFjB,WAA0B,IAAaC,EAAbd,KAAae,eAA0BC,EAAvChB,KAAuCiB,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,aAAaC,QAAA,UAAkBH,EAAA,UAAeI,OAAOC,KAAA,WAAiBC,IAAKC,MAA3JvB,KAA2JwB,eAA3JxB,KAAoLyB,GAAA,sBAApLzB,KAAoLyB,GAAA,KAAAT,EAAA,OAAqDE,aAAaQ,aAAA,UAAqBV,EAAA,QAAaI,OAAOhB,KAAA,QAAAiB,KAAA,OAAAM,MAA/R3B,KAA+R4B,KAAAC,WAAwDP,IAAKQ,WAA5V9B,KAA4V+B,mBAAgCf,EAAA,WAAgBI,OAAOY,MAAA,OAAAlC,KAAA,OAAnZE,KAA8ayB,GAAA,KAAAT,EAAA,WAA4BI,OAAOY,MAAA,OAAAlC,KAAA,QAA2B,GAA5eE,KAA4eyB,GAAA,KAAAT,EAAA,SAA8BiB,IAAA,cAAAb,OAAyBc,QAAniBlC,KAAmiBkC,QAAAC,QAAniBnC,KAAmiBmC,QAAAlC,KAAniBD,KAAmiBoC,SAAAC,eAAA,SAAAC,OAAA,MAAniBtC,KAAwoByB,GAAA,KAAAT,EAAA,OAAwBE,aAAaQ,aAAA,OAAAa,SAAA,YAAyCvB,EAAA,OAAYE,aAAasB,MAAA,WAAiBxB,EAAA,QAAaI,OAAOqB,MAApxBzC,KAAoxBE,WAAAwC,YAApxB1C,KAAoxB4B,KAAAe,SAAAC,kBAAA,aAAAC,gBAAA,GAAAC,aAAA,GAAAC,UAAA,MAAAC,aAAA,GAAAC,QAApxBjD,KAAoxB4B,KAAAsB,UAAA,GAAwL5B,IAAK6B,YAAj9BnD,KAAi9BoD,YAAAC,sBAAj9BrD,KAAi9BsD,eAAkE,cAE5hCC,oBCYjBC,EAdAC,EAAA,OAcAC,CACA/D,EACAiB,GATA,EAEA,KAEA,KAEA,MAUA+C,EAAA,QAAAH,EAAA","file":"static/js/45.73205e5f2ca523e8848c.js","sourcesContent":["<template>\r\n  <div style=\"padding:20px;\">\r\n    <Button @click='handleGoAdd' type='primary'>\r\n      新建活动商品\r\n    </Button>\r\n    <div style=\"margin-top:20px;\">\r\n      <Tabs size=\"small\" type=\"card\" :value='page.itemmodel' @on-click='handleTabChange'>\r\n        <TabPane label=\"套餐商品\" name='4'></TabPane>\r\n        <TabPane label=\"精选推荐\" name='5'></TabPane>\r\n      </Tabs>\r\n      <Table :loading=\"loading\" ref=\"appointment\" :columns=\"columns\" :data=\"listData\" no-data-text='暂无活动商品'\r\n        border></Table>\r\n      <div style=\"margin-top: 15px;overflow: hidden\">\r\n        <div style=\"float: right;\">\r\n          <Page :total=\"totalcount\" :page-size=\"page.pagesize\" :page-size-opts=\"[10,20,30,40]\" show-elevator show-sizer\r\n            placement=\"top\" show-total @on-change='indexChange' @on-page-size-change='sizeChange'\r\n            :current=\"page.pageindex+1\"></Page>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        page: {\r\n          itemtype: 1,\r\n          itemmodel: '4',\r\n          pageindex: 0,\r\n          pagesize: 10,\r\n          cateid: 0,\r\n          ishidden: 0,\r\n\r\n        },\r\n        columns: [],\r\n        listData: [],\r\n        loading: false,\r\n        totalcount: 0,\r\n      }\r\n    },\r\n    mounted() {\r\n      this.$sitemap.prvname = \"促销商品\";\r\n      this.$sitemap.currname = '商品列表';\r\n      this.$menuactive.open = ['SalesBlock'];\r\n      this.$menuactive.active = 'SalesItemList';\r\n      this.getItemList();\r\n      this.initHeader();\r\n    },\r\n    watch: {\r\n      page: {\r\n        handler(newval) {\r\n          this.getItemList();\r\n        },\r\n        deep: true,\r\n      }\r\n    },\r\n    methods: {\r\n      handleGoAdd() {\r\n        this.$router.push('/salesitem/add')\r\n      },\r\n      //tab切换\r\n      handleTabChange(name) {\r\n        this.page.itemmodel = name;\r\n        this.page.pageindex=0;\r\n      },\r\n      //得到list\r\n      getItemList() {\r\n        this.loading = true;\r\n        this.$http.post(this.$api.item_list, this.page).then(res => {\r\n          if (res.data.result == '1') {\r\n            this.listData = res.data.data;\r\n            this.totalcount = +res.data.totalcount;\r\n          } else {\r\n            this.$Message.error(res.data.msg);\r\n          }\r\n        }).catch(err => {\r\n          this.$Message.error('服务器异常');\r\n        }).then(() => {\r\n          this.loading = false;\r\n        })\r\n      },\r\n      //分页组件size和index变化的handler\r\n      indexChange(index) {\r\n        this.page.pageindex = index - 1;\r\n      },\r\n      sizeChange(size) {\r\n        this.page.pagesize = size\r\n      },\r\n      initHeader() {\r\n        this.columns = [\r\n          {\r\n            title: '#',\r\n            width: 60,\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              return params.index + this.page.pageindex * this.page.pagesize + 1;\r\n            }\r\n          },\r\n          {\r\n            title: '图片',\r\n            key: 'picurl',\r\n            width: 90,\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              return h('div', {\r\n                attrs: {\r\n                  style: 'width: 60px;height: 60px;margin-top:8px;margin-bottom:8px;'\r\n                },\r\n              }, [\r\n                h('img', {\r\n                  props: {\r\n                    type: 'primary',\r\n                    size: 'small'\r\n                  },\r\n                  attrs: {\r\n                    src: params.row.picurl,\r\n                    style: 'width: 60px;height: 60px;border-radius: 2px;'\r\n                  },\r\n                  style: {},\r\n                }),\r\n              ]);\r\n            }\r\n          },\r\n          {\r\n            title: '标题',\r\n            key: 'title',\r\n            align: 'center',\r\n          },\r\n          {\r\n            title: '活动价（元）',\r\n            key: 'price',\r\n            width: 150,\r\n            align: 'center',\r\n          },\r\n          {\r\n            title: '会员价（元）',\r\n            key: 'vipprice',\r\n            width: 150,\r\n            align: 'center',\r\n          },\r\n          {\r\n            title: '活动数量',\r\n            key: 'num',\r\n            width: 100,\r\n            align: 'center',\r\n          },\r\n          {\r\n            title: '操作',\r\n            key: 'action',\r\n            width: 100,\r\n            align: 'center',\r\n            render: (h, params) => {\r\n              return h('div', [\r\n                // h('Button', {\r\n                //   props: {\r\n                //     type: 'primary',\r\n                //     size: 'small'\r\n                //   },\r\n                //   style: {\r\n                //     marginRight: '5px'\r\n                //   },\r\n                //   on: {\r\n                //     click: () => {\r\n                //       this.$router.push('/salesitem/add?id=' + params.row.id+'&type=1')\r\n                //     }\r\n                //   }\r\n                // }, '查看'),\r\n                h('Button', {\r\n                  props: {\r\n                    type: 'primary',\r\n                    size: 'small'\r\n                  },\r\n                  style: {\r\n                    marginRight: '5px'\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.handleDelItem(params.row.id)\r\n                    }\r\n                  }\r\n                }, '撤销')\r\n              ])\r\n            }\r\n          }\r\n        ]\r\n      },\r\n      //删除商品的handler\r\n      handleDelItem(itemid) {\r\n        this.confirm('此操作将撤销这件活动商品，请确认撤销！', '提示').then(() => {\r\n          return this.$http.post(this.$api.item_repealmodel, {itemid: '' + itemid,itemmodel:1}).then(res => {\r\n            this.$Message.success('撤销成功！')\r\n          }).catch(erro => {\r\n            this.$Message.error('' + error)\r\n          })\r\n        }).then(res => {\r\n          this.getItemList()\r\n        }).catch(erro => {\r\n        })\r\n      },\r\n      //删除的确认框封装\r\n      confirm(text, title) {\r\n        let that = this\r\n        return new Promise((resolve, reject) => {\r\n          that.$Modal.confirm({\r\n            title: title ? title : '确认',\r\n            content: text,\r\n            onOk: () => {\r\n              return resolve(true)\r\n            },\r\n            onCancel: () => {\r\n              return reject(false)\r\n            }\r\n          })\r\n        })\r\n      },\r\n    },\r\n  }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/sales/SalesItemList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"padding\":\"20px\"}},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleGoAdd}},[_vm._v(\"\\n    新建活动商品\\n  \")]),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"20px\"}},[_c('Tabs',{attrs:{\"size\":\"small\",\"type\":\"card\",\"value\":_vm.page.itemmodel},on:{\"on-click\":_vm.handleTabChange}},[_c('TabPane',{attrs:{\"label\":\"套餐商品\",\"name\":\"4\"}}),_vm._v(\" \"),_c('TabPane',{attrs:{\"label\":\"精选推荐\",\"name\":\"5\"}})],1),_vm._v(\" \"),_c('Table',{ref:\"appointment\",attrs:{\"loading\":_vm.loading,\"columns\":_vm.columns,\"data\":_vm.listData,\"no-data-text\":\"暂无活动商品\",\"border\":\"\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"15px\",\"overflow\":\"hidden\"}},[_c('div',{staticStyle:{\"float\":\"right\"}},[_c('Page',{attrs:{\"total\":_vm.totalcount,\"page-size\":_vm.page.pagesize,\"page-size-opts\":[10,20,30,40],\"show-elevator\":\"\",\"show-sizer\":\"\",\"placement\":\"top\",\"show-total\":\"\",\"current\":_vm.page.pageindex+1},on:{\"on-change\":_vm.indexChange,\"on-page-size-change\":_vm.sizeChange}})],1)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7abd6dce\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/sales/SalesItemList.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SalesItemList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SalesItemList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7abd6dce\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SalesItemList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/sales/SalesItemList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}