{"version":3,"sources":["webpack:///src/components/order/RepairList.vue","webpack:///./src/components/order/RepairList.vue?f84e","webpack:///./src/components/order/RepairList.vue"],"names":["order_RepairList","render","_h","this","$createElement","_c","_self","staticStyle","padding","overflow","attrs","div","min-width","size","type","value","page","state","on","on-click","handleTabChange","_l","item","key","label","name","_v","loading","tableLoading","border","columns","tablecolumns","data","tableData","no-data-text","margin-top","float","total","totalcount","page-size","pagesize","page-size-opts","show-elevator","show-sizer","placement","show-total","on-change","indexChange","on-page-size-change","sizeChange","staticRenderFns","Component","__webpack_require__","normalizeComponent","_this","id","detailBtn","getRepairList","_this2","pageindex","msg","_this3","$http","post","$api","repair_editstate","repairid","then","res","__webpack_exports__"],"mappings":"wGAiBA,ICdAA,GADiBC,OAFjB,WAA0B,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBE,aAAaC,QAAA,OAAAC,SAAA,QAAmCC,OAAQC,IAAA,MAAUN,EAAA,OAAYE,aAAaK,YAAA,WAAqBP,EAAA,QAAaK,OAAOG,KAAA,QAAAC,KAAA,OAAAC,MAApNZ,KAAoNa,KAAAC,OAAoDC,IAAKC,WAA7QhB,KAA6QiB,kBAA7QjB,KAA6SkB,GAA7SlB,KAA6S,mBAAAmB,GAAuC,OAAAjB,EAAA,WAAqBkB,IAAAD,EAAAP,MAAAL,OAAsBc,MAAAF,EAAAE,MAAAC,KAAAH,EAAAP,YAA/XZ,KAAuauB,GAAA,KAAArB,EAAA,SAA2BK,OAAOiB,QAAzcxB,KAAycyB,aAAAC,OAAA,GAAAC,QAAzc3B,KAAyc4B,aAAAC,KAAzc7B,KAAyc8B,UAAAC,eAAA,cAAiH,GAA1jB/B,KAA0jBuB,GAAA,KAAArB,EAAA,OAA4BE,aAAa4B,aAAA,OAAA1B,SAAA,YAAyCJ,EAAA,OAAYE,aAAa6B,MAAA,WAAiB/B,EAAA,QAAaK,OAAO2B,MAA1sBlC,KAA0sBmC,WAAAC,YAA1sBpC,KAA0sBa,KAAAwB,SAAAC,kBAAA,aAAAC,gBAAA,GAAAC,aAAA,GAAAC,UAAA,MAAAC,aAAA,IAAyJ3B,IAAK4B,YAAx2B3C,KAAw2B4C,YAAAC,sBAAx2B7C,KAAw2B8C,eAAkE,QAEn7BC,oBCYjBC,EAdAC,EAAA,OAcAC,OFKA,8BACA,IAAAC,EAAAnD,0BAEA,iBAEA,aACA,QACA,WAEA,oBAEA,OACA,OAEA,wBAGA,WAEA,aAEA,UAEA,cAEA,UAEA,cAEA,UAGA,uBAEA,OACA,QACA,QAEA,kBACA,uBAGA,UACA,SACA,8EAEA,WAIA,YACA,QACA,iBAEA,iBAEA,aACA,QACA,iBAEA,iBAEA,aACA,QACA,mBACA,wEAEA,YAIA,gBACA,QACA,mBAEA,iBAEA,WACA,cACA,UACA,8DAEA,YAIA,SACA,eACA,UACA,sCAGA,sBAGA,eAEA,4BAGA,mGAIA,sBAMA,UAEA,sBAGA,eAEA,4BAGA,mGAIA,sBAOA,UAEA,sBAGA,eAEA,4BAGA,iDAIA,qCAKAoD,SAKA,8BACAtC,eACAuC,sBAMA,WACA,cACA,yBACA,aACA,mBAIA,+CAGA,8BACA,8BACA,sCACA,kBACAC,yDAKAA,uBAIA,sCAEA,IAAAC,EAAAvD,gCAEAwD,+BACAnB,0BACA1B,uBACAG,yBACA,4EAEA,oDAEAe,0BACAM,oCAEAsB,sDAKA,6CAGA/C,+CAIAY,sBACA,2BAGA,IAAAoC,EAAA1D,UACA2D,MAAAC,KAAA5D,KAAA6D,KAAAC,kBAAAC,WACAjD,UAAAkD,KAAA,SAAAC,uBAGAX,qBElOAzD,GATA,EAEA,KAEA,KAEA,MAUAqE,EAAA,QAAAlB,EAAA","file":"static/js/47.bdcc52285e706ef6367a.js","sourcesContent":["<template>\r\n  <div div style=\"padding:20px;overflow:auto\">\r\n    <div style=\"min-width:900px\">\r\n      <Tabs size=\"small\" type=\"card\" :value='page.state' @on-click='handleTabChange'>\r\n        <TabPane v-for='item of stateList' :label='item.label' :name='item.value' :key='item.value'></TabPane>\r\n      </Tabs>\r\n      <Table :loading=\"tableLoading\"  border :columns=\"tablecolumns\" :data=\"tableData\"\r\n        no-data-text='未找到相关订单'></Table>\r\n    </div>\r\n    <div style=\"margin-top: 15px;overflow: hidden\">\r\n      <div style=\"float: right;\">\r\n        <Page :total=\"totalcount\" :page-size=\"page.pagesize\" :page-size-opts=\"[10,20,30,40]\" show-elevator show-sizer\r\n          placement=\"top\" show-total @on-change='indexChange' @on-page-size-change='sizeChange'></Page>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"repair-list\",\r\n  data() {\r\n    return {\r\n      tableLoading: false,\r\n      page: {\r\n        pagesize: 10,\r\n        pageindex: 0,\r\n        state: \"-1\",\r\n        type: -1\r\n      },\r\n      repairTypeObj: {\r\n        \"1\": \"手机\",\r\n        \"2\": \"电脑\",\r\n        \"3\": \"宽带\"\r\n      },\r\n      stateList: [\r\n        {\r\n          value: \"-1\",\r\n          label: \"全部\"\r\n        },\r\n        {\r\n          value: \"0\",\r\n          label: \"未处理\"\r\n        },\r\n        {\r\n          value: \"1\",\r\n          label: \"已同意\"\r\n        },\r\n        {\r\n          value: \"2\",\r\n          label: \"已拒绝\"\r\n        }\r\n      ],\r\n      stateObj: {\r\n        \"-1\": \"全部\",\r\n        \"0\": \"未处理\",\r\n        \"1\": \"已同意\",\r\n        \"2\": \"已拒绝\"\r\n      },\r\n      totalcount: 0,\r\n      tablecolumns: [\r\n        {\r\n          title: \"#\",\r\n          width: 60,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            return params.index + this.page.pageindex * this.page.pagesize + 1;\r\n          }\r\n        },\r\n        {\r\n          title: \"申请人\",\r\n          width: 120,\r\n          key: \"realname\",\r\n          align: \"center\"\r\n        },\r\n        {\r\n          title: \"联系方式\",\r\n          width: 140,\r\n          key: \"telphone\",\r\n          align: \"center\"\r\n        },\r\n        {\r\n          title: \"故障类型\",\r\n          width: 200,\r\n          key: \"repairtype\",\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            return this.repairTypeObj[params.row.repairtype] || \"\";\r\n          }\r\n        },\r\n        {\r\n          title: \"申请时间\",\r\n          minwidth:200,\r\n          key: \"createtime\",\r\n          align: \"center\"\r\n        },\r\n        {\r\n          title: \"申请状态\",\r\n          key: \"state\",\r\n          width: 130,\r\n          align: \"center\",\r\n          render: (n, params) => {\r\n            return this.stateObj[params.row.state] || \"\";\r\n          }\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          key: \"action\",\r\n          width: 200,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            let applyBtn = h(\r\n              \"Button\",\r\n              {\r\n                props: {\r\n                  type: \"primary\",\r\n                  size: \"small\"\r\n                },\r\n                style: {\r\n                  marginRight: \"5px\"\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.$Confirm('处理用户的维修申请，请确认','提示').then(res=>{\r\n                      this.dealApply(params.row.id, 1);\r\n                    },err=>{})\r\n                  }\r\n                }\r\n              },\r\n              \"同意\"\r\n            );\r\n            let refuseBtn = h(\r\n              \"Button\",\r\n              {\r\n                props: {\r\n                  type: \"warning\",\r\n                  size: \"small\"\r\n                },\r\n                style: {\r\n                  marginRight: \"5px\"\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.$Confirm('拒绝用户的维修申请，请确认','提示').then(res=>{\r\n                      this.dealApply(params.row.id, 2);\r\n                    },err=>{})\r\n                    \r\n                  }\r\n                }\r\n              },\r\n              \"拒绝\"\r\n            );\r\n            let detailBtn = h(\r\n              \"Button\",\r\n              {\r\n                props: {\r\n                  type: \"primary\",\r\n                  size: \"small\"\r\n                },\r\n                style: {\r\n                  marginRight: \"5px\"\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.$router.push({\r\n                      name:'RepairDetail',\r\n                      query:{\r\n                        repairid:params.row.id\r\n                      }\r\n                    })\r\n                   \r\n                  }\r\n                }\r\n              },\r\n              \"详情\"\r\n            );\r\n            let state = params.row.state;\r\n            return h(\"div\", state == 0 ? [applyBtn, refuseBtn,detailBtn] : [detailBtn]);\r\n          }\r\n        }\r\n      ],\r\n      tableData: [\r\n        {\r\n          id: 1,\r\n          realname: \"大陈\",\r\n          telphone: \"18879701111\",\r\n          repairtype: 2,\r\n          createtime: \"2018-12-21\",\r\n          state: 0\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$sitemap.prvname = \"订单管理\";\r\n    this.$sitemap.currname = \"维修申请\";\r\n    this.$menuactive.open = [\"OrderBlock\"];\r\n    this.$menuactive.active = \"RepairList\";\r\n    this.getRepairList();\r\n  },\r\n  watch: {\r\n    page: {\r\n      handler(newval, oldval) {\r\n        this.getRepairList();\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  methods: {\r\n    getRepairList() {\r\n      let params = {};\r\n      params.pageindex = this.page.pageindex;\r\n      params.pagesize = this.page.pagesize;\r\n      params.type = this.page.type;\r\n      params.state = this.page.state;\r\n      this.tableLoading = true;\r\n      this.$http.post(this.$api.repair_list, params).then(res => {\r\n        this.tableLoading = false;\r\n        if (res.data.result == 1 && res.data.data) {\r\n          this.tableData = res.data.data;\r\n          this.totalcount = +res.data.totalcount;\r\n        } else {\r\n          this.$Message.error(res.data.msg);\r\n        }\r\n      });\r\n    },\r\n    indexChange(index) {\r\n      this.page.pageindex = index - 1;\r\n    },\r\n    sizeChange(size) {\r\n      this.page.pagesize = size;\r\n    },\r\n    //tab切换\r\n    handleTabChange(name) {\r\n      this.page.state = name;\r\n      this.page.pageindex = 0;\r\n    },\r\n    dealApply(repairid, state) {\r\n\r\n      this.$http\r\n        .post(this.$api.repair_editstate, { repairid, state })\r\n        .then(res => {\r\n          if(res.data.result==1) {\r\n            this.getRepairList()\r\n          }\r\n        });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/order/RepairList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"padding\":\"20px\",\"overflow\":\"auto\"},attrs:{\"div\":\"\"}},[_c('div',{staticStyle:{\"min-width\":\"900px\"}},[_c('Tabs',{attrs:{\"size\":\"small\",\"type\":\"card\",\"value\":_vm.page.state},on:{\"on-click\":_vm.handleTabChange}},_vm._l((_vm.stateList),function(item){return _c('TabPane',{key:item.value,attrs:{\"label\":item.label,\"name\":item.value}})})),_vm._v(\" \"),_c('Table',{attrs:{\"loading\":_vm.tableLoading,\"border\":\"\",\"columns\":_vm.tablecolumns,\"data\":_vm.tableData,\"no-data-text\":\"未找到相关订单\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"15px\",\"overflow\":\"hidden\"}},[_c('div',{staticStyle:{\"float\":\"right\"}},[_c('Page',{attrs:{\"total\":_vm.totalcount,\"page-size\":_vm.page.pagesize,\"page-size-opts\":[10,20,30,40],\"show-elevator\":\"\",\"show-sizer\":\"\",\"placement\":\"top\",\"show-total\":\"\"},on:{\"on-change\":_vm.indexChange,\"on-page-size-change\":_vm.sizeChange}})],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-75f0030c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/order/RepairList.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RepairList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RepairList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-75f0030c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./RepairList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/order/RepairList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}