{"version":3,"sources":["webpack:///src/components/member/ProxyList.vue","webpack:///./src/components/member/ProxyList.vue?1132","webpack:///./src/components/member/ProxyList.vue"],"names":["member_ProxyList","render","_vm","this","_h","$createElement","_c","_self","staticStyle","padding","overflow","attrs","div","min-width","size","type","value","page","state","on","on-click","handleTabChange","_l","item","key","label","name","_v","loading","tableLoading","border","columns","tablecolumns","data","tableData","no-data-text","margin-top","float","total","totalcount","page-size","pagesize","page-size-opts","show-elevator","show-sizer","placement","show-total","on-change","indexChange","on-page-size-change","sizeChange","title","width","model","callback","$$v","showConfirm","expression","placeholder","maxlength","addMobile","trim","directives","rawName","color","font-size","_s","mobileRuleText","slot","click","$event","addRow","staticRenderFns","Component","__webpack_require__","normalizeComponent","_this","province","city","county","id","getRepairList","confirmId","applyid","$http","post","that","$api","applyshop_updatestate","then","res","msg","_this2","pageindex","_this3","__webpack_exports__"],"mappings":"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","file":"static/js/48.c8735ebf7e70b7585068.js","sourcesContent":["<template>\r\n  <div div style=\"padding:20px;overflow:auto\">\r\n    <div style=\"min-width:900px\">\r\n      <Tabs size=\"small\" type=\"card\" :value='page.state' @on-click='handleTabChange'>\r\n        <TabPane v-for='item of stateList' :label='item.label' :name='item.value' :key='item.value'></TabPane>\r\n      </Tabs>\r\n      <Table :loading=\"tableLoading\"  border :columns=\"tablecolumns\" :data=\"tableData\"\r\n        no-data-text='未找到相关订单'></Table>\r\n    </div>\r\n    <div style=\"margin-top: 15px;overflow: hidden\">\r\n      <div style=\"float: right;\">\r\n        <Page :total=\"totalcount\" :page-size=\"page.pagesize\" :page-size-opts=\"[10,20,30,40]\" show-elevator show-sizer\r\n          placement=\"top\" show-total @on-change='indexChange' @on-page-size-change='sizeChange'></Page>\r\n      </div>\r\n    </div>\r\n     <Modal title=\"拒绝理由\" v-model=\"showConfirm\" width=\"300\" >\r\n        <Input v-model.trim=\"addMobile\" placeholder=\"请输入拒绝理由！\" :maxlength=\"11\"></Input>\r\n        <div style=\"color: #ed3f14;font-size: 12px;padding: 4px 0 0 4px;\" v-show=\"mobileRuleBol\">{{mobileRuleText}}</div>\r\n        <div slot=\"footer\">\r\n          <Button  size=\"large\"  @click=\"showConfirm=false\">取消</Button>\r\n          <Button type=\"primary\" size=\"large\"  @click=\"addRow\">提交</Button>\r\n        </div>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  name: \"repair-list\",\r\n  data() {\r\n    return {\r\n      tableLoading: false,\r\n      showConfirm: false,\r\n      mobileRuleText: \"\",\r\n      addMobile: \"\",\r\n      mobileRuleBol: false,\r\n      confirmId:'',//拒绝弹框是对应的申请id\r\n      page: {\r\n        pagesize: 10,\r\n        pageindex: 0,\r\n        state: \"-1\",\r\n       },\r\n      repairTypeObj: {\r\n        \"1\": \"手机\",\r\n        \"2\": \"电脑\",\r\n        \"3\": \"宽带\"\r\n      },\r\n      stateList: [\r\n        {\r\n          value: \"-1\",\r\n          label: \"全部\"\r\n        },\r\n        {\r\n          value: \"0\",\r\n          label: \"未处理\"\r\n        },\r\n        {\r\n          value: \"1\",\r\n          label: \"已同意\"\r\n        },\r\n        {\r\n          value: \"2\",\r\n          label: \"已拒绝\"\r\n        }\r\n      ],\r\n      stateObj: {\r\n        \"-1\": \"全部\",\r\n        \"0\": \"未处理\",\r\n        \"1\": \"已同意\",\r\n        \"2\": \"已拒绝\"\r\n      },\r\n      totalcount: 0,\r\n      tablecolumns: [\r\n        {\r\n          title: \"#\",\r\n          width: 60,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            return params.index + this.page.pageindex * this.page.pagesize + 1;\r\n          }\r\n        },\r\n        {\r\n          title: \"申请人\",\r\n          width: 200,\r\n          key: \"realname\",\r\n          align: \"center\"\r\n        },\r\n        {\r\n          title: \"联系方式\",\r\n          width: 200,\r\n          key: \"telphone\",\r\n          align: \"center\"\r\n        },\r\n         {\r\n          title: \"申请地区\",\r\n          key: \"province\",\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n              let autotext = ''\r\n              let province=params.row.province\r\n              let city = params.row.city\r\n              let county = params.row.county\r\n                  autotext=province+city+county\r\n                  return h('span', autotext)\r\n            }\r\n        },\r\n        {\r\n          title: \"申请学校\",\r\n          key: \"school\",\r\n          align: \"center\"\r\n        },\r\n        {\r\n          title: \"申请状态\",\r\n          key: \"state\",\r\n          width: 130,\r\n          align: \"center\",\r\n          render: (n, params) => {\r\n            return this.stateObj[params.row.state] || \"\";\r\n          }\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          key: \"action\",\r\n          width: 200,\r\n          align: \"center\",\r\n          render: (h, params) => {\r\n            let applyBtn = h(\r\n              \"Button\",\r\n              {\r\n                props: {\r\n                  type: \"primary\",\r\n                  size: \"small\"\r\n                },\r\n                style: {\r\n                  marginRight: \"5px\"\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                    this.$Confirm('处理用户的申请代理人，请确认','提示').then(res=>{\r\n                      this.dealApply(params.row.id, 1);\r\n                    },err=>{})\r\n                  }\r\n                }\r\n              },\r\n              \"同意\"\r\n            );\r\n            let refuseBtn = h(\r\n              \"Button\",\r\n              {\r\n                props: {\r\n                  type: \"warning\",\r\n                  size: \"small\"\r\n                },\r\n                style: {\r\n                  marginRight: \"5px\"\r\n                },\r\n                on: {\r\n                  click: () => {\r\n                              this.showConfirm = true;\r\n                             this.mobileRuleText = \"\";\r\n                              this.confirmId = params.row.id\r\n                    }\r\n                }\r\n              },\r\n              \"拒绝\"\r\n            );\r\n            // let detailBtn = h(\r\n            //   \"Button\",\r\n            //   {\r\n            //     props: {\r\n            //       type: \"primary\",\r\n            //       size: \"small\"\r\n            //     },\r\n            //     style: {\r\n            //       marginRight: \"5px\"\r\n            //     },\r\n            //     on: {\r\n            //       click: () => {\r\n            //         this.$router.push({\r\n            //           name:'ProxyDetail',\r\n            //           query:{\r\n            //             repairid:params.row.id\r\n            //           }\r\n            //         })\r\n                   \r\n            //       }\r\n            //     }\r\n            //   },\r\n            //   \"详情\"\r\n            // );\r\n            let state = params.row.state;\r\n            return h(\"div\", state == 0 ? [applyBtn, refuseBtn,] : '已完成');\r\n          }\r\n        }\r\n      ],\r\n      tableData: [\r\n        {\r\n          id: 1,\r\n          realname: \"大陈\",\r\n          telphone: \"18879701111\",\r\n          repairtype: 2,\r\n          createtime: \"2018-12-21\",\r\n          state: 0\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  mounted() {\r\n    this.$sitemap.prvname = \"用户管理\";\r\n    this.$sitemap.currname = \"代理人列表\";\r\n    this.$menuactive.open = [\"MemberBlock\"];\r\n    this.$menuactive.active = \"ProxyList\";\r\n   this.getRepairList();\r\n  },\r\n  watch: {\r\n    page: {\r\n      handler(newval, oldval) {\r\n        this.getRepairList();\r\n      },\r\n      deep: true\r\n    }\r\n  },\r\n  methods: {\r\n    addAdmin() {\r\n      this.showConfirm = true;\r\n      this.mobileRuleBol = false;\r\n      this.mobileRuleText = \"\";\r\n      this.addMobile = \"\";\r\n    },\r\n    addRow() {\r\n      let that = this;\r\n     that.showConfirm = false;\r\n     let applyid = that.confirmId;\r\n        let data = {\r\n          refusereason: that.addMobile,\r\n          applyid: applyid, \r\n          state:2 \r\n         };\r\n        that.$http\r\n          .post(that.$api.applyshop_updatestate, data)\r\n          .then(function(res) {\r\n            if (res.data.result == 1) {\r\n              that.$Message.success(\"操作成功!\");\r\n              that.getRepairList();\r\n            } else that.$Message.error(res.data.msg);\r\n          });\r\n      \r\n    },\r\n    getRepairList() {\r\n      let params = {};\r\n      params.pageindex = this.page.pageindex;\r\n      params.pagesize = this.page.pagesize;\r\n      params.state = this.page.state;\r\n      this.tableLoading = true;\r\n      this.$http.post(this.$api.applyshop_list, params).then(res => {\r\n        this.tableLoading = false;\r\n        if (res.data.result == 1 && res.data.data) {\r\n          this.tableData = res.data.data;\r\n          this.totalcount = +res.data.totalcount;\r\n        } else {\r\n          this.$Message.error(res.data.msg);\r\n        }\r\n      });\r\n    },\r\n    indexChange(index) {\r\n      this.page.pageindex = index - 1;\r\n    },\r\n    sizeChange(size) {\r\n      this.page.pagesize = size;\r\n    },\r\n    //tab切换\r\n    handleTabChange(name) {\r\n      this.page.state = name;\r\n      this.page.pageindex = 0;\r\n    },\r\n    dealApply(applyid, state) {\r\n   this.$http\r\n        .post(this.$api.applyshop_updatestate, { applyid, state})\r\n        .then(res => {\r\n          if(res.data.result==1) {\r\n            this.getRepairList()\r\n          }\r\n        });\r\n    }\r\n    }\r\n};\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/member/ProxyList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"padding\":\"20px\",\"overflow\":\"auto\"},attrs:{\"div\":\"\"}},[_c('div',{staticStyle:{\"min-width\":\"900px\"}},[_c('Tabs',{attrs:{\"size\":\"small\",\"type\":\"card\",\"value\":_vm.page.state},on:{\"on-click\":_vm.handleTabChange}},_vm._l((_vm.stateList),function(item){return _c('TabPane',{key:item.value,attrs:{\"label\":item.label,\"name\":item.value}})})),_vm._v(\" \"),_c('Table',{attrs:{\"loading\":_vm.tableLoading,\"border\":\"\",\"columns\":_vm.tablecolumns,\"data\":_vm.tableData,\"no-data-text\":\"未找到相关订单\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"15px\",\"overflow\":\"hidden\"}},[_c('div',{staticStyle:{\"float\":\"right\"}},[_c('Page',{attrs:{\"total\":_vm.totalcount,\"page-size\":_vm.page.pagesize,\"page-size-opts\":[10,20,30,40],\"show-elevator\":\"\",\"show-sizer\":\"\",\"placement\":\"top\",\"show-total\":\"\"},on:{\"on-change\":_vm.indexChange,\"on-page-size-change\":_vm.sizeChange}})],1)]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"拒绝理由\",\"width\":\"300\"},model:{value:(_vm.showConfirm),callback:function ($$v) {_vm.showConfirm=$$v},expression:\"showConfirm\"}},[_c('Input',{attrs:{\"placeholder\":\"请输入拒绝理由！\",\"maxlength\":11},model:{value:(_vm.addMobile),callback:function ($$v) {_vm.addMobile=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"addMobile\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mobileRuleBol),expression:\"mobileRuleBol\"}],staticStyle:{\"color\":\"#ed3f14\",\"font-size\":\"12px\",\"padding\":\"4px 0 0 4px\"}},[_vm._v(_vm._s(_vm.mobileRuleText))]),_vm._v(\" \"),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"size\":\"large\"},on:{\"click\":function($event){_vm.showConfirm=false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\",\"size\":\"large\"},on:{\"click\":_vm.addRow}},[_vm._v(\"提交\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0bda42f1\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/member/ProxyList.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ProxyList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ProxyList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0bda42f1\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ProxyList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/member/ProxyList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}