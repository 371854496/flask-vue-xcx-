webpackJsonp([52],{jEqQ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i("woOf"),a=i.n(r),l={data:function(){return{loading:!1,articletype:[],article:{id:"",title:"",typeid:"",remark:"",content:"",picture:""},linkobj:{0:"首页",1:"会员介绍",2:"维修介绍",3:"推广介绍"},ruleValidate:{title:[{required:!0,message:"标题名称不能为空！",trigger:"blur"}],remark:[{required:!0,message:"请输入简要说明",trigger:"blur"}],content:[{required:!0,message:"请输入内容介绍",trigger:"blur"},{type:"string",min:20,message:"请输入大于20个字符！",trigger:"blur"}],picture:[{required:!0,message:"请选择标题图片",trigger:"blur"}]}}},components:{"vue-editor":i("FGPZ").a},mounted:function(){this.$sitemap.prvname="活动管理",this.$sitemap.currname="编辑活动",this.getArticleTypeList(),this.getArticleDetail()},methods:{handleSubmit:function(t){var e=this,i=this.$refs[t];this.$refs[t].validate(function(t){t?(e.loading=!0,e.editArticle(i)):e.$Message.error("还没有完整的信息输入！")})},handleReset:function(t){var e=this;this.$Confirm("所做的修改没有保存，请确认取消","提示").then(function(t){e.$router.push("/article/list")}).catch(function(t){})},getArticleTypeList:function(){var t=this;this.$http.post("articletype/list",{}).then(function(e){t.articletype=e.data.data,t.$Loading.finish()})},getArticleDetail:function(){var t={artid:this.$route.query.id},e=this;this.$http.post("article/get",t).then(function(t){1==t.data.result&&(e.article=t.data.data)})},editArticle:function(t){var e=this;this.$http.post(this.$api.article_edit,a()({},this.article,{signescape:["content"]})).then(function(t){1==t.data.result?(e.$router.push("/article/list"),e.$Message.success("内容修改成功!")):e.$Message.error(t.data.msg)}).catch(function(t){e.$Message.error("修改失败"+t)}).then(function(){e.loading=!1})},updateContent:function(t){this.article.content=t},handleImgChange:function(t){this.article.picture=t.url}}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{margin:"20px"}},[i("Form",{ref:"formValidate",attrs:{model:t.article,rules:t.ruleValidate,"label-position":"left","label-width":120}},[i("FormItem",{attrs:{label:"标题名称",prop:"title"}},[i("Input",{attrs:{placeholder:"请输入标题名称！",size:"large"},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),t._v(" "),i("FormItem",{attrs:{label:"标题图片",prop:"picture"}},[i("single-uploader",{attrs:{image:t.article.picture},on:{change:t.handleImgChange}})],1),t._v(" "),i("FormItem",{attrs:{label:"内容分类",prop:"typeid"}},[i("Select",{attrs:{placeholder:"请选择内容所属分类",size:"large",transfer:""},model:{value:t.article.typeid,callback:function(e){t.$set(t.article,"typeid",e)},expression:"article.typeid"}},t._l(t.articletype,function(e){return i("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),i("FormItem",{attrs:{label:"详情页跳转",prop:"linktype"}},[i("Select",{attrs:{placeholder:"请选择跳转"},model:{value:t.article.linktype,callback:function(e){t.$set(t.article,"linktype",e)},expression:"article.linktype"}},t._l(t.linkobj,function(e,r){return i("Option",{key:r,attrs:{value:r}},[t._v(t._s(e))])}))],1),t._v(" "),i("FormItem",{attrs:{label:"简要说明",prop:"remark"}},[i("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入简要说明!",size:"large"},model:{value:t.article.remark,callback:function(e){t.$set(t.article,"remark",e)},expression:"article.remark"}})],1),t._v(" "),i("FormItem",{attrs:{label:"内容介绍",prop:"content"}},[i("vue-editor",{attrs:{content:t.article.content},on:{change:t.updateContent}})],1),t._v(" "),i("FormItem",[i("Button",{staticStyle:{width:"120px"},attrs:{type:"primary",loading:t.loading,size:"large"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t.loading?i("span",[t._v("正在保存..")]):i("span",[t._v("提交")])]),t._v(" "),i("Button",{staticStyle:{"margin-left":"8px",width:"80"},attrs:{type:"ghost",size:"large"},on:{click:function(e){t.handleReset("formValidate")}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]},s=i("VU/8")(l,n,!1,null,null,null);e.default=s.exports}});
//# sourceMappingURL=52.625d57ee1412cfcfb498.js.map