webpackJsonp([9],{"3DL1":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("fZjL"),s=e.n(i),n=e("//Fk"),r=e.n(n),o=e("woOf"),l=e.n(o),d={data:function(){return{detailData:{shopname:"",logo:"",company:"",realname:"",address:"",mobile:"",industry:"",mail:"",wechat:""},editData:{shopname:"",logo:"",company:"",realname:"",address:"",mobile:"",industry:"",mail:"",wechat:""},rules:{shopname:[{required:!0,message:"店铺名称不能为空！",trigger:"blur"}],logo:[{required:!0,message:"logo不能为空！",trigger:"blur"}],company:[{required:!0,message:"公司名称不能为空！",trigger:"blur"}],mobile:[{required:!0,message:"联系电话不能为空！",trigger:"blur"}],address:[{required:!0,message:"地址不能为空！",trigger:"blur"}],industry:[{required:!0,message:"关于我们不能为空！",trigger:"blur"}]},isEdit:!1,postEdit:!1}},mounted:function(){this.$sitemap.prvname="系统管理",this.$sitemap.currname="公司信息",this.$menuactive.open=["SystemBlock"],this.$menuactive.active="Company",this.getCompanyDetail()},methods:{imgChange:function(t){this.editData.logo=t.url},handleEdit:function(){this.isEdit=!0,this.copy(this.detailData,this.editData)},getCompanyDetail:function(){var t=this;this.$http.post(this.$api.company_detail,{}).then(function(a){a.data.data&&"1"==a.data.result&&t.copy(a.data.data[0],t.detailData)})},postCompanyEdit:function(t){var a=this;return this.$http.post(this.$api.company_edit,l()({},t,{signescape:["industry"]})).then(function(t){if("1"!=t.data.result)return a.$Message.error("信息修改失败！"),r.a.reject(t.msg);a.$Message.success("信息修改成功！")}).catch(function(t){a.$Message.error("信息修改失败！")})},handleReset:function(){this.isEdit=!1},handleSave:function(){var t=this;this.$refs.storeDetail.validate(function(a){a?(t.postEdit=!0,t.postCompanyEdit(t.editData).then(function(){t.postEdit=!1})):t.$Message.error("信息请填充完整！")})},updateContent:function(t){this.editData.industry=t},copy:function(t,a){s()(a).forEach(function(e){a[e]=t[e]?t[e]:""})}}},p={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticStyle:{padding:"20px"}},[e("Form",{ref:"storeDetail",attrs:{model:t.editData,rules:t.rules,"label-position":"left","label-width":120}},[e("FormItem",{attrs:{label:"店铺名称：",prop:"shopname"}},[t.isEdit?e("Input",{attrs:{placeholder:"请输入店铺名称"},model:{value:t.editData.shopname,callback:function(a){t.$set(t.editData,"shopname",a)},expression:"editData.shopname"}}):e("span",[t._v(t._s(t.detailData.shopname||"暂无"))])],1),t._v(" "),e("FormItem",{attrs:{label:"公司名称：",prop:"company"}},[t.isEdit?e("Input",{attrs:{placeholder:"请输入公司名称"},model:{value:t.editData.company,callback:function(a){t.$set(t.editData,"company",a)},expression:"editData.company"}}):e("span",[t._v(t._s(t.detailData.company||"暂无"))])],1),t._v(" "),e("FormItem",{attrs:{label:"商户姓名：",prop:"realname"}},[t.isEdit?e("Input",{attrs:{placeholder:"请输入商户姓名"},model:{value:t.editData.realname,callback:function(a){t.$set(t.editData,"realname",a)},expression:"editData.realname"}}):e("span",[t._v(t._s(t.detailData.realname||"暂无"))])],1),t._v(" "),e("FormItem",{attrs:{label:"联系电话：",prop:"mobile"}},[t.isEdit?e("Input",{attrs:{placeholder:"请输入联系电话",maxlength:11},model:{value:t.editData.mobile,callback:function(a){t.$set(t.editData,"mobile",a)},expression:"editData.mobile"}}):e("span",[t._v(t._s(t.detailData.mobile||"暂无"))])],1),t._v(" "),e("FormItem",{attrs:{label:"公司邮箱：",prop:"mail"}},[t.isEdit?e("Input",{attrs:{placeholder:"请输入邮箱"},model:{value:t.editData.mail,callback:function(a){t.$set(t.editData,"mail",a)},expression:"editData.mail"}}):e("span",[t._v(t._s(t.detailData.mail||"暂无"))])],1),t._v(" "),e("FormItem",{attrs:{label:"微信号：",prop:"wechat"}},[t.isEdit?e("Input",{attrs:{placeholder:"请输入微信号"},model:{value:t.editData.wechat,callback:function(a){t.$set(t.editData,"wechat",a)},expression:"editData.wechat"}}):e("span",[t._v(t._s(t.detailData.wechat||"暂无"))])],1),t._v(" "),e("FormItem",{attrs:{label:"店铺地址：",prop:"address"}},[t.isEdit?e("Input",{attrs:{placeholder:"请输入地址",type:"textarea"},model:{value:t.editData.address,callback:function(a){t.$set(t.editData,"address",a)},expression:"editData.address"}}):e("span",[t._v(t._s(t.detailData.address||"暂无"))])],1),t._v(" "),e("FormItem",{attrs:{label:"店铺logo：",prop:"logo"}},[t.isEdit?e("single-uploader",{attrs:{image:t.editData.logo},on:{change:t.imgChange}}):e("span",[t.detailData.logo?e("img",{staticClass:"logo-show",attrs:{src:t.detailData.logo}}):e("span",[t._v("暂无图片")])])],1),t._v(" "),e("FormItem",{attrs:{label:"关于我们：",prop:"industry"}},[t.isEdit?e("vue-editor",{attrs:{content:t.editData.industry},on:{change:t.updateContent}}):e("vue-editor",{attrs:{content:t.detailData.industry,disabled:!0}})],1),t._v(" "),t.isEdit?e("FormItem",[e("Button",{staticStyle:{width:"120px"},attrs:{type:"primary",size:"large",loading:t.postEdit},on:{click:t.handleSave}},[t._v("保存编辑")])],1):e("FormItem",[e("Button",{staticStyle:{width:"120px"},attrs:{type:"primary",size:"large"},on:{click:t.handleEdit}},[t._v("编辑/添加")])],1)],1)],1)},staticRenderFns:[]};var m=e("VU/8")(d,p,!1,function(t){e("a0IN")},null,null);a.default=m.exports},a0IN:function(t,a){}});
//# sourceMappingURL=9.6db80816816b2b7f6f7f.js.map